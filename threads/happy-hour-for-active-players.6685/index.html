<!DOCTYPE html>
<html lang="en-US" dir="LTR" class="Public NoJs LoggedOut NoSidebar Responsive">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <base href="" />
    <title>Oxide - Solved - Happy hour for active players</title>
    <noscript>
        <style>
            .JsOnly,
            .jsOnly {
                display: none !important;
            }
        </style>
    </noscript>
    <script src="/assets/js/jquery/jquery-1.11.0.min.js"></script>
    <script src="/assets/js/xenforo/xenforo.js?_v=f33b43a2"></script>
    <link rel="canonical" href="" />
    <link rel="stylesheet" href="/assets/default.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" />
    <link rel="icon" sizes="196x196" href="/assets/styles/oxide/logo.og.png" />
    <link rel="apple-touch-icon" href="/assets/styles/oxide/logo.og.png" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="description" content="Oxide is an abstracted, modular, and extensible mod and plugin framework for any game that uses .NET" />
    <meta property="og:site_name" content="Oxide" />
    <meta property="og:image" content="/assets/styles/oxide/logo.og.png" />
    <meta property="og:url" content="" />
    <meta property="og:title" content="Oxide - Solved - Happy hour for active players" />
    <meta property="og:description" content="" />
</head>
<body>
    <div id="headerMover">
        <div id="headerProxy"></div>
        <div id="content" class="forum_list">
            <div class="pageWidth">
                <div class="pageContent">
                    <div class="breadBoxTop">
    <nav>
        <fieldset class="breadcrumb">
            <div class="boardTitle"><strong>Oxide</strong></div>
            <span class="crumbs">
                <span class="crust">
                    <a href="/" class="crumb" rel="up" itemprop="url">
                        <span itemprop="title">Forums</span>
                    </a>
                    <span class="arrow"></span>
                </span>
                
                    
                    <span class="crust">
                        <a href="/forums/plugin-requests.10/" class="crumb" rel="up" itemprop="url">
                            <span itemprop="title">Plugin Requests</span>
                        </a>
                        <span class="arrow"></span>
                    </span>
                    
                
            </span>
        </fieldset>
    </nav>
</div>

<div class="titleBar">
    <h1>
        <span class="prefix prefixGreen">Solved</span> <a href="/threads/happy-hour-for-active-players.6685/">Happy hour for active players</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="/forums/plugin-requests.10/">Plugin Requests</a>' started by <a class="username"
            dir="auto">Groovyboy</a>, <a href="/threads/happy-hour-for-active-players.6685/"><span class="DateTime" title="Feb 4, 2015 at 8:59 PM">Feb 4,
                2015</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-64138" class="message" data-author="Groovyboy">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Groovyboy" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Groovyboy</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> The idea behind plugin is this: admin sets time (in his region or whatever, eg. 13-30), custom message, and makes
                        list of resources and items.<br /> So. Every day, 13-30 sharp, after custom message (eg. &quot;SERVER: Happy hours event launched&quot;) every active (not sleeping) player on
                        server will recieve those selected resources and items.<br /> I think it&#039;s not that hard to implement, except maybe &quot;auto-time&quot;, which i guess have to do with
                        cron, or maybe i am wrong. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Groovyboy</a>,</span>
                        <a href="/threads/happy-hour-for-active-players.6685/" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 4, 2015 at 8:59 PM">Feb 4, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/happy-hour-for-active-players.6685/" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/64138/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-64140" class="message" data-author="Bombardir">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Bombardir" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Bombardir</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Groovyboy">
                            <aside>
                                <div class="attribution type">Groovyboy said: <a href="#post-64138" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">The idea behind plugin is this: admin sets time (in his region or whatever, eg. 13-30), custom message, and makes list of resources and
                                        items.<br /> So. Every day, 13-30 sharp, after custom message (eg. &quot;SERVER: Happy hours event launched&quot;) every active (not sleeping) player on server
                                        will recieve those selected resources and items.<br /> I think it&#039;s not that hard to implement, except maybe &quot;auto-time&quot;, which i guess have to
                                        do with cron, or maybe i am wrong.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>i think it&#039;s very special plugin, not for public release <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Bombardir</a>,</span>
                        <a href="/threads/happy-hour-for-active-players.6685/#post-64140" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 4, 2015 at 9:05 PM">Feb 4, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/happy-hour-for-active-players.6685/#post-64140" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/64140/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-64143" class="message" data-author="Hatemail">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Hatemail" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Hatemail</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> So the goal would be to have people on at certain hours of the day to get items? Like bombardir said this sounds
                        more like something custom to be made and not something that would be wildly used. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Hatemail</a>,</span>
                        <a href="/threads/happy-hour-for-active-players.6685/#post-64143" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 4, 2015 at 9:36 PM">Feb 4, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/happy-hour-for-active-players.6685/#post-64143" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/64143/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-64251" class="message" data-author="RoosterMisfit">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="RoosterMisfit" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">RoosterMisfit</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> i dont get why you wouldnt release it anyways? if someone is browsing the plugins comes by it and might like it.
                        they could have never thought of the idea but now seeing it they like it. i myself kinda like it. i think i would use it for an event, if youre in the server by this time you
                        get this stuff <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">RoosterMisfit</a>,</span>
                        <a href="/threads/happy-hour-for-active-players.6685/#post-64251" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 5, 2015 at 4:38 PM">Feb 5, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/happy-hour-for-active-players.6685/#post-64251" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/64251/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-64273" class="message" data-author="Groovyboy">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Groovyboy" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Groovyboy</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Seems like i&#039;ll have to do it myself.. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Groovyboy</a>,</span>
                        <a href="/threads/happy-hour-for-active-players.6685/#post-64273" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 5, 2015 at 5:38 PM">Feb 5, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/happy-hour-for-active-players.6685/#post-64273" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/64273/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-64277" class="message" data-author="RoosterMisfit">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="RoosterMisfit" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">RoosterMisfit</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> i would totally help you but i have no idea on this stuff <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">RoosterMisfit</a>,</span>
                        <a href="/threads/happy-hour-for-active-players.6685/#post-64277" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 5, 2015 at 5:41 PM">Feb 5, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/happy-hour-for-active-players.6685/#post-64277" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/64277/permalink">#6</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-64304" class="message" data-author="Feramor">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Feramor" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Feramor</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Groovyboy">
                            <aside>
                                <div class="attribution type">Groovyboy said: <a href="#post-64273" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Seems like i&#039;ll have to do it myself..</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>I like the idea so I will make one and release soon <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Feramor</a>,</span>
                        <a href="/threads/happy-hour-for-active-players.6685/#post-64304" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 5, 2015 at 7:44 PM">Feb 5, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/happy-hour-for-active-players.6685/#post-64304" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/64304/permalink">#7</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-64311" class="message" data-author="RoosterMisfit">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="RoosterMisfit" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">RoosterMisfit</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> wooo! <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">RoosterMisfit</a>,</span>
                        <a href="/threads/happy-hour-for-active-players.6685/#post-64311" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 5, 2015 at 8:14 PM">Feb 5, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/happy-hour-for-active-players.6685/#post-64311" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/64311/permalink">#8</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-64313" class="message" data-author="Groovyboy">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Groovyboy" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Groovyboy</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> I already made some basic noob coding, so if anyone wants to join, pls visit this page tomorrow, i guess.
                        I&#039;ll put code here.<br /> [DOUBLEPOST=1423170413][/DOUBLEPOST]Here some bare stuff.. a lot of things in &quot;to do&quot; state. And some things just dont work.<br /> I
                        know there&#039;s a lot of noob stuff - it&#039;s my 1st plugin.<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>PLUGIN.Title = &quot;Happy Hours&quot;
PLUGIN.Description = &quot;Gives all players on server custom stuff at specific time&quot;
PLUGIN.Author = &quot;Groovyboy&quot;
PLUGIN.Version = V(0, 1, 2)
PLUGIN.HasConfig = truefunction PLUGIN:Init()
    print( &quot;Happy Hours activated&quot; )
    --timer
        self.Interval = tonumber(self.Config.Settings.checkInterval)
        -- Start delay timer
        self.DelayTimer = {}
        self.DelayTimer = timer.Repeat(self.Interval , 0 , function() self:GiveAwayStuff( ) end )
  
    --/hh.on turns hh active
    --/hh.off turns hh non-active
    --/hh.run manual override run of plugin
    --/hh.chat change chat message before giving presents out
    --/hh.check shows whether giveaway was or not
  
    --console (or server) commands
    command.AddConsoleCommand( &quot;hh.rnd&quot;, self.Object, &quot;GiveAwayManual&quot; )
    command.AddConsoleCommand( &quot;hh.giveon&quot;, self.Object, &quot;GiveOn&quot; )
    command.AddConsoleCommand( &quot;hh.activate&quot;, self.Object, &quot;GiveAwayActivate&quot; )
    command.AddConsoleCommand( &quot;hh.deactivate&quot;, self.Object, &quot;GiveAwayDeactivate&quot; )
    command.AddConsoleCommand( &quot;hh.settime&quot;, self.Object, &quot;GiveAwaySetTime&quot; )
  
endfunction PLUGIN:Unload()
    -- Stop delay timer on unload
    if self.DelayTimer then self.DelayTimer:Destroy() endendfunction PLUGIN:LoadDefaultConfig()
    self.Config.pluginActive = true
  
    self.Config.Settings = {}
    self.Config.Settings.ChatPrefix = &quot;AZbuka SERVER&quot;
    self.Config.Settings.checkInterval = 15
    self.Config.Settings.HappyHour = 23
    self.Config.Settings.giveAwayAvailable = true    self.Config.Messages = {
        forbidden = &quot;Вы не можете использовать эту комманду.&quot;,
        hh1 = &quot;Счастливые Часы настали, все игроки получают ресурсы.&quot;,
        hh2 = &quot;Заходите завтра в то же время и получите их вновь.&quot;,
        timeInfo = &quot;Начало Счастливых Часов с: {number}-00.&quot;,
        timeInfoSet = &quot;Вы установили начало выдачи ресурсов на: {number}-00.&quot;,
        hhrnd = &quot;Пришло время случайных подарков всем игрокам ;)&quot;
    }
end------------------------------------------
-- TIME STUFFlocal function CurrentHour()
    return time.GetCurrentTime():ToLocalTime():ToString(&quot;HH&quot;)
endlocal function CurrentMin()
    return time.GetCurrentTime():ToLocalTime():ToString(&quot;mm&quot;)
endfunction PLUGIN:GiveAwayDeactivate( )
    self.Config.pluginActive = false
    self:SaveConfig()
    print(&quot;HH auto giveaway deactivated&quot;)
endfunction PLUGIN:GiveAwayActivate( )
    self.Config.pluginActive = true
    self:SaveConfig()
    print(&quot;HH auto giveaway activated&quot;)
end-----------------------------------------
--getter setter of time
function PLUGIN:GiveAwaySetTime( player , args )
    --TODO chk for admin
  
    --inform (getter)
    if (args.Length == 0) then
        rust.SendChatMessage(player, self.Config.Settings.ChatPrefix, self:FormatString(self.Config.Messages.timeInfo, &quot;{number}&quot;, self.Config.Settings.HappyHour))
        return
    end
    --set (setter)
    local hhStartHour = tonumber(Args[0])
  
    if (not hhStartHour) then
        return
    end    self.Config.Settings.HappyHour = hhStartHour
    self:SaveConfig()
  
    rust.SendChatMessage(player, self.Config.Settings.ChatPrefix, self:FormatString(self.Config.Messages.timeInfoSet, &quot;{number}&quot;, hhStartHour))
    print(&quot;HH auto giveaway activated&quot;)
end------------------------------------------
--auto run when the time comes (timer)
function PLUGIN:GiveAwayStuff( player )
    if (not self.Config.pluginActive) then
        print(&quot;Scheduled giveaway skipped: pluginActive=false&quot;)
        return
    end
  
    local curH = tonumber(CurrentHour())
    local curM = tonumber(CurrentMin())
    local hhStart = tonumber(self.Config.Settings.HappyHour)
    local hhEnd = 0
    if hhStart == 23 then
        hhEnd = 0
    else
        hhEnd = hhStart + 1
    end    --if it's midnight then reset counter and make giveAway available again
    if curH &gt;= 0 and curH &lt; 1 then
        self.Config.Settings.giveAwayAvailable = true
        self:SaveConfig()
    elseif curH &gt;= hhStart and curH &lt; hhEnd and curM &lt; 59 and self.Config.Settings.giveAwayAvailable then
        print(&quot;Счастливые Часы настали, все игроки получают ресурсы&quot;)
        print(&quot;...выдача...&quot;)
        --rust.BroadcastChat(self.Config.Settings.ChatPrefix, self.Config.Messages.hh1 )
        --rust.BroadcastChat(self.Config.Settings.ChatPrefix, self.Config.Messages.hh2 )
        --player:SendConsoleCommand(&quot;inv.giveall \&quot;wood\&quot; 7500&quot;)
        --player:SendConsoleCommand(&quot;inv.giveall \&quot;stones\&quot; 3000&quot;)
        --player:SendConsoleCommand(&quot;inv.giveall \&quot;metal_ore\&quot; 1000&quot;)
        --player:SendConsoleCommand(&quot;inv.giveall \&quot;sulfur_ore\&quot; 1000&quot;)
        --player:SendConsoleCommand(&quot;inv.giveall \&quot;wolfmeat_raw\&quot; 5&quot;)
        self.Config.Settings.giveAwayAvailable = false
        self:SaveConfig()
    else
        print(&quot;not time to hh. start &quot;..hhStart)
        print(&quot;not time to hh. end &quot;..hhEnd)
        print(&quot;not time to hh. cur &quot;..curH)
    end
end----------------------------------------------
--Give away random resources on manual command
--ITEMS ARE HARDCODED, no cfg
function PLUGIN:GiveAwayManual( player )
    --TODO chk for admin
    --rust.BroadcastChat(self.Config.Settings.ChatPrefix, self.Config.Messages.hhrnd )
    print(&quot;Пришло время случайных подарков всем игрокам_TEST&quot;)
    local index = math.random(0,4)
    if index == 1 then
        print(&quot;syringe_medical 1, gunpowder 10, lock.code 1&quot;)
    --syringe_medical 1
    --gunpowder 10
    --lock.code 1
    elseif index == 2 then
        print(&quot;ammo_rifle 10, wolfmeat_cooked 2, jacket_snow3 1&quot;)
    --ammo_rifle 10
    --wolfmeat_cooked 2
    --jacket_snow3 1
    else
        print(&quot;largemedkit 1,lantern 1,trap_bear 1&quot;)
    --largemedkit 1
    --lantern 1
    --trap_bear 1
    end
        --rust.BroadcastChat(&quot;AZbuka SERVER&quot;, &quot;На сервере время случайных подарков ;)&quot; )
        --player:SendConsoleCommand(&quot;inv.giveall \&quot;metal_fragments\&quot; 100&quot;)
        --player:SendConsoleCommand(&quot;inv.giveall \&quot;sulfur\&quot; 500&quot;)
        --player:SendConsoleCommand(&quot;inv.giveall \&quot;charcoal\&quot; 500&quot;)
        --player:SendConsoleCommand(&quot;inv.giveall \&quot;wolfmeat_cooked\&quot; 4&quot;)
end
-- --------------------------------------
-- reset status of giveaway. for debug only
function PLUGIN:GiveOn( player )
    if (player.net.connection.authLevel == 0) then
        rust.SendChatMessage(player, self.Config.Settings.ChatPrefix, self.Config.Messages.forbidden)
        return
    end
  
    self.Config.Settings.giveAwayAvailable = true
    self:SaveConfig()
end-- -------------------------------------------------
function PLUGIN:FormatString(Text, Parameter, Value)
    return string.gsub(Text, Parameter, Value)
end
-- --------------------------------
-- admin permission check
-- --------------------------------
local function IsAdmin(player)
    return player:GetComponent(&quot;BaseNetworkable&quot;).net.connection.authLevel &gt; 0
end
</pre>
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="editDate"> Last edited by a moderator: <span class="DateTime" title="Feb 5, 2015 at 9:07 PM">Feb 5, 2015</span>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Groovyboy</a>,</span>
                        <a href="/threads/happy-hour-for-active-players.6685/#post-64313" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 5, 2015 at 8:19 PM">Feb 5, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/happy-hour-for-active-players.6685/#post-64313" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/64313/permalink">#9</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-64353" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <a href="http://oxidemod.org/resources/happy-hour.807/" class="internalLink">http://oxidemod.org/resources/happy-hour.807/</a>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="/threads/happy-hour-for-active-players.6685/#post-64353" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 5, 2015 at 11:04 PM">Feb 5, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/happy-hour-for-active-players.6685/#post-64353" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/64353/permalink">#10</a>
                </div>
            </div>
        </div>
    </li>
</ol>


                    <footer>
                        <div class="footer">
                            <div class="pageContent"></div>
                            <div id="copyright"><span class="concealed">Built: Wed, 27 Mar 2019 21:25:21 -0400</span></div>
                            <span class="helper"></span>
                            <ul class="footerLinks">
                                <li><a href="/terms/">Terms and Rules</a></li>
                                <li><a href="https://umod.org/community" target="_blank">Contact Us</a></li>
                            </ul>
                            <span class="helper"></span>
                        </div>
                    </footer>
                </div>
            </div>
        </div>
        <header>
            <div id="header">
                <div class="headerWidth">
                    <div id="logoBlock">
                        <div id="logo"><a href="/">
                                <span></span>
                                <img src="/assets/styles/oxide/logo.png" alt="Oxide" />
                            </a></div>
                        <span class="helper"></span>
                    </div>
                    <div id="navigation" class="">
                        <div class="pageContent">
                            <nav>
                                <div class="navTabs">
                                    <ul class="publicTabs">
                                        <li class="navTab forums Popup PopupControl PopupClosed PopupContainerControl">
                                            <a href="/" class="navLink" rel="Menu">Forums</a>
                                        </li>
                                        <li class="navTab PopupClosed">
                                            <a href="https://umod.org/documentation" class="navLink">Docs</a>
                                        </li>
                                        <li class="navTab Popup PopupControl PopupClosed PopupContainerControl">
                                            <a href="/downloads/" class="navLink" rel="Menu">Downloads</a>
                                        </li>
                                        <li class="navTab Popup PopupControl PopupClosed PopupContainerControl">
                                            <a href="/plugins/" class="navLink" rel="Menu">Plugins</a>
                                        </li>
                                        <li class="navTab selected">
                                            <div class="tabLinks"></div>
                                        </li>
                                    </ul>
                                </div>
                                <span class="helper"></span>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </header>
    </div>
    <script>
        jQuery.extend(true, XenForo, {
            visitor: {
                user_id: 0
            },
            serverTimeInfo: {
                now: 1548531785,
                today: 1548460800,
                todayDow: 6
            },
            _lightBoxUniversal: "0",
            _enableOverlays: "1",
            _animationSpeedMultiplier: "1",
            _overlayConfig: {
                top: "10%",
                speed: 200,
                closeSpeed: 100,
                mask: {
                    color: "rgb(255, 255, 255)",
                    opacity: "0.6",
                    loadSpeed: 200,
                    closeSpeed: 100
                }
            },
            _ignoredUsers: [],
            _loadedScripts: {
                "node_list": true,
                "node_category": true,
                "node_forum": true,
                "discussion_list": true,
                "wf_default": true
            },
            _cookieConfig: {
                path: "/",
                domain: ".oxidemod.org",
                prefix: "xfid_"
            },
            _jsVersion: "f33b43a2"
        });
        jQuery.extend(XenForo.phrases, {
            cancel: "Cancel",
            a_moment_ago: "A moment ago",
            one_minute_ago: "1 minute ago",
            x_minutes_ago: "%minutes% minutes ago",
            today_at_x: "Today at %time%",
            yesterday_at_x: "Yesterday at %time%",
            day_x_at_time_y: "%day% at %time%",
            day0: "Sunday",
            day1: "Monday",
            day2: "Tuesday",
            day3: "Wednesday",
            day4: "Thursday",
            day5: "Friday",
            day6: "Saturday",
            _months: "January,February,March,April,May,June,July,August,September,October,November,December",
            _daysShort: "Sun,Mon,Tue,Wed,Thu,Fri,Sat",
            following_error_occurred: "The following error occurred",
            server_did_not_respond_in_time_try_again: "The server did not respond in time. Please try again.",
            logging_in: "Logging in",
            click_image_show_full_size_version: "Click this image to show the full-size version.",
            show_hidden_content_by_x: "Show hidden content by {names}"
        });
    </script>
</body>
</html>
