<!DOCTYPE html>
<html id="XenForo" lang="en-US" dir="LTR" class="Public NoJs LoggedOut NoSidebar  Responsive" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>

	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
	
		<meta name="viewport" content="width=device-width, initial-scale=1" />
	
	
		<base href="https://oxidemod.org/" />
		<script>
			var _b = document.getElementsByTagName('base')[0], _bH = "https://oxidemod.org/";
			if (_b && _b.href != _bH) _b.href = _bH;
		</script>
	

	<title>How to work around not having lock/ReaderWriterLockSlim? | Oxide</title>
	
	<noscript><style>.JsOnly, .jsOnly { display: none !important; }</style></noscript>
	<link rel="stylesheet" href="css.php?css=xenforo,form,public&amp;style=5&amp;dir=LTR&amp;d=1548698830" />
	<link rel="stylesheet" href="css.php?css=bb_code,message,message_user_info,thread_view&amp;style=5&amp;dir=LTR&amp;d=1548698830" />
	
	

	
		<script src="js/jquery/jquery-1.11.0.min.js"></script>	
		
	<script src="js/xenforo/xenforo.js?_v=f33b43a2"></script>

	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
	<meta name="mobile-web-app-capable" content="yes" />
<link rel="icon" sizes="196x196" href="https://oxidemod.org/styles/oxide/logo.og.png" />
<link rel="apple-touch-icon" href="https://oxidemod.org/styles/oxide/logo.og.png" />
	<link rel="alternate" type="application/rss+xml" title="RSS feed for Oxide" href="forums/-/index.rss" />
		
	
	<link rel="canonical" href="https://oxidemod.org/threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/" />
	<meta name="description" content="So some time ago I wanted to write a small plugin for a server that would have a global Dictionary. My problem was and is that Hooks in Oxide are,..." />	<meta property="og:site_name" content="Oxide" />
	<meta property="og:image" content="https://oxidemod.org/styles/default/xenforo/avatars/avatar_m.png" />
	<meta property="og:image" content="https://oxidemod.org/styles/oxide/logo.og.png" />
	<meta property="og:type" content="article" />
	<meta property="og:url" content="https://oxidemod.org/threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/" />
	<meta property="og:title" content="How to work around not having lock/ReaderWriterLockSlim?" />
	<meta property="og:description" content="So some time ago I wanted to write a small plugin for a server that would have a global Dictionary. My problem was and is that Hooks in Oxide are,..." />
	
	
	

</head>

<body class="node4 node1 node104 node105 SelectQuotable">




<div id="headerMover">
	<div id="headerProxy"></div>

<div id="content" class="thread_view">
	<div class="pageWidth">
		<div class="pageContent">
			
			
			

			

			
			
				<div class="breadBoxTop ">
					
					

<nav>
	
		
			
				
			
		
			
				
			
		
			
				
			
		
			
				
			
		
	

	<fieldset class="breadcrumb">			
		<div class="boardTitle"><strong>Oxide</strong></div>
		
		<span class="crumbs">
			
				

					
						<span class="crust selectedTabCrumb" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
							<a href="https://oxidemod.org/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Forums</span></a>
							<span class="arrow"><span>&gt;</span></span>
						</span>
					

					
						
							<span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
								<a href="https://oxidemod.org/#oxide-project.1" class="crumb" rel="up" itemprop="url"><span itemprop="title">Oxide Project</span></a>
								<span class="arrow"><span>&gt;</span></span>
							</span>
						
							<span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
								<a href="https://oxidemod.org/categories/archive.104/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Archive</span></a>
								<span class="arrow"><span>&gt;</span></span>
							</span>
						
							<span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
								<a href="https://oxidemod.org/categories/plugin-development.105/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Plugin Development</span></a>
								<span class="arrow"><span>&gt;</span></span>
							</span>
						
							<span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
								<a href="https://oxidemod.org/forums/rust-development.4/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Rust Development</span></a>
								<span class="arrow"><span>&gt;</span></span>
							</span>
						
					
				
			
		</span>
	</fieldset>
</nav>
				</div>
			
			
	
			



			
				

						
			
			
			
						
						
													
								<!-- h1 title, description -->
								<div class="titleBar">
									
									<h1>
										
											
												<a href="https://oxidemod.org/threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/">How to work around not having lock/ReaderWriterLockSlim?</a>
											
										
									</h1>

									<p id="pageDescription" class="muted ">
	Discussion in '<a href="forums/rust-development.4/">Rust Development</a>' started by <a class="username" dir="auto">Commander Strax</a>, <a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/"><span class="DateTime" title="Mar 11, 2018 at 11:16 AM">Mar 11, 2018</span></a>.
</p>
								</div>
							
						
						
						
						

						

	

























	




<div class="pageNavLinkGroup">
	<div class="linkGroup SelectionCountContainer">
		
		
	</div>

	
</div>






<form action="inline-mod/post/switch" method="post"
	class="InlineModForm section"
	data-cookieName="posts"
	data-controls="#InlineModControls"
	data-imodOptions="#ModerationSelect option">

	<ol class="messageList" id="messageList">
		
			
				


<li id="post-390876" class="message   " data-author="Commander Strax">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Commander Strax" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Commander Strax</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					So some time ago I wanted to write a small plugin for a server that would have a global Dictionary. My problem was and is that Hooks in Oxide are, expectedly, called in an asynchronous/multithreaded kind of way. To still be able to write/add keys to a Dictionary one would usually use a lock or a static ReaderWriterLockSlim so that access is synchronized across multiple threads.<br />
<br />
Problem is this: <a href="https://github.com/OxideMod/Oxide.CSharp/issues/8" target="_blank" class="externalLink  rel="nofollow">Oxide throws UnauthorizedAccessException when using lock or ReaderWriterLockSlim  · Issue #8 · OxideMod/Oxide.CSharp · GitHub</a><br />
<br />
And I don&#039;t understand how the developer expects someone to work around this. I also have not found that omnious whitelist.<br />
<br />
I would also like to know how blocking access to those two functions is helping with Sandboxing. I guess I never took a look at these two from a security POV.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Commander Strax</a>,</span>
					<a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 11, 2018 at 11:16 AM">Mar 11, 2018</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/390876/permalink">#1</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-390880" class="message   " data-author="VVoid">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="VVoid" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">VVoid</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					I think you totally misunderstood how Rust/Unity works.<br />
There&#039;s actually no multithreading nor asynchronous hooks.<br />
<br />
It looks like you went on &quot;premature optimization&quot; way.<br />
What&#039;s your reason for use locks, are you encountered a race condition?<br />
I would be interested in looking at such code.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
			<div class="editDate">
			
				Last edited by a moderator: <span class="DateTime" title="Mar 11, 2018 at 11:58 AM">Mar 11, 2018</span>
			
			</div>
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">VVoid</a>,</span>
					<a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/#post-390880" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 11, 2018 at 11:49 AM">Mar 11, 2018</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/#post-390880" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/390880/permalink">#2</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-390883" class="message   " data-author="Commander Strax">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Commander Strax" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Commander Strax</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>using System;
using System.Collections.Generic;
using Oxide.Core;
using System.Threading;

namespace Oxide.Plugins
{
    [Info(&quot;Tester&quot;, &quot;CommanderStrax&quot;, 0.2)]
    [Description(&quot;Multithread/Async test!&quot;)]
    class Blamer : RustPlugin
    {
        static Blamer instance;

        void Init()
        {
        }

        void Loaded()
        {
            instance = this;
        }

        int a;
        static int b;
        bool CanLootPlayer(BasePlayer target, BasePlayer looter)
        {
            a++;
            b++;
            Puts(&quot;A:&quot; + a);
            Puts(&quot;B:&quot; + b);
            Puts(&quot;InstanceA&quot; + instance.a);
            return true;

        }
}
}</pre>
</div>A server admin executed that for me and a few people opened &#039;bodies&#039; of sleeping people. The output was completely jumbled up (as in: A: 1 B:1 A:2 InstanceA:1 B:2) that can, from my knowledge, only be explained by multithreading/async calls.<br />
<br />
Oh...I didn&#039;t think about that: Obviously it could, in theory, also mean that the Puts function is async.<br />
<br />
Curiously I never had exceptions like &#039;The collection was changed while iterating over it&#039; even though that should have plopped up.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
			<div class="editDate">
			
				Last edited by a moderator: <span class="DateTime" title="Mar 11, 2018 at 12:38 PM">Mar 11, 2018</span>
			
			</div>
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Commander Strax</a>,</span>
					<a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/#post-390883" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 11, 2018 at 12:31 PM">Mar 11, 2018</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/#post-390883" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/390883/permalink">#3</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-390884" class="message  staff " data-author="Wulf">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto" itemprop="name">Wulf</a>
			<em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="Commander Strax">
	<aside>
		
			<div class="attribution type">Commander Strax said:
				
					<a href="goto/post?id=390883#post-390883" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">

<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>using System;
using System.Collections.Generic;
using Oxide.Core;
using System.Threading;

namespace Oxide.Plugins
{
    [Info(&quot;Tester&quot;, &quot;CommanderStrax&quot;, 0.2)]
    [Description(&quot;Multithread/Async test!&quot;)]
    class Blamer : RustPlugin
    {
        static Blamer instance;

        void Init()
        {
        }

        void Loaded()
        {
            instance = this;
        }

        int a;
        static int b;
        bool CanLootPlayer(BasePlayer target, BasePlayer looter)
        {
            a++;
            b++;
            Puts(&quot;A:&quot; + a);
            Puts(&quot;B:&quot; + b);
            Puts(&quot;InstanceA&quot; + instance.a);
            return true;

        }
}
}</pre>
</div>A server admin executed that for me and a few people opened &#039;bodies&#039; of sleeping people. The output was completely jumbled up (as in: A: 1 B:1 A:2 InstanceA:1 B:2) that can, from my knowledge, only be explained by multithreading/async calls.<br />
<br />
Oh...I didn&#039;t think about that: Obviously it could, in theory, also mean that the Puts function is async.<br />
<br />
Curiously I never had exceptions like &#039;The collection was changed while iterating over it&#039; even though that should have plopped up.</div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>Everything is generally in a single thread, this includes the console. Oxide hooks are called when the game calls them, there is no threading or hanged being made. You do have to be very careful when trying to use threading though, as it is easy to corrupt things when more than one plugin would be trying to access the same thing.<br />
<br />
Your issue is because you can’t iterate over something and also modify it. Instead, store the list in a variable and iterate over that, then store the new values. This isn’t really unique to Oxide. Just generally what you have to do.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
					<a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/#post-390884" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 11, 2018 at 1:37 PM">Mar 11, 2018</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/#post-390884" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/390884/permalink">#4</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-390885" class="message   " data-author="Commander Strax">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Commander Strax" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Commander Strax</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<a href="https://oxidemod.org/members/1115/" class="username" data-user="1115, @Wulf">@Wulf</a> you are talking about doing something like changing a collection while iterating over it which I&#039;m not doing. Not in the sample code and not in my &#039;real&#039; code.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Commander Strax</a>,</span>
					<a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/#post-390885" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 11, 2018 at 1:41 PM">Mar 11, 2018</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/#post-390885" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/390885/permalink">#5</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-390886" class="message  staff " data-author="Wulf">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto" itemprop="name">Wulf</a>
			<em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="Commander Strax">
	<aside>
		
			<div class="attribution type">Commander Strax said:
				
					<a href="goto/post?id=390885#post-390885" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote"><a href="https://oxidemod.org/members/1115/" class="username" data-user="1115, @Wulf">@Wulf</a> you are talking about doing something like changing a collection while iterating over it which I&#039;m not doing. Not in the sample code and not in my &#039;real&#039; code.</div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>You mentioned storing the sleepers; that would be the iterating over something. That list changes, so it needs to be stored as a list or in a variable as the values will change otherwise as players may wake and such.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
					<a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/#post-390886" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 11, 2018 at 1:44 PM">Mar 11, 2018</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/#post-390886" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/390886/permalink">#6</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-390893" class="message   " data-author="Commander Strax">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Commander Strax" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Commander Strax</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<a href="https://oxidemod.org/members/1115/" class="username" data-user="1115, @Wulf">@Wulf</a> ah, sorry. I misunderstood you. Yes that could happen which is one of two reasons why I wanted to use lock/ReaderWriterLockSlim.<br />
<br />
Also I&#039;m a bit confused by<br />



<div class="bbCodeBlock bbCodeQuote">
	<aside>
		
		<blockquote class="quoteContainer"><div class="quote">Everything is generally in a single thread, this includes the console.</div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>and<br />
<br />



<div class="bbCodeBlock bbCodeQuote">
	<aside>
		
		<blockquote class="quoteContainer"><div class="quote">That list changes, so it needs to be stored as a list or in a variable as the values will change otherwise as players may wake and such.</div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>To me those two things contradict eachother and I&#039;m trying to understand what is going on. Are the hooks triggered asynchronously/put in tasks?
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Commander Strax</a>,</span>
					<a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/#post-390893" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 11, 2018 at 2:30 PM">Mar 11, 2018</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/#post-390893" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/390893/permalink">#7</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-391504" class="message   " data-author="Commander Strax">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Commander Strax" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Commander Strax</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					I have to apologize for my not-so-nice way of phrasing things above. I also am obviously in the wrong here as I have read up a bit on Unity and it&#039;s single-threadedness.<br />
<br />
However, I&#039;m still confused about the output and the original problems I had. So my final question still stands: When a hook function in a C# script is called by Oxide, does Oxide wait for that method to return (synchronous) or does it proceed to call other hooks(asynchronous)?
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Commander Strax</a>,</span>
					<a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/#post-391504" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 15, 2018 at 9:26 PM">Mar 15, 2018</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/#post-391504" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/391504/permalink">#8</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-391505" class="message  staff " data-author="Wulf">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto" itemprop="name">Wulf</a>
			<em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="Commander Strax">
	<aside>
		
			<div class="attribution type">Commander Strax said:
				
					<a href="goto/post?id=391504#post-391504" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">I have to apologize for my not-so-nice way of phrasing things above. I also am obviously in the wrong here as I have read up a bit on Unity and it&#039;s single-threadedness.<br />
<br />
However, I&#039;m still confused about the output and the original problems I had. So my final question still stands: When a hook function in a C# script is called by Oxide, does Oxide wait for that method to return (synchronous) or does it proceed to call other hooks(asynchronous)?</div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>A hook is called when the game hits that spot where it is located. Oxide calls all plugins that are using that hook and each plugin processes whatever is in that hook in the plugin. There is no waiting. If the hook is called again, then it will go through the same process and may even have overlap if for some reason your code is being slow.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
					<a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/#post-391505" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 15, 2018 at 9:28 PM">Mar 15, 2018</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/#post-391505" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/391505/permalink">#9</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-391506" class="message   " data-author="Commander Strax">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Commander Strax" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Commander Strax</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<a href="https://oxidemod.org/members/1115/" class="username" data-user="1115, @Wulf">@Wulf</a> thank you for answering so quickly and also (sort of) confirming the async part (at least to me that is async behaviour). How would I go about having a global Dictionary&lt;uint, string&gt; where I want to save the ID of the player that did something and a message, consisting among other things out of a date and time? Usually I would use lock for that...
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Commander Strax</a>,</span>
					<a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/#post-391506" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 15, 2018 at 9:33 PM">Mar 15, 2018</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/#post-391506" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/391506/permalink">#10</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-391516" class="message  staff " data-author="Wulf">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto" itemprop="name">Wulf</a>
			<em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="Commander Strax">
	<aside>
		
			<div class="attribution type">Commander Strax said:
				
					<a href="goto/post?id=391506#post-391506" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote"><a href="https://oxidemod.org/members/1115/" class="username" data-user="1115, @Wulf">@Wulf</a> thank you for answering so quickly and also (sort of) confirming the async part (at least to me that is async behaviour). How would I go about having a global Dictionary&lt;uint, string&gt; where I want to save the ID of the player that did something and a message, consisting among other things out of a date and time? Usually I would use lock for that...</div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>Just as you normally would with C#, there isn&#039;t anything unique about it. The only issue/error you posted previous was related to using a list from Rust that changed while you were looping it; which you can resolve using the method I posted previously.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
					<a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/#post-391516" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 15, 2018 at 10:22 PM">Mar 15, 2018</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/how-to-work-around-not-having-lock-readerwriterlockslim.29851/#post-391516" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/391516/permalink">#11</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
		
	</ol>

	

	

</form>


	<div class="pageNavLinkGroup">
		
			
				<div class="linkGroup">
					
				</div>
			
			<div class="linkGroup" style="display: none"><a href="javascript:" class="muted JsOnly DisplayIgnoredContent Tooltip" title="Show hidden content by ">Show Ignored Content</a></div>

			
		
	</div>












	


												
												
					
			
						
			
						
			


			<footer>
				


<div class="footer">
		<div class="pageContent">
			
            
            
            </div>
			
		
			
			
			<span class="helper"></span>
			<ul class="footerLinks">
			
				
				<li><a href="https://oxidemod.org/terms/">Terms and Rules</a></li>
				
				
				<li><a href="https://umod.org/community" target="_blank">Contact Us</a></li>
			
			</ul>
			
			<span class="helper"></span>
		</div>
</div>

			</footer>
		</div>
	</div>
</div>

<header>
	


<div id="header">
	<div class="headerWidth">
		<div id="logoBlock">
			
			
			<div id="logo"><a href="https://oxidemod.org/">
				<span></span>
				<img src="styles/oxide/logo.png" alt="Oxide" />
			</a></div>
			
			
			<span class="helper"></span>

</div>
		


<div id="navigation" class="">
	<div class="pageContent">
		<nav>
			<div class="navTabs">
				<ul class="publicTabs">

					
					

					
					

					
					
						<li class="navTab forums Popup PopupControl PopupClosed PopupContainerControl">
							<a href="https://oxidemod.org/" class="navLink" rel="Menu">Forums</a>

							
						</li>
					

					<li class="navTab PopupClosed">
	<a href="https://umod.org/documentation" class="navLink">Docs</a>
</li>


					
					
						
							<li class="navTab Popup PopupControl PopupClosed PopupContainerControl">

							<a href="https://oxidemod.org/downloads/" class="navLink" rel="Menu"> Downloads </a>

							
						</li>
						
					
						
							<li class="navTab Popup PopupControl PopupClosed PopupContainerControl">

							<a href="https://oxidemod.org/plugins/" class="navLink" rel="Menu"> Plugins </a>

							
						</li>
						
					
					

					
					

					
					

					
					<li class="navTab selected"><div class="tabLinks"></div></li>
				</ul>

				
				
			</div>

			<span class="helper"></span>
		</nav>
	</div>
</div>
	</div>
</div>

	
	
</header>

</div>

<script>


jQuery.extend(true, XenForo,
{
	visitor: { user_id: 0 },
	serverTimeInfo:
	{
		now: 1548712731,
		today: 1548633600,
		todayDow: 1
	},
	_lightBoxUniversal: "0",
	_enableOverlays: "1",
	_animationSpeedMultiplier: "1",
	_overlayConfig:
	{
		top: "10%",
		speed: 200,
		closeSpeed: 100,
		mask:
		{
			color: "rgb(255, 255, 255)",
			opacity: "0.6",
			loadSpeed: 200,
			closeSpeed: 100
		}
	},
	_ignoredUsers: [],
	_loadedScripts: {"thread_view":true,"message":true,"bb_code":true,"message_user_info":true},
	_cookieConfig: { path: "/", domain: ".oxidemod.org", prefix: "ih_xfid_"},
	_csrfToken: "",
	_csrfRefreshUrl: "login/csrf-token-refresh",
	_jsVersion: "f33b43a2"
});
jQuery.extend(XenForo.phrases,
{
	cancel: "Cancel",

	a_moment_ago:    "A moment ago",
	one_minute_ago:  "1 minute ago",
	x_minutes_ago:   "%minutes% minutes ago",
	today_at_x:      "Today at %time%",
	yesterday_at_x:  "Yesterday at %time%",
	day_x_at_time_y: "%day% at %time%",

	day0: "Sunday",
	day1: "Monday",
	day2: "Tuesday",
	day3: "Wednesday",
	day4: "Thursday",
	day5: "Friday",
	day6: "Saturday",

	_months: "January,February,March,April,May,June,July,August,September,October,November,December",
	_daysShort: "Sun,Mon,Tue,Wed,Thu,Fri,Sat",

	following_error_occurred: "The following error occurred",
	server_did_not_respond_in_time_try_again: "The server did not respond in time. Please try again.",
	logging_in: "Logging in",
	click_image_show_full_size_version: "Click this image to show the full-size version.",
	show_hidden_content_by_x: "Show hidden content by {names}"
});




</script>




</body>
</html>