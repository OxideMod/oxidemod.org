<!DOCTYPE html>
<html lang="en-US" dir="LTR" class="Public NoJs LoggedOut NoSidebar Responsive">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <base href="" />
    <title>Oxide - Request - Prepared statements for MySQL</title>
    <noscript>
        <style>
            .JsOnly,
            .jsOnly {
                display: none !important;
            }
        </style>
    </noscript>
    <script src="/assets/js/jquery/jquery-1.11.0.min.js"></script>
    <script src="/assets/js/xenforo/xenforo.js?_v=f33b43a2"></script>
    <link rel="canonical" href="" />
    <link rel="stylesheet" href="/assets/default.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" />
    <link rel="icon" sizes="196x196" href="/assets/styles/oxide/logo.og.png" />
    <link rel="apple-touch-icon" href="/assets/styles/oxide/logo.og.png" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="description" content="Oxide is an abstracted, modular, and extensible mod and plugin framework for any game that uses .NET" />
    <meta property="og:site_name" content="Oxide" />
    <meta property="og:image" content="/assets/styles/oxide/logo.og.png" />
    <meta property="og:url" content="" />
    <meta property="og:title" content="Oxide - Request - Prepared statements for MySQL" />
    <meta property="og:description" content="" />
</head>
<body>
    <div id="headerMover">
        <div id="headerProxy"></div>
        <div id="content" class="forum_list">
            <div class="pageWidth">
                <div class="pageContent">
                    <div class="breadBoxTop">
    <nav>
        <fieldset class="breadcrumb">
            <div class="boardTitle"><strong>Oxide</strong></div>
            <span class="crumbs">
                <span class="crust">
                    <a href="/" class="crumb" rel="up" itemprop="url">
                        <span itemprop="title">Forums</span>
                    </a>
                    <span class="arrow"></span>
                </span>
                
                    
                    <span class="crust">
                        <a href="/forums/feature-suggestions.6/" class="crumb" rel="up" itemprop="url">
                            <span itemprop="title">Feature Suggestions</span>
                        </a>
                        <span class="arrow"></span>
                    </span>
                    
                
            </span>
        </fieldset>
    </nav>
</div>

<div class="titleBar">
    <h1>
        <span class="prefix prefixOrange">Request</span> <a href="/threads/prepared-statements-for-mysql.19104/">Prepared statements for MySQL</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="/forums/feature-suggestions.6/">Feature Suggestions</a>' started by <a class="username"
            dir="auto">Caffeine</a>, <a href="/threads/prepared-statements-for-mysql.19104/"><span class="DateTime" title="Jul 1, 2016 at 11:46 AM">Jul 1,
                2016</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-221156" class="message" data-author="Caffeine">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Caffeine" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Caffeine</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Can you please consider adding prepared statements to this as it would help with security and most importantly
                        speed on repeated queries <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Caffeine</a>,</span>
                        <a href="/threads/prepared-statements-for-mysql.19104/" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 1, 2016 at 11:46 AM">Jul 1, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/prepared-statements-for-mysql.19104/" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/221156/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-221166" class="message" data-author="PreFiX">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="PreFiX" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">PreFiX</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Caffeine">
                            <aside>
                                <div class="attribution type">Caffeine said: <a href="#post-221156" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Can you please consider adding prepared statements to this as it would help with security and most importantly speed on repeated queries</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Try this:<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>
        string MysqlEscape(string usString)
        {
            if (usString == null)
            {
                return null;
            }
            // SQL Encoding for MySQL Recommended here:
            // http://au.php.net/manual/en/function.mysql-real-escape-string.php
            // it escapes \r, \n, \x00, \x1a, baskslash, single quotes, and double quotes
            return Regex.Replace(usString, @&quot;[\r\n\x00\x1a\\'&quot;&quot;]&quot;, @&quot;\$0&quot;);
        }
</pre>
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">PreFiX</a>,</span>
                        <a href="/threads/prepared-statements-for-mysql.19104/#post-221166" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 1, 2016 at 12:56 PM">Jul 1, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/prepared-statements-for-mysql.19104/#post-221166" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/221166/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-221167" class="message" data-author="Caffeine">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Caffeine" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Caffeine</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="PreFiX">
                            <aside>
                                <div class="attribution type">PreFiX said: <a href="#post-221166" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Try this:<br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            <pre>
        string MysqlEscape(string usString)
        {
            if (usString == null)
            {
                return null;
            }
            // SQL Encoding for MySQL Recommended here:
            // http://au.php.net/manual/en/function.mysql-real-escape-string.php
            // it escapes \r, \n, \x00, \x1a, baskslash, single quotes, and double quotes
            return Regex.Replace(usString, @&quot;[\r\n\x00\x1a\\'&quot;&quot;]&quot;, @&quot;\$0&quot;);
        }
</pre>
                                        </div>
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Thanks but escaping has been a security disaster for PHP for years, seeing as though it&#039;s client side instead of server, only when prepared statements were
                        implemented did things get a lot better. Granted escaping is better than nothing but in terms of personal use my real desire for prepared statements is for the speed, for
                        instance when I have my server shutdown I want to save all data I have in my plugins memory to MySQL. Using transactions helps a lot since it disables disk writing for every
                        insert, but that with prepared statements would be even faster, since the query wouldn&#039;t have to keep getting compiled server side, only the variables updated <img
                            src="styles/default/xenforo/clear.png" class="mceSmilieSprite mceSmilie1" alt=":)" title="Smile    :)" />
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Caffeine</a>,</span>
                        <a href="/threads/prepared-statements-for-mysql.19104/#post-221167" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 1, 2016 at 1:00 PM">Jul 1, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/prepared-statements-for-mysql.19104/#post-221167" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/221167/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-221231" class="message" data-author="sqroot">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="sqroot" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">sqroot</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <a href="http://oxidemod.org/threads/preventing-sql-injections.17789/" class="internalLink">Preventing SQL injections | Oxide</a><br /> Also, do <b>not </b>rely on server
                        shutdown hooks being properly called, many people shut down their servers via CTRL+C. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">sqroot</a>,</span>
                        <a href="/threads/prepared-statements-for-mysql.19104/#post-221231" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 1, 2016 at 3:04 PM">Jul 1, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/prepared-statements-for-mysql.19104/#post-221231" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/221231/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-221236" class="message" data-author="Caffeine">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Caffeine" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Caffeine</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="sqroot">
                            <aside>
                                <div class="attribution type">sqroot said: <a href="#post-221231" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote"><a href="http://oxidemod.org/threads/preventing-sql-injections.17789/" class="internalLink">Preventing SQL injections | Oxide</a><br /> Also, do
                                        <b>not </b>rely on server shutdown hooks being properly called, many people shut down their servers via CTRL+C.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Thanks for the link, but still doesn&#039;t address the speed benefit that prepared statements would provide. Also thanks for the shutdown advice, i&#039;m writing
                        plugins for a server I run so i&#039;ll make sure they&#039;re called properly. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Caffeine</a>,</span>
                        <a href="/threads/prepared-statements-for-mysql.19104/#post-221236" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 1, 2016 at 3:32 PM">Jul 1, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/prepared-statements-for-mysql.19104/#post-221236" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/221236/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-221239" class="message" data-author="sqroot">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="sqroot" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">sqroot</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Caffeine">
                            <aside>
                                <div class="attribution type">Caffeine said: <a href="#post-221236" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Thanks for the link, but still doesn&#039;t address the speed benefit that prepared statements would provide. Also thanks for the shutdown
                                        advice, i&#039;m writing plugins for a server I run so i&#039;ll make sure they&#039;re called properly.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Prepared statements do not yield much of a speed benefit, that is a common misconception. The main bottleneck is the network connection / the HDD, which is multiple
                        orders of magnitude slower than parsing the query.<br /> If you&#039;re looking to fire multiple queries at once (which would likely only yield a minor benefit by reducing
                        handshake overhead in the case of network connections and allowing better continuous writing to HDDs) then you can just append multiple queries to the query object provided by
                        mysql.New(). <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">sqroot</a>,</span>
                        <a href="/threads/prepared-statements-for-mysql.19104/#post-221239" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 1, 2016 at 3:41 PM">Jul 1, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/prepared-statements-for-mysql.19104/#post-221239" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/221239/permalink">#6</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-221242" class="message" data-author="Caffeine">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Caffeine" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Caffeine</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="sqroot">
                            <aside>
                                <div class="attribution type">sqroot said: <a href="#post-221239" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Prepared statements do not yield much of a speed benefit, that is a common misconception. The main bottleneck is the network connection / the
                                        HDD, which is multiple orders of magnitude slower than parsing the query.<br /> If you&#039;re looking to fire multiple queries at once (which would likely only
                                        yield a minor benefit by reducing handshake overhead in the case of network connections and allowing better continuous writing to HDDs) then you can just append
                                        multiple queries to the query object provided by mysql.New().</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>I have a lot of MySQL experience, while transactions provide the most massive speed gains, prepared statements absolutely contribute to speed ups especially for
                        long/complex queries. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Caffeine</a>,</span>
                        <a href="/threads/prepared-statements-for-mysql.19104/#post-221242" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 1, 2016 at 3:44 PM">Jul 1, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/prepared-statements-for-mysql.19104/#post-221242" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/221242/permalink">#7</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-221247" class="message" data-author="sqroot">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="sqroot" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">sqroot</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> EDIT: My argument was moot.<br /> I think in the future it&#039;d probably be useful when more plugins actually
                        operate at a scale where prepared statement make a notable performance difference. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="editDate"> Last edited by a moderator: <span class="DateTime" title="Jul 1, 2016 at 4:15 PM">Jul 1, 2016</span>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">sqroot</a>,</span>
                        <a href="/threads/prepared-statements-for-mysql.19104/#post-221247" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 1, 2016 at 3:58 PM">Jul 1, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/prepared-statements-for-mysql.19104/#post-221247" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/221247/permalink">#8</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-221252" class="message" data-author="Caffeine">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Caffeine" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Caffeine</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="sqroot">
                            <aside>
                                <div class="attribution type">sqroot said: <a href="#post-221247" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">EDIT: My argument was moot.<br /> I think in the future it&#039;d probably be useful when more plugins actually operate at a scale where prepared
                                        statement make a notable performance difference.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>There&#039;s a lot of scenarios now when it would be useful, anything in large quantities for instance say you wanted to save information about all entities every few
                        seconds/minutes to the database, for stats/tracking or other purposes. Some populated servers can have 100&#039;s of thousands of entities...so prepared statements would
                        definitely help in massive insert/updates as that&#039;s say 200k less times the server has to compile your query (assuming no caching) and just set the params. <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Caffeine</a>,</span>
                        <a href="/threads/prepared-statements-for-mysql.19104/#post-221252" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 1, 2016 at 4:27 PM">Jul 1, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/prepared-statements-for-mysql.19104/#post-221252" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/221252/permalink">#9</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-221257" class="message" data-author="sqroot">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="sqroot" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">sqroot</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Caffeine">
                            <aside>
                                <div class="attribution type">Caffeine said: <a href="#post-221252" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">There&#039;s a lot of scenarios now when it would be useful, anything in large quantities for instance say you wanted to save information about
                                        all entities every few seconds/minutes to the database, for stats/tracking or other purposes. Some populated servers can have 100&#039;s of thousands of
                                        entities...so prepared statements would definitely help in massive insert/updates as that&#039;s say 200k less times the server has to compile your query
                                        (assuming no caching) and just set the params.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Running 200k queries at once will probably be a bad idea either way, even with prepared statements, because whatever computation you&#039;re running on the main thread
                        for each of those entities will block the main thread for a good while. There&#039;s a Rust command which counts entities, and on big servers it halts the server for up to a
                        minute or two.<br /> There&#039;s certainly a scale sweet spot where it&#039;s useful, though. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">sqroot</a>,</span>
                        <a href="/threads/prepared-statements-for-mysql.19104/#post-221257" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 1, 2016 at 4:44 PM">Jul 1, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/prepared-statements-for-mysql.19104/#post-221257" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/221257/permalink">#10</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-221474" class="message" data-author="PreFiX">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="PreFiX" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">PreFiX</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> MySQL on Oxide is also broken that you can&#039;t use like anymore<br /> IEnumerable&lt;Dictionary&lt;string,
                        object&gt;&gt; res = _mySql.Query(sql, connection);<br /> You now need to use some freaking callback who is pain in ass for everyone can&#039;t really work properly with plugin
                        developing. You can&#039;t return anything from mysql (Like IEnumerable&lt;Dictionary&lt;string, object&gt;&gt; GetPlayerInfo(ulong playerid) ) only to get and use it on local
                        function and insert/update stuff. <b>For this very reason Player Database mysql support was broken.</b>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="editDate"> Last edited by a moderator: <span class="DateTime" title="Jul 2, 2016 at 9:39 AM">Jul 2, 2016</span>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">PreFiX</a>,</span>
                        <a href="/threads/prepared-statements-for-mysql.19104/#post-221474" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 2, 2016 at 9:29 AM">Jul 2, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/prepared-statements-for-mysql.19104/#post-221474" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/221474/permalink">#11</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-221508" class="message" data-author="Caffeine">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Caffeine" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Caffeine</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="PreFiX">
                            <aside>
                                <div class="attribution type">PreFiX said: <a href="#post-221474" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">MySQL on Oxide is also broken that you can&#039;t use like anymore<br /> IEnumerable&lt;Dictionary&lt;string, object&gt;&gt; res =
                                        _mySql.Query(sql, connection);<br /> You now need to use some freaking callback who is pain in ass for everyone can&#039;t really work properly with plugin
                                        developing. You can&#039;t return anything from mysql (Like IEnumerable&lt;Dictionary&lt;string, object&gt;&gt; GetPlayerInfo(ulong playerid) ) only to get and
                                        use it on local function and insert/update stuff. <b>For this very reason Player Database mysql support was broken.</b></div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Yeah that caught me off guard too, code written after my MySQL query code was being called first due to the callback delay/workflow change messing things up. I&#039;m
                        still using MySQL in my plugin I just use it carefully. It would be nice if they added synchronous (blocking) support back though, even Node.js(Javascript) which is all about
                        callback+events and single threads supports synchronous. How I currently use this though is when my plugin loads I pull relevant data from the database and store it in memory
                        and same when a player connects. Then I just manipulate the data purely in memory and store it in the database only when the player disconnects or at set intervals. But
                        you&#039;re absolutely right in the callback stuff being a pain, it&#039;s hindering my ability to really utilize the powerful SQL workhorse server that lives outside of the
                        plugin/games limitations and memory space with the current design. :/ <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="editDate"> Last edited by a moderator: <span class="DateTime" title="Jul 2, 2016 at 1:13 PM">Jul 2, 2016</span>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Caffeine</a>,</span>
                        <a href="/threads/prepared-statements-for-mysql.19104/#post-221508" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 2, 2016 at 1:08 PM">Jul 2, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/prepared-statements-for-mysql.19104/#post-221508" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/221508/permalink">#12</a>
                </div>
            </div>
        </div>
    </li>
</ol>


                    <footer>
                        <div class="footer">
                            <div class="pageContent"></div>
                            <div id="copyright"><span class="concealed">Built: Wed, 27 Mar 2019 21:25:21 -0400</span></div>
                            <span class="helper"></span>
                            <ul class="footerLinks">
                                <li><a href="/terms/">Terms and Rules</a></li>
                                <li><a href="https://umod.org/community" target="_blank">Contact Us</a></li>
                            </ul>
                            <span class="helper"></span>
                        </div>
                    </footer>
                </div>
            </div>
        </div>
        <header>
            <div id="header">
                <div class="headerWidth">
                    <div id="logoBlock">
                        <div id="logo"><a href="/">
                                <span></span>
                                <img src="/assets/styles/oxide/logo.png" alt="Oxide" />
                            </a></div>
                        <span class="helper"></span>
                    </div>
                    <div id="navigation" class="">
                        <div class="pageContent">
                            <nav>
                                <div class="navTabs">
                                    <ul class="publicTabs">
                                        <li class="navTab forums Popup PopupControl PopupClosed PopupContainerControl">
                                            <a href="/" class="navLink" rel="Menu">Forums</a>
                                        </li>
                                        <li class="navTab PopupClosed">
                                            <a href="https://umod.org/documentation" class="navLink">Docs</a>
                                        </li>
                                        <li class="navTab Popup PopupControl PopupClosed PopupContainerControl">
                                            <a href="/downloads/" class="navLink" rel="Menu">Downloads</a>
                                        </li>
                                        <li class="navTab Popup PopupControl PopupClosed PopupContainerControl">
                                            <a href="/plugins/" class="navLink" rel="Menu">Plugins</a>
                                        </li>
                                        <li class="navTab selected">
                                            <div class="tabLinks"></div>
                                        </li>
                                    </ul>
                                </div>
                                <span class="helper"></span>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </header>
    </div>
    <script>
        jQuery.extend(true, XenForo, {
            visitor: {
                user_id: 0
            },
            serverTimeInfo: {
                now: 1548531785,
                today: 1548460800,
                todayDow: 6
            },
            _lightBoxUniversal: "0",
            _enableOverlays: "1",
            _animationSpeedMultiplier: "1",
            _overlayConfig: {
                top: "10%",
                speed: 200,
                closeSpeed: 100,
                mask: {
                    color: "rgb(255, 255, 255)",
                    opacity: "0.6",
                    loadSpeed: 200,
                    closeSpeed: 100
                }
            },
            _ignoredUsers: [],
            _loadedScripts: {
                "node_list": true,
                "node_category": true,
                "node_forum": true,
                "discussion_list": true,
                "wf_default": true
            },
            _cookieConfig: {
                path: "/",
                domain: ".oxidemod.org",
                prefix: "xfid_"
            },
            _jsVersion: "f33b43a2"
        });
        jQuery.extend(XenForo.phrases, {
            cancel: "Cancel",
            a_moment_ago: "A moment ago",
            one_minute_ago: "1 minute ago",
            x_minutes_ago: "%minutes% minutes ago",
            today_at_x: "Today at %time%",
            yesterday_at_x: "Yesterday at %time%",
            day_x_at_time_y: "%day% at %time%",
            day0: "Sunday",
            day1: "Monday",
            day2: "Tuesday",
            day3: "Wednesday",
            day4: "Thursday",
            day5: "Friday",
            day6: "Saturday",
            _months: "January,February,March,April,May,June,July,August,September,October,November,December",
            _daysShort: "Sun,Mon,Tue,Wed,Thu,Fri,Sat",
            following_error_occurred: "The following error occurred",
            server_did_not_respond_in_time_try_again: "The server did not respond in time. Please try again.",
            logging_in: "Logging in",
            click_image_show_full_size_version: "Click this image to show the full-size version.",
            show_hidden_content_by_x: "Show hidden content by {names}"
        });
    </script>
</body>
</html>
