<!DOCTYPE html>
<html id="XenForo" lang="en-US" dir="LTR" class="Public NoJs LoggedOut NoSidebar  Responsive" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>

	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
	
		<meta name="viewport" content="width=device-width, initial-scale=1" />
	
	
		<base href="https://oxidemod.org/" />
		<script>
			var _b = document.getElementsByTagName('base')[0], _bH = "https://oxidemod.org/";
			if (_b && _b.href != _bH) _b.href = _bH;
		</script>
	

	<title>Solved - Make players sleep? (Lua) | Oxide</title>
	
	<noscript><style>.JsOnly, .jsOnly { display: none !important; }</style></noscript>
	<link rel="stylesheet" href="css.php?css=xenforo,form,public&amp;style=5&amp;dir=LTR&amp;d=1548526345" />
	<link rel="stylesheet" href="css.php?css=bb_code,message,message_user_info,thread_view&amp;style=5&amp;dir=LTR&amp;d=1548526345" />
	
	

	
		<script src="js/jquery/jquery-1.11.0.min.js"></script>	
		
	<script src="js/xenforo/xenforo.js?_v=f33b43a2"></script>

	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
	<meta name="mobile-web-app-capable" content="yes" />
<link rel="icon" sizes="196x196" href="https://oxidemod.org/styles/oxide/logo.og.png" />
<link rel="apple-touch-icon" href="https://oxidemod.org/styles/oxide/logo.og.png" />
	<link rel="alternate" type="application/rss+xml" title="RSS feed for Oxide" href="forums/-/index.rss" />
		
	<link rel="next" href="threads/make-players-sleep-lua.7435/page-2" />
	<link rel="canonical" href="https://oxidemod.org/threads/make-players-sleep-lua.7435/" />
	<meta name="description" content="Is it possible to make players sleep?
I know there is the console command &quot;sleep&quot;,
but that one doesn't accept args like a playername. So you can only..." />	<meta property="og:site_name" content="Oxide" />
	<meta property="og:image" content="https://oxidemod.org/styles/default/xenforo/avatars/avatar_m.png" />
	<meta property="og:image" content="https://oxidemod.org/styles/oxide/logo.og.png" />
	<meta property="og:type" content="article" />
	<meta property="og:url" content="https://oxidemod.org/threads/make-players-sleep-lua.7435/" />
	<meta property="og:title" content="Solved - Make players sleep? (Lua)" />
	<meta property="og:description" content="Is it possible to make players sleep?
I know there is the console command &quot;sleep&quot;,
but that one doesn't accept args like a playername. So you can only..." />
	
	
	

</head>

<body class="node4 node1 node104 node105 SelectQuotable">




<div id="headerMover">
	<div id="headerProxy"></div>

<div id="content" class="thread_view">
	<div class="pageWidth">
		<div class="pageContent">
			
			
			

			

			
			
				<div class="breadBoxTop ">
					
					

<nav>
	
		
			
				
			
		
			
				
			
		
			
				
			
		
			
				
			
		
	

	<fieldset class="breadcrumb">			
		<div class="boardTitle"><strong>Oxide</strong></div>
		
		<span class="crumbs">
			
				

					
						<span class="crust selectedTabCrumb" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
							<a href="https://oxidemod.org/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Forums</span></a>
							<span class="arrow"><span>&gt;</span></span>
						</span>
					

					
						
							<span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
								<a href="https://oxidemod.org/#oxide-project.1" class="crumb" rel="up" itemprop="url"><span itemprop="title">Oxide Project</span></a>
								<span class="arrow"><span>&gt;</span></span>
							</span>
						
							<span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
								<a href="https://oxidemod.org/categories/archive.104/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Archive</span></a>
								<span class="arrow"><span>&gt;</span></span>
							</span>
						
							<span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
								<a href="https://oxidemod.org/categories/plugin-development.105/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Plugin Development</span></a>
								<span class="arrow"><span>&gt;</span></span>
							</span>
						
							<span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
								<a href="https://oxidemod.org/forums/rust-development.4/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Rust Development</span></a>
								<span class="arrow"><span>&gt;</span></span>
							</span>
						
					
				
			
		</span>
	</fieldset>
</nav>
				</div>
			
			
	
			



			
				

						
			
			
			
						
						
													
								<!-- h1 title, description -->
								<div class="titleBar">
									
									<h1>
										
											
												<span class="prefix prefixGreen">Solved</span> <a href="https://oxidemod.org/threads/make-players-sleep-lua.7435/">Make players sleep? (Lua)</a>
											
										
									</h1>

									<p id="pageDescription" class="muted ">
	Discussion in '<a href="forums/rust-development.4/">Rust Development</a>' started by <a class="username" dir="auto">LaserHydra</a>, <a href="threads/make-players-sleep-lua.7435/"><span class="DateTime" title="Mar 27, 2015 at 9:48 PM">Mar 27, 2015</span></a>.
</p>
								</div>
							
						
						
						
						

						

	

























	




<div class="pageNavLinkGroup">
	<div class="linkGroup SelectionCountContainer">
		
		
	</div>

	


<div class="PageNav"
	data-page="1"
	data-range="2"
	data-start="2"
	data-end="2"
	data-last="2"
	data-sentinel="{{sentinel}}"
	data-baseurl="threads/make-players-sleep-lua.7435/page-{{sentinel}}">
	
	
	<nav>
		
		
		<a href="threads/make-players-sleep-lua.7435/" class="currentPage " rel="start">1</a>
		
		
		
		
		
		
		
		<a href="threads/make-players-sleep-lua.7435/page-2" class="">2</a>
		
		
			<a href="threads/make-players-sleep-lua.7435/page-2" class="text">Next &gt;</a>
			
		
	</nav>	
	
	
</div>

</div>






<form action="inline-mod/post/switch" method="post"
	class="InlineModForm section"
	data-cookieName="posts"
	data-controls="#InlineModControls"
	data-imodOptions="#ModerationSelect option">

	<ol class="messageList" id="messageList">
		
			
				


<li id="post-75642" class="message   " data-author="LaserHydra">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="LaserHydra" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">LaserHydra</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<b>Is it possible to make players sleep?</b><br />
I know there is the console command &quot;sleep&quot;,<br />
but that one doesn&#039;t accept args like a playername. So you can only use that in the ingame console to make yourself sleep. <br />
Is it Possible to make players sleep via a plugin?<br />
Im planning to make an afk plugin with that.<br />
Im also interested if there is a way to detect inactivity.<br />
Thanks<br />
-Laser
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">LaserHydra</a>,</span>
					<a href="threads/make-players-sleep-lua.7435/" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 27, 2015 at 9:48 PM">Mar 27, 2015</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/make-players-sleep-lua.7435/" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/75642/permalink">#1</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-75648" class="message   " data-author="Mughisi">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Mughisi" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Mughisi</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="LaserHydra">
	<aside>
		
			<div class="attribution type">LaserHydra said:
				
					<a href="goto/post?id=75642#post-75642" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote"><b>Is it possible to make players sleep?</b><br />
I know there is the console command &quot;sleep&quot;,<br />
but that one doesn&#039;t accept args like a playername. So you can only use that in the ingame console to make yourself sleep.<br />
Is it Possible to make players sleep via a plugin?<br />
Im planning to make an afk plugin with that.<br />
Im also interested if there is a way to detect inactivity.<br />
Thanks<br />
-Laser</div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>To have a player start sleeping you just need the BasePlayer and use the method StartSleeping, silly example:<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>function PLUGIN:cmdSleep(player, cmd, args)
    player:StartSleeping()
end</pre>
</div>Detecting inactivity however is a bit different but I suppose an easy way to do it is just to have a timer running which checks the position of each player on a set interval and if that position hasn&#039;t changed after x minutes you can set them afk.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
					<a href="threads/make-players-sleep-lua.7435/#post-75648" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 27, 2015 at 10:36 PM">Mar 27, 2015</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/make-players-sleep-lua.7435/#post-75648" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/75648/permalink">#2</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-75649" class="message   " data-author="LaserHydra">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="LaserHydra" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">LaserHydra</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					Thanks, imma try working with it.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">LaserHydra</a>,</span>
					<a href="threads/make-players-sleep-lua.7435/#post-75649" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 27, 2015 at 10:37 PM">Mar 27, 2015</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/make-players-sleep-lua.7435/#post-75649" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/75649/permalink">#3</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-75651" class="message   " data-author="Mughisi">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Mughisi" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Mughisi</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="LaserHydra">
	<aside>
		
			<div class="attribution type">LaserHydra said:
				
					<a href="goto/post?id=75649#post-75649" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">Thanks, imma try working with it.</div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>If you want to see few different things with their explanation I could recommend having a look at the code of the teleportation plugin. I wrote that with loads of comments explaining every single thing, even the StartSleeping is in there <img src="styles/default/xenforo/clear.png" class="mceSmilieSprite mceSmilie2" alt=";)" title="Wink    ;)" /> and it has a lot of different things in it so it might be good practice.<br />
<br />
I can also recommend downloading a program to decompile the Assembly-CSharp.dll server file so you can find functions you can use on specific objects (like StartSleeping for BasePlayer). One of those programs (and free) is <a href="http://www.telerik.com/products/decompiler.aspx" target="_blank" class="externalLink  rel="nofollow">JustDecompile</a>. <br />
<br />
Also nice is this website: <a href="http://www.lua.org/pil/contents.html" target="_blank" class="externalLink  rel="nofollow">http://www.lua.org/pil/contents.html</a> it has a lot of information on Lua as a programming language so it might be worth checking out as well.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
					<a href="threads/make-players-sleep-lua.7435/#post-75651" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 27, 2015 at 10:44 PM">Mar 27, 2015</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/make-players-sleep-lua.7435/#post-75651" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/75651/permalink">#4</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-75652" class="message   " data-author="LaserHydra">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="LaserHydra" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">LaserHydra</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					Thanks a lot <img src="styles/default/xenforo/clear.png" class="mceSmilieSprite mceSmilie1" alt=":)" title="Smile    :)" /><br />
Imma get onto that if im searching for something.<br />
-Laser<br />
[DOUBLEPOST=1427496884][/DOUBLEPOST]Also is there a possibility like to do like<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>function PLUGIN:cmdAfk(player)
-- Set Player as afk anyhow idk how so:
player = afk
player:StartSleeping()
rust.BroadcastChat(&quot;AFK&quot;, player , &quot; is now afk!&quot;)
end

function PLUGIN:OnPlayerWakeup(player)
if player = afk then
rust.BroadcastChat(&quot;AFK&quot;, player.displayName, &quot; Isn't afk anymore!&quot;)
else end
end</pre>
</div>-laser<br />
[DOUBLEPOST=1427496919][/DOUBLEPOST]Lel how to do that LUA code? :v that doesnt work and if I use the interface its just a normal code...
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
			<div class="editDate">
			
				Last edited by a moderator: <span class="DateTime" title="Mar 28, 2015 at 1:56 AM">Mar 28, 2015</span>
			
			</div>
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">LaserHydra</a>,</span>
					<a href="threads/make-players-sleep-lua.7435/#post-75652" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 27, 2015 at 10:46 PM">Mar 27, 2015</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/make-players-sleep-lua.7435/#post-75652" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/75652/permalink">#5</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-75703" class="message  staff " data-author="Wulf">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto" itemprop="name">Wulf</a>
			<em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="LaserHydra">
	<aside>
		
			<div class="attribution type">LaserHydra said:
				
					<a href="goto/post?id=75652#post-75652" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">Thanks a lot <img src="styles/default/xenforo/clear.png" class="mceSmilieSprite mceSmilie1" alt=":)" title="Smile    :)" /><br />
Imma get onto that if im searching for something.<br />
-Laser<br />
[DOUBLEPOST=1427496884][/DOUBLEPOST]Also is there a possibility like to do like<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>function PLUGIN:cmdAfk(player)
-- Set Player as afk anyhow idk how so:
player = afk
player:StartSleeping()
rust.BroadcastChat(&quot;AFK&quot;, player , &quot; is now afk!&quot;)
end

function PLUGIN:OnPlayerWakeup(player)
if player = afk then
rust.BroadcastChat(&quot;AFK&quot;, player.displayName, &quot; Isn't afk anymore!&quot;)
else end
end</pre>
</div>-laser<br />
[DOUBLEPOST=1427496919][/DOUBLEPOST]Lel how to do that LUA code? :v that doesnt work and if I use the interface its just a normal code...</div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>I&#039;ve updated your post to show you how to post Lua code in tags.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
					<a href="threads/make-players-sleep-lua.7435/#post-75703" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 28, 2015 at 1:56 AM">Mar 28, 2015</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/make-players-sleep-lua.7435/#post-75703" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/75703/permalink">#6</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-75711" class="message   " data-author="LaserHydra">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="LaserHydra" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">LaserHydra</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					kk thanks... Do you got an ansewer for my question tho? XD Mughisi is offline :v<br />
-Laser
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">LaserHydra</a>,</span>
					<a href="threads/make-players-sleep-lua.7435/#post-75711" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 28, 2015 at 2:15 AM">Mar 28, 2015</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/make-players-sleep-lua.7435/#post-75711" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/75711/permalink">#7</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-75752" class="message   " data-author="Mughisi">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Mughisi" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Mughisi</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="LaserHydra">
	<aside>
		
			<div class="attribution type">LaserHydra said:
				
					<a href="goto/post?id=75711#post-75711" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">kk thanks... Do you got an ansewer for my question tho? XD Mughisi is offline :v<br />
-Laser</div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>To mark a player as afk you will need to store them in a list of sorts, or for Lua, in a table (<a href="http://lua-users.org/wiki/TablesTutorial" target="_blank" class="externalLink  rel="nofollow">http://lua-users.org/wiki/TablesTutorial</a>). You don&#039;t generally want to modify the player in the case of your code as the player there is actually the BasePlayer. Also you are using PLUGIN:OnPlayerWakeup which actually is not a hook so you will need to use the OnRunCommand hook and listen for the wakeup command.<br />
<br />
I wrote you an example which basically does all these things you describe. I haven&#039;t actually tested it but it should work more or less <img src="styles/default/xenforo/clear.png" class="mceSmilieSprite mceSmilie7" alt=":p" title="Stick Out Tongue    :p" /><br />
It has a bit of everything in it, working with tables, timers, if statements, ... a bit of all what you need to write your own version of it <img src="styles/default/xenforo/clear.png" class="mceSmilieSprite mceSmilie7" alt=":p" title="Stick Out Tongue    :p" /><br />
<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>
PLUGIN.Title       = &quot;AFK&quot;
PLUGIN.Description = &quot;Sets afk mode for players.&quot;
PLUGIN.Version     = V( 1, 0, 0 )
PLUGIN.HasConfig   = true
PLUGIN.Author      = &quot;Mughisi&quot;

local afkplayers = {}

local afkcheckinterval = 30
local timeUntilAfk = 600
local timeUntilDisconnect = 1200
local afktimers = {}
local afkbypassadmins = true
local afkchecks = {}

function PLUGIN:Init()
    command.AddChatCommand(&quot;afk&quot;, self.Plugin, &quot;cmdAfk&quot;)
    command.AddChatCommand(&quot;afklist&quot;, self.Plugin, &quot;cmdAfkList&quot;)

    local itPlayerList = global.BasePlayer.activePlayerList:GetEnumerator()
    while itPlayerList:MoveNext() do
        local player = itPlayerList.Current
        self:OnPlayerInit(player)
    end
end

function PLUGIN:cmdAfk(player, cmd, args)
    self:SetAfk(player)
end

function PLUGIN:cmdAfkList(player, cmd, args)
    if player.net.connection.authLevel == 2 then
        self:SendMessage(player, &quot;The following players are afk:&quot;)
        for id, name in pairs(afkplayers) do
            self:SendMessage(player, name)
        end
    else
        self:SendMessage(player, &quot;You are not allowed to use this command.&quot;)
    end
end

function PLUGIN:OnPlayerInit(player)
    if afkbypassadmins then
        if player.net.connection.authLevel &gt; 0 then return end
    end

    local steamid = rust.UserIDFromPlayer(player)

    afktimers[steamid] = timer.Repeat(afkcheckinterval, 0, function() self:AfkCheck(player) end, self.Plugin)
end

function PLUGIN:OnPlayerDisconnected(player)
    local steamid = rust.UserIDFromPlayer(player)
    if afktimers[steamid] then
        afktimers[steamid]:Destroy()
    end
end

function PLUGIN:Afkcheck(player)
    local steamid = rust.UserIDFromPlayer(player)
    local position = player.transform.position

    if afkchecks[steamid] then
        if afkchecks[steamid].x ~= position.x or afkchecks[steamid].y ~= position.y or afkchecks[steamid].z ~= position.z then
            if afkchecks[steamid].counter then
                afkchecks[steamid].counter = 1
            else
                afkchecks[steamid].counter = afkchecks[steamid].counter + 1
            end

            if afkchecks[steamid].counter &gt;= (timeUntilAfk / afkcheckinterval) then
                self:SetAfk(player)
            end

            if afkchecks[steamid].counter &gt;= (timeUntilDisconnect / afkcheckinterval) then
                self:Disconnect(player)
            end
        else
            afkchecks[steamid] = { x = position.x, y = position.y, z = position.z }
            afkchecks[steamid].counter = 0
        end
    else
        afkchecks[steamid] = { x = position.x, y = position.y, z = position.z }
    end
end

function PLUGIN:SetAfk(player)
    local steamid = rust.UserIDFromPlayer(player)
    afkplayers[steamid] = player.displayName
    self:SendMessage(player, &quot;You are now afk.&quot;)
    player:StartSleeping()
end

function PLUGIN:Disconnect(player)
    Network.Net.sv:Kick(targetPlayer.net.connection, &quot;You have been kicked due to inactivity.&quot;)
end

function PLUGIN:OnRunCommand( arg )
    if not arg then return end
    if not arg.cmd then return end
    if not arg.cmd.name then return end
    if not arg.connection then return end
    if not arg.connection.player then return end

    if arg.cmd.name == &quot;wakeup&quot; then
        local steamid = rust.UserIDFromPlayer(arg.connection.player)
        if afkplayers[steamid] then
            afkplayers[steamid] = nil
        end
    end
end

function PLUGIN:SendMessage(target, message)
    if not target then return end
    if not target:IsConnected() then return end
    message = UnityEngine.StringExtensions.QuoteSafe( message )
    target:SendConsoleCommand( &quot;chat.add \&quot;&quot; .. self.Config.Settings.ChatName .. &quot;\&quot;&quot;  .. message );
end

</pre>
</div>
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
					<a href="threads/make-players-sleep-lua.7435/#post-75752" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 28, 2015 at 11:16 AM">Mar 28, 2015</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/make-players-sleep-lua.7435/#post-75752" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/75752/permalink">#8</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-75763" class="message   " data-author="LaserHydra">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="LaserHydra" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">LaserHydra</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					Thanks a lot, imma see that I can work with that.. Its more code that I tought tho ^^<br />
-Laser<br />
[DOUBLEPOST=1427549201][/DOUBLEPOST]


<div class="bbCodeBlock bbCodeQuote" data-author="Mughisi">
	<aside>
		
			<div class="attribution type">Mughisi said:
				
					<a href="goto/post?id=75752#post-75752" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">To mark a player as afk you will need to store them in a list of sorts, or for Lua, in a table (<a href="http://lua-users.org/wiki/TablesTutorial" target="_blank" class="externalLink  rel="nofollow">http://lua-users.org/wiki/TablesTutorial</a>). You don&#039;t generally want to modify the player in the case of your code as the player there is actually the BasePlayer. Also you are using PLUGIN:OnPlayerWakeup which actually is not a hook so you will need to use the OnRunCommand hook and listen for the wakeup command.<br />
<br />
I wrote you an example which basically does all these things you describe. I haven&#039;t actually tested it but it should work more or less <img src="styles/default/xenforo/clear.png" class="mceSmilieSprite mceSmilie7" alt=":p" title="Stick Out Tongue    :p" /><br />
It has a bit of everything in it, working with tables, timers, if statements, ... a bit of all what you need to write your own version of it <img src="styles/default/xenforo/clear.png" class="mceSmilieSprite mceSmilie7" alt=":p" title="Stick Out Tongue    :p" /><br />
<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>
PLUGIN.Title       = &quot;AFK&quot;
PLUGIN.Description = &quot;Sets afk mode for players.&quot;
PLUGIN.Version     = V( 1, 0, 0 )
PLUGIN.HasConfig   = true
PLUGIN.Author      = &quot;Mughisi&quot;

local afkplayers = {}

local afkcheckinterval = 30
local timeUntilAfk = 600
local timeUntilDisconnect = 1200
local afktimers = {}
local afkbypassadmins = true
local afkchecks = {}

function PLUGIN:Init()
    command.AddChatCommand(&quot;afk&quot;, self.Plugin, &quot;cmdAfk&quot;)
    command.AddChatCommand(&quot;afklist&quot;, self.Plugin, &quot;cmdAfkList&quot;)

    local itPlayerList = global.BasePlayer.activePlayerList:GetEnumerator()
    while itPlayerList:MoveNext() do
        local player = itPlayerList.Current
        self:OnPlayerInit(player)
    end
end

function PLUGIN:cmdAfk(player, cmd, args)
    self:SetAfk(player)
end

function PLUGIN:cmdAfkList(player, cmd, args)
    if player.net.connection.authLevel == 2 then
        self:SendMessage(player, &quot;The following players are afk:&quot;)
        for id, name in pairs(afkplayers) do
            self:SendMessage(player, name)
        end
    else
        self:SendMessage(player, &quot;You are not allowed to use this command.&quot;)
    end
end

function PLUGIN:OnPlayerInit(player)
    if afkbypassadmins then
        if player.net.connection.authLevel &gt; 0 then return end
    end

    local steamid = rust.UserIDFromPlayer(player)

    afktimers[steamid] = timer.Repeat(afkcheckinterval, 0, function() self:AfkCheck(player) end, self.Plugin)
end

function PLUGIN:OnPlayerDisconnected(player)
    local steamid = rust.UserIDFromPlayer(player)
    if afktimers[steamid] then
        afktimers[steamid]:Destroy()
    end
end

function PLUGIN:Afkcheck(player)
    local steamid = rust.UserIDFromPlayer(player)
    local position = player.transform.position

    if afkchecks[steamid] then
        if afkchecks[steamid].x ~= position.x or afkchecks[steamid].y ~= position.y or afkchecks[steamid].z ~= position.z then
            if afkchecks[steamid].counter then
                afkchecks[steamid].counter = 1
            else
                afkchecks[steamid].counter = afkchecks[steamid].counter + 1
            end

            if afkchecks[steamid].counter &gt;= (timeUntilAfk / afkcheckinterval) then
                self:SetAfk(player)
            end

            if afkchecks[steamid].counter &gt;= (timeUntilDisconnect / afkcheckinterval) then
                self:Disconnect(player)
            end
        else
            afkchecks[steamid] = { x = position.x, y = position.y, z = position.z }
            afkchecks[steamid].counter = 0
        end
    else
        afkchecks[steamid] = { x = position.x, y = position.y, z = position.z }
    end
end

function PLUGIN:SetAfk(player)
    local steamid = rust.UserIDFromPlayer(player)
    afkplayers[steamid] = player.displayName
    self:SendMessage(player, &quot;You are now afk.&quot;)
    player:StartSleeping()
end

function PLUGIN:Disconnect(player)
    Network.Net.sv:Kick(targetPlayer.net.connection, &quot;You have been kicked due to inactivity.&quot;)
end

function PLUGIN:OnRunCommand( arg )
    if not arg then return end
    if not arg.cmd then return end
    if not arg.cmd.name then return end
    if not arg.connection then return end
    if not arg.connection.player then return end

    if arg.cmd.name == &quot;wakeup&quot; then
        local steamid = rust.UserIDFromPlayer(arg.connection.player)
        if afkplayers[steamid] then
            afkplayers[steamid] = nil
        end
    end
end

function PLUGIN:SendMessage(target, message)
    if not target then return end
    if not target:IsConnected() then return end
    message = UnityEngine.StringExtensions.QuoteSafe( message )
    target:SendConsoleCommand( &quot;chat.add \&quot;&quot; .. self.Config.Settings.ChatName .. &quot;\&quot;&quot;  .. message );
end

</pre>
</div></div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>Well now its more likeley that im just nearly coping that code... Because most of that im not really in to... like itPlayerList:MoveNext() or stuff. I just don&#039;t know what that should mean so.. ^_^<br />
I just only understand parts of for example the function AfkCheck()<br />
<img src="styles/default/xenforo/clear.png" class="mceSmilieSprite mceSmilie9" alt=":eek:" title="Eek!    :eek:" />
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
			<div class="editDate">
			
				Last edited by a moderator: <span class="DateTime" title="Mar 28, 2015 at 1:36 PM">Mar 28, 2015</span>
			
			</div>
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">LaserHydra</a>,</span>
					<a href="threads/make-players-sleep-lua.7435/#post-75763" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 28, 2015 at 11:57 AM">Mar 28, 2015</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/make-players-sleep-lua.7435/#post-75763" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/75763/permalink">#9</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-75802" class="message   " data-author="Mughisi">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Mughisi" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Mughisi</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="LaserHydra">
	<aside>
		
			<div class="attribution type">LaserHydra said:
				
					<a href="goto/post?id=75763#post-75763" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">Thanks a lot, imma see that I can work with that.. Its more code that I tought tho ^^<br />
-Laser<br />
[DOUBLEPOST=1427549201][/DOUBLEPOST]<br />
Well now its more likeley that im just nearly coping that code... Because most of that im not really in to... like itPlayerList:MoveNext() or stuff. I just don&#039;t know what that should mean so.. ^_^<br />
I just only understand parts of for example the function AfkCheck()<br />
<img src="styles/default/xenforo/clear.png" class="mceSmilieSprite mceSmilie9" alt=":eek:" title="Eek!    :eek:" /></div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>That part is to handle the afk timers when the plugin is reloaded. In case the plugin is reloaded all temporary stored data (in those tables) is lost including the timers so if this happens with players online they won&#039;t have a timer running for them unless you loop the activePlayerList which contains the online players and start the timer for them.<br />
I also stored everything in temp variables, including the config, so if you are going to make this into an actual plugin you&#039;ll still have to handle the config part so it is more configurable <img src="styles/default/xenforo/clear.png" class="mceSmilieSprite mceSmilie1" alt=":)" title="Smile    :)" /> Also the example I made is really basic, you could also modify the player&#039;s name and &lt;AFK&gt; on the end.<br />
Ideally though this should be created in C# using the OnPlayerInput hook that listens for the player pressing keys which is a better way to check if the player is afk or not instead of checking the current position against the previous position on a set interval.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
					<a href="threads/make-players-sleep-lua.7435/#post-75802" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 28, 2015 at 1:46 PM">Mar 28, 2015</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/make-players-sleep-lua.7435/#post-75802" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/75802/permalink">#10</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-75807" class="message   " data-author="LaserHydra">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="LaserHydra" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">LaserHydra</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					That OnPlayerInput hook doesn&#039;t work in lua, does it?<br />
Because in C# i would need to start from Zero up again ^^<br />
[DOUBLEPOST=1427551078][/DOUBLEPOST]


<div class="bbCodeBlock bbCodeQuote" data-author="LaserHydra">
	<aside>
		
			<div class="attribution type">LaserHydra said:
				
					<a href="goto/post?id=75807#post-75807" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">That OnPlayerInput hook doesn&#039;t work in lua, does it?<br />
Because in C# i would need to start from Zero up again ^^</div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>Also: You didn&#039;t add in a message if a player is back, did you? <br />
Should it me added into this? <br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>
function PLUGIN:OnRunCommand( arg )
    if not arg then return end
    if not arg.cmd then return end
    if not arg.cmd.name then return end
    if not arg.connection then return end
    if not arg.connection.player then return end
   
    if arg.cmd.name == &quot;wakeup&quot; then
        local steamid = rus.UserIDDromPlayer(arg.connection.player)
        if afkplayers[steamid] then
            afkplayers[steamid] = nil
        end
    end
end
</pre>
</div>after line 11?
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">LaserHydra</a>,</span>
					<a href="threads/make-players-sleep-lua.7435/#post-75807" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 28, 2015 at 1:49 PM">Mar 28, 2015</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/make-players-sleep-lua.7435/#post-75807" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/75807/permalink">#11</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-75811" class="message   " data-author="Mughisi">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Mughisi" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Mughisi</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="LaserHydra">
	<aside>
		
			<div class="attribution type">LaserHydra said:
				
					<a href="goto/post?id=75807#post-75807" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">That OnPlayerInput hook doesn&#039;t work in lua, does it?<br />
Because in C# i would need to start from Zero up again ^^</div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>While it is possible to use this hook in the other supported programming languages, it however is much much slower for them because .Net will need to call into lua 30 times per player per second which will most likely result in a measurable amount of overhead.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
					<a href="threads/make-players-sleep-lua.7435/#post-75811" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 28, 2015 at 2:00 PM">Mar 28, 2015</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/make-players-sleep-lua.7435/#post-75811" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/75811/permalink">#12</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-75816" class="message   " data-author="LaserHydra">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="LaserHydra" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">LaserHydra</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					Well now I just made it into a plugin and customited and added config stuff but its not working...<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>
PLUGIN.Title        = &quot;AFK&quot;
PLUGIN.Description  = &quot;AFK System&quot;
PLUGIN.Author       = &quot;LaserHydra // a lot help by Mughisi&quot;
PLUGIN.Version      = V(1,0,0)
PLUGIN.HasConfig    = true

local afkplayers = {}

local afkcheckinterval = 30
local timeUntilAfk = 600
local timeUntilDisconnect = 1200
local afktimers = {}
local afkbypassadmin = true
local afkchecks = {}

function PLUGIN:Init()
    command.AddChatCommand(&quot;afk&quot;, self.Object, &quot;cmdAfk&quot;)
    command.AddChatCommand(&quot;afklist&quot;, self.Object, &quot;cmdAfkList&quot;)
  
    self:LoadDefaultConfig()
  
    local itPlayerList = global.BasePlayer.activePlayerList:GetEnumerator()
    while itPlayerList:MoveNext() do
        local player = itPlayerList.Current
        self:OnPlayerInit(player)
    end
end
      
function PLUGIN:LoadDefaultConfig()
    self.Config.AfkListMsg = self.Config.AfkListMsg or {&quot;Currently AFK:&quot;}
    self.Config.NotAllowedMsg = self.Config.NotAllowedMsg or {&quot;You are not allowed to use this command.&quot;}
    self.Config.PlayerAfkMsg = self.Config.PlayerAfkMsg or {&quot;is now AFK!&quot;}
    self.Config.PlayerAfkPrivateMsg = self.Config.PlayerAfkPrivateMsg or {&quot;You are now AFK!&quot;}
    self:SaveConfig()
end
      
function PLUGIN:cmdAfk(player)
    self:SetAfk(player)
end

function PLUGIN:OnPlayerInit(player)
    if afkbypassadmins then
        if player.net.connection.authLevel &gt; 0 then return end
    end
  
    local steamid = rust.UserIDFromPlayer(player)
  
    afktimers[steamid] = timer.Repeat(afkcheckinterval, 0, function() self:AfkCheck(player) end, self.Plugin)
end

function OnPlayerDisconnected(player)
    local steamid = rust.UserIDFromPlayer(player)
    if afktimers[steamid] then
        afktimers[steamid]:Destroy()
    end
end

function PLUGIN:AfkCheck()
    local steamid = rust.UserIDFromPlayer(player)
    local position = player.transform.position
  
    if afkchecks[steamid] then
        if afkchecks[steamid].x ~= position.x or afkchecks[steamidk].y ~= position.y or afkchecks[steamid].z ~= position.z then
            if afkchecks[steamid].counter then
                afkchecks[steamid].counter = 1
            else
                afkchecks[steamid].counter = afkchecks[steamid].counter + 1
            end
          
            if afkchecks[steamid].counter &gt;= (timeUntilAfk / afkcheckinterval) then  
                self:SetAfk(player)
            end
          
            if afkchecks[steamid].counter &gt;= (timeUntilDisconnect / afkcheckinterval) then
                self:Disconnect(player)
            end
        else
            afkchecks[steamid] = { x = position.x, y = position.y, z = position.z }
            afkchecks[steamid].counter = 0
        end
    else
        afkchecks[steamid] = { x = position.x, y = position.y, z = position.z }
    end
end

function PLUGIN:SetAfk(player)
    local steamid = rust.UserIDFromPlayer(player)
    afkplayers[steamid] = player.displayName
    self:SendMessage(player, &quot;AFK&quot;, &quot;&quot; .. self.Config.PlayerAfkPrivateMsg)
    player:StartSleeping()
end

function PLUGIN:OnRunCommand( arg )
    if not arg then return end
    if not arg.cmd then return end
    if not arg.cmd.name then return end
    if not arg.connection then return end
    if not arg.connection.player then return end
  
    if arg.cmd.name == &quot;wakeup&quot; then
        local steamid = rus.UserIDFromPlayer(arg.connection.player)
        if afkplayers[steamid] then
            afkplayers[steamid] = nil
        end
    end
end

function PLUGIN:SendMessage(target, message)
    if not target then return end
    if not target.IsConnected() then return end
    message = UnityEngine.StringExtensions.QuoteSafe( message )
    target:SendConsoleCommand( &quot;chat.add \&quot;&quot; .. &quot;AFK&quot; .. &quot;\&quot;&quot; .. message )
end
</pre>
</div>Im getting those errors:<br />
<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>[Oxide] 3:19 PM [Error] Failed to run a 30.00 timer in afk
File: afk.lua Line: 59 Object reference not set to an instance of an object:
at System.UInt64.ToString () [0x00000] in :0
at Oxide.Rust.Libraries.Rust.UserIDFromPlayer (.BasePlayer player) [0x00000] in :0
at (wrapper managed-to-native) System.Reflection.MonoMethod:InternalInvoke (object,object[],System.Exception&amp;)
at System.Reflection.MonoMethod.Invoke (System.Object obj, BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x00000] in :0 </pre>
</div>and<br />
<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>[Oxide] 3:17 PM [Error] Failed to call hook 'cmdAfk' on plugin 'AFK'
File: afk.lua Line: 89 attempt to concatenate field 'PlayerAfkPrivateMsg' (a table value):
at NLua.Lua.ThrowExceptionFromError (Int32 oldTop) [0x00000] in :0
at NLua.Lua.CallFunction (System.Object function, System.Object[] args, System.Type[] returnTypes) [0x00000] in :0
at (wrapper managed-to-native) System.Reflection.MonoMethod:InternalInvoke (object,object[],System.Exception&amp;)
at System.Reflection.MonoMethod.Invoke (System.Object obj, BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x00000] in :0 </pre>
</div>-laser
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">LaserHydra</a>,</span>
					<a href="threads/make-players-sleep-lua.7435/#post-75816" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 28, 2015 at 2:17 PM">Mar 28, 2015</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/make-players-sleep-lua.7435/#post-75816" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/75816/permalink">#13</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-75821" class="message   " data-author="Mughisi">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Mughisi" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Mughisi</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					function PLUGIN:Afkcheck(player) instead of function PLUGIN:Afkcheck() on line 59<br />
And for the config values, you have put everything between { } which indicates it is a table but that isn&#039;t necessary, just as string will suffice here. (This is why you get that second error)
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
					<a href="threads/make-players-sleep-lua.7435/#post-75821" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 28, 2015 at 2:32 PM">Mar 28, 2015</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/make-players-sleep-lua.7435/#post-75821" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/75821/permalink">#14</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-75825" class="message   " data-author="LaserHydra">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="LaserHydra" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">LaserHydra</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="Mughisi">
	<aside>
		
			<div class="attribution type">Mughisi said:
				
					<a href="goto/post?id=75821#post-75821" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">function PLUGIN:Afkcheck(player) instead of function PLUGIN:Afkcheck() on line 59<br />
And for the config values, you have put everything between { } which indicates it is a table but that isn&#039;t necessary, just as string will suffice here. (This is why you get that second error)</div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>What exactly to put between {} ?
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">LaserHydra</a>,</span>
					<a href="threads/make-players-sleep-lua.7435/#post-75825" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 28, 2015 at 2:37 PM">Mar 28, 2015</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/make-players-sleep-lua.7435/#post-75825" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/75825/permalink">#15</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-75872" class="message   " data-author="Mughisi">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Mughisi" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Mughisi</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="LaserHydra">
	<aside>
		
			<div class="attribution type">LaserHydra said:
				
					<a href="goto/post?id=75825#post-75825" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">What exactly to put between {} ?</div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>When you use { } you are actually creating a table<br />
local tableEx = { &quot;value 1&quot;, &quot;value 2&quot;, &quot;value 3&quot; }<br />
<br />
and then you can print those by using []<br />
print(tableEx[1]) -- value 1<br />
print(tableEx[2]) -- value 2<br />
print(tableEx[3]) -- value 3<br />
<br />
to store a string you only use the quotes:<br />
local stringEx = &quot;This is my string&quot;<br />
print(stringEx)
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
					<a href="threads/make-players-sleep-lua.7435/#post-75872" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 28, 2015 at 6:06 PM">Mar 28, 2015</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/make-players-sleep-lua.7435/#post-75872" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/75872/permalink">#16</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-75875" class="message   " data-author="LaserHydra">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="LaserHydra" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">LaserHydra</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					so what do I need to put in {} in this case?<br />
Which Line and what? ^^<br />
in line 89 where it has that error, it says<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>
    self:SendMessage(player, &quot;AFK&quot;, &quot;&quot; .. self.Config.PlayerAfkPrivateMsg)
</pre>
</div>you mean to change it to:<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>
    self:SendMessage(player, &quot;AFK&quot;, &quot;&quot; .. {self.Config.PlayerAfkPrivateMsg})
</pre>
</div>I didn&#039;t really understand it... :v
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">LaserHydra</a>,</span>
					<a href="threads/make-players-sleep-lua.7435/#post-75875" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 28, 2015 at 6:15 PM">Mar 28, 2015</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/make-players-sleep-lua.7435/#post-75875" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/75875/permalink">#17</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-75880" class="message   " data-author="Mughisi">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Mughisi" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Mughisi</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="LaserHydra">
	<aside>
		
			<div class="attribution type">LaserHydra said:
				
					<a href="goto/post?id=75875#post-75875" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">so what do I need to put in {} in this case?<br />
Which Line and what? ^^<br />
in line 89 where it has that error, it says<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>
    self:SendMessage(player, &quot;AFK&quot;, &quot;&quot; .. self.Config.PlayerAfkPrivateMsg)
</pre>
</div>you mean to change it to:<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>
    self:SendMessage(player, &quot;AFK&quot;, &quot;&quot; .. {self.Config.PlayerAfkPrivateMsg})
</pre>
</div>I didn&#039;t really understand it... :v</div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>The error is triggered on line 89 yes but the actual problem is where you set your config values lines 30 and some. You actually set the value for self.Config.PlayerAfkPrivateMsg to a table with that string as value so you can&#039;t just print or send it by calling it like that. You will technically need the [1] as described in my previous post. But because you only use one string it is pointless to store it in a table and it should just be a string so you can print it like you are doing it so I recommend to just remove the { } in the 4 lines where you set your config values like so:<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>
    self.Config.AfkListMsg = self.Config.AfkListMsg or &quot;Currently AFK:&quot;
    self.Config.NotAllowedMsg = self.Config.NotAllowedMsg or &quot;You are not allowed to use this command.&quot;
    self.Config.PlayerAfkMsg = self.Config.PlayerAfkMsg or &quot;is now AFK!&quot;
    self.Config.PlayerAfkPrivateMsg = self.Config.PlayerAfkPrivateMsg or &quot;You are now AFK!&quot;</pre>
</div>You don&#039;t really need to change anything to line 89, just that you do not need the , there as it is using my sendmessage function that only takes 2 arguments <img src="styles/default/xenforo/clear.png" class="mceSmilieSprite mceSmilie7" alt=":p" title="Stick Out Tongue    :p" /><br />
self:SendMessage(player, &quot;AFK: &quot; .. self.Config.PlayerAfkPrivateMsg) <br />
<br />
Also keep in mind that you will probably have to delete the already created config file first.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
					<a href="threads/make-players-sleep-lua.7435/#post-75880" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 28, 2015 at 6:34 PM">Mar 28, 2015</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/make-players-sleep-lua.7435/#post-75880" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/75880/permalink">#18</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-75886" class="message   " data-author="LaserHydra">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="LaserHydra" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">LaserHydra</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					now it gives me an error here:<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>
function PLUGIN:SendMessage(target, message)
    if not target then return end
    if not target.IsConnected() then return end
    message = UnityEngine.StringExtensions.QuoteSafe( message )
    target:SendConsoleCommand( &quot;chat.add \&quot;&quot; .. &quot;AFK&quot; .. &quot;\&quot;&quot; .. message )
end
</pre>
</div>The error is:<br />
<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>
[Error] Failed to call hook 'cmdAfk' on plugin 'AFK' 
File: afk_new.lua Line: 110 instance method 'IsConnected' requires a non null target object: 
at NLua.Lua.ThrowExceptionFromError (Int32 oldTop) [0x00000] in :0 
at NLua.Lua.CallFunction (System.Object function, System.Object[] args, System.Type[] returnTypes) [0x00000] in :0 
at (wrapper managed-to-native) System.Reflection.MonoMethod:InternalInvoke (object,object[],System.Exception&amp;) 
at System.Reflection.MonoMethod.Invoke (System.Object obj, BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x00000] in :0 
</pre>
</div>And the error with the timer is still there... <img src="styles/default/xenforo/clear.png" class="mceSmilieSprite mceSmilie9" alt=":eek:" title="Eek!    :eek:" />
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">LaserHydra</a>,</span>
					<a href="threads/make-players-sleep-lua.7435/#post-75886" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 28, 2015 at 6:43 PM">Mar 28, 2015</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/make-players-sleep-lua.7435/#post-75886" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/75886/permalink">#19</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-75887" class="message   " data-author="Mughisi">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Mughisi" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Mughisi</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					That&#039;s my bad, used to do this in C#, the . between target and IsConnected() should be a :<br />
so switch out that line for<br />
if not target:IsConnected() then return end
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
					<a href="threads/make-players-sleep-lua.7435/#post-75887" title="Permalink" class="datePermalink"><span class="DateTime" title="Mar 28, 2015 at 6:45 PM">Mar 28, 2015</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/make-players-sleep-lua.7435/#post-75887" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/75887/permalink">#20</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
		
	</ol>

	

	

</form>


	<div class="pageNavLinkGroup">
		
			
				<div class="linkGroup">
					
				</div>
			
			<div class="linkGroup" style="display: none"><a href="javascript:" class="muted JsOnly DisplayIgnoredContent Tooltip" title="Show hidden content by ">Show Ignored Content</a></div>

			


<div class="PageNav"
	data-page="1"
	data-range="2"
	data-start="2"
	data-end="2"
	data-last="2"
	data-sentinel="{{sentinel}}"
	data-baseurl="threads/make-players-sleep-lua.7435/page-{{sentinel}}">
	
	
	<nav>
		
		
		<a href="threads/make-players-sleep-lua.7435/" class="currentPage " rel="start">1</a>
		
		
		
		
		
		
		
		<a href="threads/make-players-sleep-lua.7435/page-2" class="">2</a>
		
		
			<a href="threads/make-players-sleep-lua.7435/page-2" class="text">Next &gt;</a>
			
		
	</nav>	
	
	
</div>

		
	</div>












	


												
												
					
			
						
			
						
			


			<footer>
				


<div class="footer">
		<div class="pageContent">
			
            
            
            </div>
			
		
			
			
			<span class="helper"></span>
			<ul class="footerLinks">
			
				
				<li><a href="https://oxidemod.org/terms/">Terms and Rules</a></li>
				
				
				<li><a href="https://umod.org/community" target="_blank">Contact Us</a></li>
			
			</ul>
			
			<span class="helper"></span>
		</div>
</div>

			</footer>
		</div>
	</div>
</div>

<header>
	


<div id="header">
	<div class="headerWidth">
		<div id="logoBlock">
			
			
			<div id="logo"><a href="https://oxidemod.org/">
				<span></span>
				<img src="styles/oxide/logo.png" alt="Oxide" />
			</a></div>
			
			
			<span class="helper"></span>

</div>
		


<div id="navigation" class="">
	<div class="pageContent">
		<nav>
			<div class="navTabs">
				<ul class="publicTabs">

					
					

					
					

					
					
						<li class="navTab forums Popup PopupControl PopupClosed PopupContainerControl">
							<a href="https://oxidemod.org/" class="navLink" rel="Menu">Forums</a>

							
						</li>
					

					<li class="navTab PopupClosed">
	<a href="https://umod.org/documentation" class="navLink">Docs</a>
</li>


					
					
						
							<li class="navTab Popup PopupControl PopupClosed PopupContainerControl">

							<a href="https://oxidemod.org/downloads/" class="navLink" rel="Menu"> Downloads </a>

							
						</li>
						
					
						
							<li class="navTab Popup PopupControl PopupClosed PopupContainerControl">

							<a href="https://oxidemod.org/plugins/" class="navLink" rel="Menu"> Plugins </a>

							
						</li>
						
					
					

					
					

					
					

					
					<li class="navTab selected"><div class="tabLinks"></div></li>
				</ul>

				
				
			</div>

			<span class="helper"></span>
		</nav>
	</div>
</div>
	</div>
</div>

	
	
</header>

</div>

<script>


jQuery.extend(true, XenForo,
{
	visitor: { user_id: 0 },
	serverTimeInfo:
	{
		now: 1548533151,
		today: 1548460800,
		todayDow: 6
	},
	_lightBoxUniversal: "0",
	_enableOverlays: "1",
	_animationSpeedMultiplier: "1",
	_overlayConfig:
	{
		top: "10%",
		speed: 200,
		closeSpeed: 100,
		mask:
		{
			color: "rgb(255, 255, 255)",
			opacity: "0.6",
			loadSpeed: 200,
			closeSpeed: 100
		}
	},
	_ignoredUsers: [],
	_loadedScripts: {"thread_view":true,"message":true,"bb_code":true,"message_user_info":true},
	_cookieConfig: { path: "/", domain: ".oxidemod.org", prefix: "ih_xfid_"},
	_csrfToken: "",
	_csrfRefreshUrl: "login/csrf-token-refresh",
	_jsVersion: "f33b43a2"
});
jQuery.extend(XenForo.phrases,
{
	cancel: "Cancel",

	a_moment_ago:    "A moment ago",
	one_minute_ago:  "1 minute ago",
	x_minutes_ago:   "%minutes% minutes ago",
	today_at_x:      "Today at %time%",
	yesterday_at_x:  "Yesterday at %time%",
	day_x_at_time_y: "%day% at %time%",

	day0: "Sunday",
	day1: "Monday",
	day2: "Tuesday",
	day3: "Wednesday",
	day4: "Thursday",
	day5: "Friday",
	day6: "Saturday",

	_months: "January,February,March,April,May,June,July,August,September,October,November,December",
	_daysShort: "Sun,Mon,Tue,Wed,Thu,Fri,Sat",

	following_error_occurred: "The following error occurred",
	server_did_not_respond_in_time_try_again: "The server did not respond in time. Please try again.",
	logging_in: "Logging in",
	click_image_show_full_size_version: "Click this image to show the full-size version.",
	show_hidden_content_by_x: "Show hidden content by {names}"
});




</script>




</body>
</html>