<!DOCTYPE html>
<html lang="en-US" dir="LTR" class="Public NoJs LoggedOut NoSidebar Responsive">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <base href="" />
    <title>Oxide - Fixed - CanCraft broken or changed?</title>
    <noscript>
        <style>
            .JsOnly,
            .jsOnly {
                display: none !important;
            }
        </style>
    </noscript>
    <script src="/assets/js/jquery/jquery-1.11.0.min.js"></script>
    <script src="/assets/js/xenforo/xenforo.js?_v=f33b43a2"></script>
    <link rel="canonical" href="" />
    <link rel="stylesheet" href="/assets/default.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" />
    <link rel="icon" sizes="196x196" href="/assets/styles/oxide/logo.og.png" />
    <link rel="apple-touch-icon" href="/assets/styles/oxide/logo.og.png" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="description" content="Oxide is an abstracted, modular, and extensible mod and plugin framework for any game that uses .NET" />
    <meta property="og:site_name" content="Oxide" />
    <meta property="og:image" content="/assets/styles/oxide/logo.og.png" />
    <meta property="og:url" content="" />
    <meta property="og:title" content="Oxide - Fixed - CanCraft broken or changed?" />
    <meta property="og:description" content="" />
</head>
<body>
    <div id="headerMover">
        <div id="headerProxy"></div>
        <div id="content" class="forum_list">
            <div class="pageWidth">
                <div class="pageContent">
                    <div class="breadBoxTop">
    <nav>
        <fieldset class="breadcrumb">
            <div class="boardTitle"><strong>Oxide</strong></div>
            <span class="crumbs">
                <span class="crust">
                    <a href="/" class="crumb" rel="up" itemprop="url">
                        <span itemprop="title">Forums</span>
                    </a>
                    <span class="arrow"></span>
                </span>
                
                    
                    <span class="crust">
                        <a href="/forums/plugin-development.105/" class="crumb" rel="up" itemprop="url">
                            <span itemprop="title">Plugin Development</span>
                        </a>
                        <span class="arrow"></span>
                    </span>
                    
                
                    
                    <span class="crust">
                        <a href="/forums/rust-development.4/" class="crumb" rel="up" itemprop="url">
                            <span itemprop="title">Rust Development</span>
                        </a>
                        <span class="arrow"></span>
                    </span>
                    
                
            </span>
        </fieldset>
    </nav>
</div>

<div class="titleBar">
    <h1>
        <span class="prefix prefixLightGreen">Fixed</span> <a href="/threads/cancraft-broken-or-changed.28530/">CanCraft broken or changed?</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="/forums/rust-development.4/">Rust Development</a>' started by <a class="username"
            dir="auto">Mr_Jeff</a>, <a href="/threads/cancraft-broken-or-changed.28530/"><span class="DateTime" title="Dec 8, 2017 at 1:43 PM">Dec 8, 2017</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-371395" class="message" data-author="Mr_Jeff">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Mr_Jeff" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Mr_Jeff</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Never had an issue with this code until last nights update.<br /> Tested it with the plain example on
                        Docs.oxidemod.org and still does nothing. No errors or compiling issues. Just nothing.<br />
                        <br /> What has changed? or is this just plain broken?<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre> private object CanCraft(ItemCrafter itemCrafter, ItemBlueprint bp, int amount)
        {
            var player = itemCrafter.GetComponent&lt;BasePlayer&gt;();
            var item = bp.GetComponent&lt;ItemDefinition&gt;();            if (permission.UserHasPermission(player.UserIDString, Perm))
                return true;            if (configFile.AllowedItems.ContainsKey(item.shortname))
            {
                if(configFile.AllowedItems[item.shortname])
                  
                return true;
            }
            if (configFile.HideMessage.SendMessage)
            PrintToChat(player, Lang(Message.CraftingDisabled, player.UserIDString));
            return false;
        }</pre>
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Mr_Jeff</a>,</span>
                        <a href="/threads/cancraft-broken-or-changed.28530/" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 8, 2017 at 1:43 PM">Dec 8, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/cancraft-broken-or-changed.28530/" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/371395/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-371396" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">No, the hook is not broken, the calling of the correct hook is just broken right now, which CanCraft has two
                        different signatures. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="/threads/cancraft-broken-or-changed.28530/#post-371396" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 8, 2017 at 1:45 PM">Dec 8, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/cancraft-broken-or-changed.28530/#post-371396" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/371396/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-371398" class="message" data-author="Mr_Jeff">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Mr_Jeff" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Mr_Jeff</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">oh, so this is fixable or do we have to wait? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Mr_Jeff</a>,</span>
                        <a href="/threads/cancraft-broken-or-changed.28530/#post-371398" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 8, 2017 at 1:47 PM">Dec 8, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/cancraft-broken-or-changed.28530/#post-371398" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/371398/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-371400" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Mr_Jeff">
                            <aside>
                                <div class="attribution type">Mr_Jeff said: <a href="#post-371398" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">oh, so this is fixable or do we have to wait?</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>You&#039;ll have to wait for a fix in Oxide. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="/threads/cancraft-broken-or-changed.28530/#post-371400" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 8, 2017 at 1:48 PM">Dec 8, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/cancraft-broken-or-changed.28530/#post-371400" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/371400/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-371403" class="message" data-author="Mr_Jeff">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Mr_Jeff" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Mr_Jeff</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Ok, cheers <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Mr_Jeff</a>,</span>
                        <a href="/threads/cancraft-broken-or-changed.28530/#post-371403" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 8, 2017 at 1:52 PM">Dec 8, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/cancraft-broken-or-changed.28530/#post-371403" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/371403/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-371828" class="message" data-author="Vlad-00003">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Vlad-00003" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Vlad-00003</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">So, the deal is - this hook on call drops NRE, no matter what the code is. <br /> Even this code below dropes with
                        NRE.<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>object CanCraft(PlayerBlueprints bps, ItemDefinition itemDef, int skinId) =&gt; true;</pre>
                        </div>
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>
Failed to call hook 'CanCraft' on plugin 'QuarryCraft v1.0.0' (InvalidCastException: Cannot cast from source type to destination type.)
  at Oxide.Plugins.QuarryCraft.DirectCallHook (System.String name, System.Object&amp; ret, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.CSharpPlugin.InvokeMethod (Oxide.Core.Plugins.HookMethod method, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Core.Plugins.CSPlugin.OnCallHook (System.String name, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Core.Plugins.Plugin.CallHook (System.String hook, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
</pre>
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Vlad-00003</a>,</span>
                        <a href="/threads/cancraft-broken-or-changed.28530/#post-371828" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 9, 2017 at 2:25 PM">Dec 9, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/cancraft-broken-or-changed.28530/#post-371828" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/371828/permalink">#6</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-371834" class="message" data-author="Exel80">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Exel80" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Exel80</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Not sure, but shouldn&#039;t you use <b>bool</b> instead of <b>object</b>?<br />
                        <a href="https://github.com/OxideMod/Oxide.Docs/blob/d42a2e692ec35565f5e65b2f0e0b45bfde2e5e41/source/includes/rust/hooks_player.md#cancraft" target="_blank"
                            class="externalLink  rel=" nofollow">Oxide.Docs/hooks_player.md at d42a2e692ec35565f5e65b2f0e0b45bfde2e5e41 · OxideMod/Oxide.Docs · GitHub</a>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Exel80</a>,</span>
                        <a href="/threads/cancraft-broken-or-changed.28530/#post-371834" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 9, 2017 at 2:47 PM">Dec 9, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/cancraft-broken-or-changed.28530/#post-371834" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/371834/permalink">#7</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-371843" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Exel80">
                            <aside>
                                <div class="attribution type">Exel80 said: <a href="#post-371834" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Not sure, but shouldn&#039;t you use <b>bool</b> instead of <b>object</b>?<br />
                                        <a href="https://github.com/OxideMod/Oxide.Docs/blob/d42a2e692ec35565f5e65b2f0e0b45bfde2e5e41/source/includes/rust/hooks_player.md#cancraft" target="_blank"
                                            class="externalLink">Oxide.Docs/hooks_player.md at d42a2e692ec35565f5e65b2f0e0b45bfde2e5e41 · OxideMod/Oxide.Docs · GitHub</a></div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>No, either would work.<br />
                        <br />
                        <div class="bbCodeBlock bbCodeQuote" data-author="Vlad-00003">
                            <aside>
                                <div class="attribution type">Vlad-00003 said: <a href="#post-371828" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">So, the deal is - this hook on call drops NRE, no matter what the code is.<br /> Even this code below dropes with NRE.<br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            <pre>object CanCraft(PlayerBlueprints bps, ItemDefinition itemDef, int skinId) =&gt; true;</pre>
                                        </div>
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            <pre>
Failed to call hook 'CanCraft' on plugin 'QuarryCraft v1.0.0' (InvalidCastException: Cannot cast from source type to destination type.)
  at Oxide.Plugins.QuarryCraft.DirectCallHook (System.String name, System.Object&amp; ret, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.CSharpPlugin.InvokeMethod (Oxide.Core.Plugins.HookMethod method, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Core.Plugins.CSPlugin.OnCallHook (System.String name, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Core.Plugins.Plugin.CallHook (System.String hook, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
</pre>
                                        </div>
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>We&#039;re aware and working on a fix. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="/threads/cancraft-broken-or-changed.28530/#post-371843" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 9, 2017 at 3:05 PM">Dec 9, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/cancraft-broken-or-changed.28530/#post-371843" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/371843/permalink">#8</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-371856" class="message" data-author="Vlad-00003">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Vlad-00003" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Vlad-00003</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">k. Sorry for double-posting, didn&#039;t saw this thread =^-^=<br /> [DOUBLEPOST=1512834470][/DOUBLEPOST] <div
                            class="bbCodeBlock bbCodeQuote" data-author="Exel80">
                            <aside>
                                <div class="attribution type">Exel80 said: <a href="#post-371834" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Not sure, but shouldn&#039;t you use <b>bool</b> instead of <b>object</b>?<br />
                                        <a href="https://github.com/OxideMod/Oxide.Docs/blob/d42a2e692ec35565f5e65b2f0e0b45bfde2e5e41/source/includes/rust/hooks_player.md#cancraft" target="_blank"
                                            class="externalLink  rel=" nofollow">Oxide.Docs/hooks_player.md at d42a2e692ec35565f5e65b2f0e0b45bfde2e5e41 · OxideMod/Oxide.Docs · GitHub</a></div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>What is the difference between bool and object?)<br /> No, really?<br /> If you would look into the code itself you would see that the response of the hook are object,
                        that converted to the bool =3 <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Vlad-00003</a>,</span>
                        <a href="/threads/cancraft-broken-or-changed.28530/#post-371856" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 9, 2017 at 3:46 PM">Dec 9, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/cancraft-broken-or-changed.28530/#post-371856" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/371856/permalink">#9</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-372095" class="message" data-author="Exel80">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Exel80" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Exel80</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Vlad-00003">
                            <aside>
                                <div class="attribution type">Vlad-00003 said: <a href="#post-371856" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">k. Sorry for double-posting, didn&#039;t saw this thread =^-^=<br /> [DOUBLEPOST=1512834470][/DOUBLEPOST]<br /> What is the difference between
                                        bool and object?)<br /> No, really?<br /> If you would look into the code itself you would see that the response of the hook are object, that converted to the
                                        bool =3</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Thats what i thought also. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Exel80</a>,</span>
                        <a href="/threads/cancraft-broken-or-changed.28530/#post-372095" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 10, 2017 at 8:11 AM">Dec 10, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/cancraft-broken-or-changed.28530/#post-372095" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/372095/permalink">#10</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-372170" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">This should be fixed in the latest Oxide build now by the way. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="/threads/cancraft-broken-or-changed.28530/#post-372170" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 10, 2017 at 2:48 PM">Dec 10, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/cancraft-broken-or-changed.28530/#post-372170" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/372170/permalink">#11</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-374174" class="message" data-author="Wizera">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wizera" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Wizera</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Had a major issue leading to players exploiting on our server and just wanted to bring this to the table in case
                        it is of any interest to someone. Below are my quick findings for the two CanCraft methods. I know there are several plugins using the old definition out there and servers
                        using this may be suffering from this.<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>        /**
         * Assuming this definition is the wrong and outdated one (still present in API description).
         * Returning true allows any item to be crafted by double clicking item in inventory standing at workbench as long as player has the blueprint. No resources needed.
         * Since its a hook I'd say it would be a race condition for all plugins with this behaviour so assuming it is not indended to work like this.
         */
        bool CanCraft(ItemCrafter itemCrafter, ItemBlueprint bp, int amount)
        {
            Puts(&quot;Original craft&quot;);
            return true;
        }        /**
         * This (updated definition as understand it) works, kinda. Returning true allows items to be crafted ONLY if resources and blueprints are met.
         * There is one catch tho. It seem to be executed twice once criteria is met.
         * In my case I'm notifying player with a message but it is not very desired to send two messages just because the method gets executed twice.
         */
        object CanCraft(PlayerBlueprints bps, ItemDefinition itemDef, int skinId)
        {
            Puts(&quot;Updated craft&quot;);
            return true;
        }</pre>
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wizera</a>,</span>
                        <a href="/threads/cancraft-broken-or-changed.28530/#post-374174" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 18, 2017 at 6:27 PM">Dec 18, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/cancraft-broken-or-changed.28530/#post-374174" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/374174/permalink">#12</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-374176" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Wizera">
                            <aside>
                                <div class="attribution type">Wizera said: <a href="#post-374174" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Had a major issue leading to players exploiting on our server and just wanted to bring this to the table in case it is of any interest to
                                        someone. Below are my quick findings for the two CanCraft methods. I know there are several plugins using the old definition out there and servers using this
                                        may be suffering from this.<br />
                                        <br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            <pre>        /**
         * Assuming this definition is the wrong and outdated one (still present in API description).
         * Returning true allows any item to be crafted by double clicking item in inventory standing at workbench as long as player has the blueprint. No resources needed.
         * Since its a hook I'd say it would be a race condition for all plugins with this behaviour so assuming it is not indended to work like this.
         */
        bool CanCraft(ItemCrafter itemCrafter, ItemBlueprint bp, int amount)
        {
            Puts(&quot;Original craft&quot;);
            return true;
        }        /**
         * This (updated definition as understand it) works, kinda. Returning true allows items to be crafted ONLY if resources and blueprints are met.
         * There is one catch tho. It seem to be executed twice once criteria is met.
         * In my case I'm notifying player with a message but it is not very desired to send two messages just because the method gets executed twice.
         */
        object CanCraft(PlayerBlueprints bps, ItemDefinition itemDef, int skinId)
        {
            Puts(&quot;Updated craft&quot;);
            return true;
        }</pre>
                                        </div>
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>There aren’t old definitions, they are the same as they have been. The hook has multiple signatures, each for a different purpose. <div class="messageTextEndMarker">
                            &nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="/threads/cancraft-broken-or-changed.28530/#post-374176" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 18, 2017 at 6:31 PM">Dec 18, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/cancraft-broken-or-changed.28530/#post-374176" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/374176/permalink">#13</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-374180" class="message" data-author="Wizera">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wizera" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Wizera</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Wulf">
                            <aside>
                                <div class="attribution type">Wulf said: <a href="#post-374176" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">There aren’t old definitions, they are the same as they have been. The hook has multiple signatures, each for a different purpose.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Ah great. Then its good I suppose. Would be great with some additional documentation how these are ment to be used if possible <div class="messageTextEndMarker">&nbsp;
                        </div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wizera</a>,</span>
                        <a href="/threads/cancraft-broken-or-changed.28530/#post-374180" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 18, 2017 at 6:37 PM">Dec 18, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/cancraft-broken-or-changed.28530/#post-374180" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/374180/permalink">#14</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-374181" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Wizera">
                            <aside>
                                <div class="attribution type">Wizera said: <a href="#post-374180" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Ah great. Then its good I suppose. Would be great with some additional documentation how these are ment to be used if possible</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Probably, the old docs are a bit bare right now. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="/threads/cancraft-broken-or-changed.28530/#post-374181" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 18, 2017 at 6:41 PM">Dec 18, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/cancraft-broken-or-changed.28530/#post-374181" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/374181/permalink">#15</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-374182" class="message" data-author="Wizera">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wizera" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Wizera</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Wulf">
                            <aside>
                                <div class="attribution type">Wulf said: <a href="#post-374181" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Probably, the old docs are a bit bare right now.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>What is the reason &quot;object CanCraft(PlayerBlueprints bps, ItemDefinition itemDef, int skinId)&quot; is being called twice? if it was executed once I&#039;d have my
                        code working as intended right now. the other definition is not an option at all which is obvious <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wizera</a>,</span>
                        <a href="/threads/cancraft-broken-or-changed.28530/#post-374182" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 18, 2017 at 6:47 PM">Dec 18, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/cancraft-broken-or-changed.28530/#post-374182" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/374182/permalink">#16</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-374183" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Wizera">
                            <aside>
                                <div class="attribution type">Wizera said: <a href="#post-374182" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">What is the reason &quot;object CanCraft(PlayerBlueprints bps, ItemDefinition itemDef, int skinId)&quot; is being called twice? if it was
                                        executed once I&#039;d have my code working as intended right now. the other definition is not an option at all which is obvious</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>If it is called twice, then that is how often that code area is hit in Rust. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="/threads/cancraft-broken-or-changed.28530/#post-374183" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 18, 2017 at 6:50 PM">Dec 18, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/cancraft-broken-or-changed.28530/#post-374183" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/374183/permalink">#17</a>
                </div>
            </div>
        </div>
    </li>
</ol>


                    <footer>
                        <div class="footer">
                            <div class="pageContent"></div>
                            <div id="copyright"><span class="concealed">Built: Wed, 27 Mar 2019 21:25:21 -0400</span></div>
                            <span class="helper"></span>
                            <ul class="footerLinks">
                                <li><a href="/terms/">Terms and Rules</a></li>
                                <li><a href="https://umod.org/community" target="_blank">Contact Us</a></li>
                            </ul>
                            <span class="helper"></span>
                        </div>
                    </footer>
                </div>
            </div>
        </div>
        <header>
            <div id="header">
                <div class="headerWidth">
                    <div id="logoBlock">
                        <div id="logo"><a href="/">
                                <span></span>
                                <img src="/assets/styles/oxide/logo.png" alt="Oxide" />
                            </a></div>
                        <span class="helper"></span>
                    </div>
                    <div id="navigation" class="">
                        <div class="pageContent">
                            <nav>
                                <div class="navTabs">
                                    <ul class="publicTabs">
                                        <li class="navTab forums Popup PopupControl PopupClosed PopupContainerControl">
                                            <a href="/" class="navLink" rel="Menu">Forums</a>
                                        </li>
                                        <li class="navTab PopupClosed">
                                            <a href="https://umod.org/documentation" class="navLink">Docs</a>
                                        </li>
                                        <li class="navTab Popup PopupControl PopupClosed PopupContainerControl">
                                            <a href="/downloads/" class="navLink" rel="Menu">Downloads</a>
                                        </li>
                                        <li class="navTab Popup PopupControl PopupClosed PopupContainerControl">
                                            <a href="/plugins/" class="navLink" rel="Menu">Plugins</a>
                                        </li>
                                        <li class="navTab selected">
                                            <div class="tabLinks"></div>
                                        </li>
                                    </ul>
                                </div>
                                <span class="helper"></span>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </header>
    </div>
    <script>
        jQuery.extend(true, XenForo, {
            visitor: {
                user_id: 0
            },
            serverTimeInfo: {
                now: 1548531785,
                today: 1548460800,
                todayDow: 6
            },
            _lightBoxUniversal: "0",
            _enableOverlays: "1",
            _animationSpeedMultiplier: "1",
            _overlayConfig: {
                top: "10%",
                speed: 200,
                closeSpeed: 100,
                mask: {
                    color: "rgb(255, 255, 255)",
                    opacity: "0.6",
                    loadSpeed: 200,
                    closeSpeed: 100
                }
            },
            _ignoredUsers: [],
            _loadedScripts: {
                "node_list": true,
                "node_category": true,
                "node_forum": true,
                "discussion_list": true,
                "wf_default": true
            },
            _cookieConfig: {
                path: "/",
                domain: ".oxidemod.org",
                prefix: "xfid_"
            },
            _jsVersion: "f33b43a2"
        });
        jQuery.extend(XenForo.phrases, {
            cancel: "Cancel",
            a_moment_ago: "A moment ago",
            one_minute_ago: "1 minute ago",
            x_minutes_ago: "%minutes% minutes ago",
            today_at_x: "Today at %time%",
            yesterday_at_x: "Yesterday at %time%",
            day_x_at_time_y: "%day% at %time%",
            day0: "Sunday",
            day1: "Monday",
            day2: "Tuesday",
            day3: "Wednesday",
            day4: "Thursday",
            day5: "Friday",
            day6: "Saturday",
            _months: "January,February,March,April,May,June,July,August,September,October,November,December",
            _daysShort: "Sun,Mon,Tue,Wed,Thu,Fri,Sat",
            following_error_occurred: "The following error occurred",
            server_did_not_respond_in_time_try_again: "The server did not respond in time. Please try again.",
            logging_in: "Logging in",
            click_image_show_full_size_version: "Click this image to show the full-size version.",
            show_hidden_content_by_x: "Show hidden content by {names}"
        });
    </script>
</body>
</html>
