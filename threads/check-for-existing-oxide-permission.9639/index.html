<!DOCTYPE html>
<html id="XenForo" lang="en-US" dir="LTR" class="Public NoJs LoggedOut NoSidebar  Responsive" xmlns:fb="http://www.facebook.com/2008/fbml">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <base href="https://oxidemod.org/" />
    <script> var _b = document.getElementsByTagName('base')[0], _bH = "https://oxidemod.org/";
			if (_b && _b.href != _bH) _b.href = _bH;
		</script>
    <title>Solved - Check for existing oxide permission | Oxide</title>
    <noscript>
        <style>.JsOnly, .jsOnly { display: none !important; }</style>
    </noscript>
    <link rel="stylesheet" href="css.php?css=xenforo,form,public&amp;style=5&amp;dir=LTR&amp;d=1548544754" />
    <link rel="stylesheet" href="css.php?css=bb_code,message,message_user_info,thread_view&amp;style=5&amp;dir=LTR&amp;d=1548544754" />
    <script src="js/jquery/jquery-1.11.0.min.js"></script>
    <script src="js/xenforo/xenforo.js?_v=f33b43a2"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <meta name="mobile-web-app-capable" content="yes" />
    <link rel="icon" sizes="196x196" href="https://oxidemod.org/styles/oxide/logo.og.png" />
    <link rel="apple-touch-icon" href="https://oxidemod.org/styles/oxide/logo.og.png" />
    <link rel="alternate" type="application/rss+xml" title="RSS feed for Oxide" href="forums/-/index.rss" />
    <link rel="canonical" href="https://oxidemod.org/threads/check-for-existing-oxide-permission.9639/" />
    <meta name="description" content="Hi guys, I have a strange problem (a minor one).

I'm trying to check the existence of an oxide permission, if it doesn't exist the plugin (c#) should..." />
    <meta property="og:site_name" content="Oxide" />
    <meta property="og:image" content="https://oxidemod.org/styles/default/xenforo/avatars/avatar_m.png" />
    <meta property="og:image" content="https://oxidemod.org/styles/oxide/logo.og.png" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://oxidemod.org/threads/check-for-existing-oxide-permission.9639/" />
    <meta property="og:title" content="Solved - Check for existing oxide permission" />
    <meta property="og:description" content="Hi guys, I have a strange problem (a minor one).

I'm trying to check the existence of an oxide permission, if it doesn't exist the plugin (c#) should..." />
</head>

<body class="node4 node1 node104 node105 SelectQuotable">
    <div id="headerMover">
        <div id="headerProxy"></div>
        <div id="content" class="thread_view">
            <div class="pageWidth">
                <div class="pageContent">
                    <div class="breadBoxTop ">
                        <nav>
                            <fieldset class="breadcrumb">
                                <div class="boardTitle"><strong>Oxide</strong></div>
                                <span class="crumbs">
                                    <span class="crust selectedTabCrumb" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
                                        <a href="https://oxidemod.org/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Forums</span></a>
                                        <span class="arrow"><span>&gt;</span></span>
                                    </span>
                                    <span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
                                        <a href="https://oxidemod.org/#oxide-project.1" class="crumb" rel="up" itemprop="url"><span itemprop="title">Oxide Project</span></a>
                                        <span class="arrow"><span>&gt;</span></span>
                                    </span>
                                    <span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
                                        <a href="https://oxidemod.org/categories/archive.104/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Archive</span></a>
                                        <span class="arrow"><span>&gt;</span></span>
                                    </span>
                                    <span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
                                        <a href="https://oxidemod.org/categories/plugin-development.105/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Plugin Development</span></a>
                                        <span class="arrow"><span>&gt;</span></span>
                                    </span>
                                    <span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
                                        <a href="https://oxidemod.org/forums/rust-development.4/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Rust Development</span></a>
                                        <span class="arrow"><span>&gt;</span></span>
                                    </span>
                                </span>
                            </fieldset>
                        </nav>
                    </div>
                    <!-- h1 title, description -->
                    <div class="titleBar">
                        <h1>
                            <span class="prefix prefixGreen">Solved</span> <a href="https://oxidemod.org/threads/check-for-existing-oxide-permission.9639/">Check for existing oxide permission</a>
                        </h1>
                        <p id="pageDescription" class="muted "> Discussion in '<a href="forums/rust-development.4/">Rust Development</a>' started by <a class="username" dir="auto">d3nnib</a>, <a href="threads/check-for-existing-oxide-permission.9639/"><span
                                    class="DateTime" title="Jun 22, 2015 at 8:13 AM">Jun 22, 2015</span></a>. </p>
                    </div>
                    <div class="pageNavLinkGroup">
                        <div class="linkGroup SelectionCountContainer">
                        </div>
                    </div>
                    <form action="inline-mod/post/switch" method="post" class="InlineModForm section" data-cookieName="posts" data-controls="#InlineModControls" data-imodOptions="#ModerationSelect option">
                        <ol class="messageList" id="messageList">
                            <li id="post-101653" class="message   " data-author="d3nnib">
                                <div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">
                                    <div class="messageUserBlock ">
                                        <div class="avatarHolder">
                                            <span class="helper"></span>
                                            <a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="d3nnib" /></a>
                                        </div>
                                        <h3 class="userText">
                                            <a class="username" dir="auto">d3nnib</a>
                                        </h3>
                                        <span class="arrow"><span></span></span>
                                    </div>
                                </div>
                                <div class="messageInfo primaryContent">
                                    <div class="messageContent">
                                        <article>
                                            <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Hi guys, I have a strange problem (a minor one).<br />
                                                <br /> I&#039;m trying to check the existence of an oxide permission, if it doesn&#039;t exist the plugin (c#) should create it.<br /> I looked at
                                                various C# plugin and I managed to register the permission with no problems.<br />
                                                <br /> The strange thing is, even if I copied the &quot;check if permission exists and, if not, register it&quot; part from another c# plugin (I
                                                believe it was GodMode) the code works only in part:<br />
                                                <br />
                                                <div class="bbCodeBlock bbCodeCode">
                                                    <div class="type">Code:</div>
                                                    <pre>if (!permission.PermissionExists(&quot;CanControlLanterns&quot;))  
{
 permission.RegisterPermission(&quot;CanControlLanterns&quot;, this);
}</pre>
                                                </div>I&#039;m executing the code through the Init() hook, but the permission check always returns false. It&#039;s not a big deal because returning
                                                always false result in always registering the permission (functionally speaking the pluging is good, the permission works as it should).<br />
                                                <br /> I was only wondering why I am not able to have true returned from PermissionExists.<br />
                                                <br /> Am I missing something in the way oxide permissions work?<br />
                                                <br /> Thanks all! <div class="messageTextEndMarker">&nbsp;</div>
                                            </blockquote>
                                        </article>
                                    </div>
                                    <div class="messageMeta ToggleTriggerAnchor">
                                        <div class="privateControls">
                                            <span class="item muted">
                                                <span class="authorEnd"><a class="username author" dir="auto">d3nnib</a>,</span>
                                                <a href="threads/check-for-existing-oxide-permission.9639/" title="Permalink" class="datePermalink"><span class="DateTime" title="Jun 22, 2015 at 8:13 AM">Jun
                                                        22, 2015</span></a>
                                            </span>
                                        </div>
                                        <div class="publicControls">
                                            <a href="threads/check-for-existing-oxide-permission.9639/" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/101653/permalink">#1</a>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li id="post-101698" class="message   " data-author="Domestos">
                                <div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">
                                    <div class="messageUserBlock ">
                                        <div class="avatarHolder">
                                            <span class="helper"></span>
                                            <a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Domestos" /></a>
                                        </div>
                                        <h3 class="userText">
                                            <a class="username" dir="auto">Domestos</a>
                                        </h3>
                                        <span class="arrow"><span></span></span>
                                    </div>
                                </div>
                                <div class="messageInfo primaryContent">
                                    <div class="messageContent">
                                        <article>
                                            <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Interesting. Just made some tests and can confirm. permission.PermissionExists() always
                                                returns false after reload but true after the permission is registered.<br />
                                                <br /> My testcase:<br />
                                                <div class="bbCodeBlock bbCodeCode">
                                                    <div class="type">Code:</div>
                                                    <pre>
function PLUGIN:Init()
    self:RegisterPermission()
end
function PLUGIN:RegisterPermission()
    print(tostring(permission.PermissionExists(&quot;testperm&quot;)))
    if not permission.PermissionExists(&quot;testperm&quot;) then
        permission.RegisterPermission(&quot;testperm&quot;, self.Object)
    end
    print(tostring(permission.PermissionExists(&quot;testperm&quot;)))
end</pre>
                                                </div><img src="proxy.php?image=http%3A%2F%2Fi.gyazo.com%2F127ade8025033c428a995c1c3558d70e.png&amp;hash=a9ea7848e8db1f926157bad376faaea5" class="bbCodeImage LbImage"
                                                    alt="[&#x200B;IMG]" data-url="http://i.gyazo.com/127ade8025033c428a995c1c3558d70e.png" /><br /> [DOUBLEPOST=1434975051][/DOUBLEPOST]After some more
                                                testing I believe permissions are unloaded as soon as the owner plugin gets unloaded.<br /> If there is no plugin running that registered the
                                                permission, PermissionExists() will always be false even if the permission im checking for is used by users or groups.<br />
                                                <br /> Seems like the PermissionExists() function is more like a IsPermissionRegistered() check. <div class="messageTextEndMarker">&nbsp;</div>
                                            </blockquote>
                                        </article>
                                    </div>
                                    <div class="editDate"> Last edited by a moderator: <span class="DateTime" title="Jun 22, 2015 at 1:08 PM">Jun 22, 2015</span>
                                    </div>
                                    <div class="messageMeta ToggleTriggerAnchor">
                                        <div class="privateControls">
                                            <span class="item muted">
                                                <span class="authorEnd"><a class="username author" dir="auto">Domestos</a>,</span>
                                                <a href="threads/check-for-existing-oxide-permission.9639/#post-101698" title="Permalink" class="datePermalink"><span class="DateTime" title="Jun 22, 2015 at 12:50 PM">Jun
                                                        22, 2015</span></a>
                                            </span>
                                        </div>
                                        <div class="publicControls">
                                            <a href="threads/check-for-existing-oxide-permission.9639/#post-101698" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                                                data-href="posts/101698/permalink">#2</a>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li id="post-101708" class="message   " data-author="d3nnib">
                                <div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">
                                    <div class="messageUserBlock ">
                                        <div class="avatarHolder">
                                            <span class="helper"></span>
                                            <a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="d3nnib" /></a>
                                        </div>
                                        <h3 class="userText">
                                            <a class="username" dir="auto">d3nnib</a>
                                        </h3>
                                        <span class="arrow"><span></span></span>
                                    </div>
                                </div>
                                <div class="messageInfo primaryContent">
                                    <div class="messageContent">
                                        <article>
                                            <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Hi Domestos, thank you! <br /> I see, so, since this is my very first experience with c#
                                                developing, what&#039;s the best way, according to you, to register my custom permission at init? <br />
                                                <br /> Simply use:<br />
                                                <br />
                                                <div class="bbCodeBlock bbCodeCode">
                                                    <div class="type">Code:</div>
                                                    <pre>permission.RegisterPermission(&quot;CanControlLanterns&quot;, this);</pre>
                                                </div>without any particular control? <div class="messageTextEndMarker">&nbsp;</div>
                                            </blockquote>
                                        </article>
                                    </div>
                                    <div class="messageMeta ToggleTriggerAnchor">
                                        <div class="privateControls">
                                            <span class="item muted">
                                                <span class="authorEnd"><a class="username author" dir="auto">d3nnib</a>,</span>
                                                <a href="threads/check-for-existing-oxide-permission.9639/#post-101708" title="Permalink" class="datePermalink"><span class="DateTime" title="Jun 22, 2015 at 1:32 PM">Jun
                                                        22, 2015</span></a>
                                            </span>
                                        </div>
                                        <div class="publicControls">
                                            <a href="threads/check-for-existing-oxide-permission.9639/#post-101708" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                                                data-href="posts/101708/permalink">#3</a>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li id="post-101721" class="message   " data-author="Domestos">
                                <div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">
                                    <div class="messageUserBlock ">
                                        <div class="avatarHolder">
                                            <span class="helper"></span>
                                            <a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Domestos" /></a>
                                        </div>
                                        <h3 class="userText">
                                            <a class="username" dir="auto">Domestos</a>
                                        </h3>
                                        <span class="arrow"><span></span></span>
                                    </div>
                                </div>
                                <div class="messageInfo primaryContent">
                                    <div class="messageContent">
                                        <article>
                                            <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> You can simply use the code you posted in your first post. If some other plugin is
                                                running using the same permission as your plugin the PermissionExists() function should be true so your plugin doesnt register it again. <div class="messageTextEndMarker">&nbsp;</div>
                                            </blockquote>
                                        </article>
                                    </div>
                                    <div class="messageMeta ToggleTriggerAnchor">
                                        <div class="privateControls">
                                            <span class="item muted">
                                                <span class="authorEnd"><a class="username author" dir="auto">Domestos</a>,</span>
                                                <a href="threads/check-for-existing-oxide-permission.9639/#post-101721" title="Permalink" class="datePermalink"><span class="DateTime" title="Jun 22, 2015 at 2:25 PM">Jun
                                                        22, 2015</span></a>
                                            </span>
                                        </div>
                                        <div class="publicControls">
                                            <a href="threads/check-for-existing-oxide-permission.9639/#post-101721" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                                                data-href="posts/101721/permalink">#4</a>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li id="post-101723" class="message   " data-author="d3nnib">
                                <div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">
                                    <div class="messageUserBlock ">
                                        <div class="avatarHolder">
                                            <span class="helper"></span>
                                            <a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="d3nnib" /></a>
                                        </div>
                                        <h3 class="userText">
                                            <a class="username" dir="auto">d3nnib</a>
                                        </h3>
                                        <span class="arrow"><span></span></span>
                                    </div>
                                </div>
                                <div class="messageInfo primaryContent">
                                    <div class="messageContent">
                                        <article>
                                            <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Perfect! Thank you very much! <div class="messageTextEndMarker">&nbsp;</div>
                                            </blockquote>
                                        </article>
                                    </div>
                                    <div class="messageMeta ToggleTriggerAnchor">
                                        <div class="privateControls">
                                            <span class="item muted">
                                                <span class="authorEnd"><a class="username author" dir="auto">d3nnib</a>,</span>
                                                <a href="threads/check-for-existing-oxide-permission.9639/#post-101723" title="Permalink" class="datePermalink"><span class="DateTime" title="Jun 22, 2015 at 2:32 PM">Jun
                                                        22, 2015</span></a>
                                            </span>
                                        </div>
                                        <div class="publicControls">
                                            <a href="threads/check-for-existing-oxide-permission.9639/#post-101723" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                                                data-href="posts/101723/permalink">#5</a>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ol>
                    </form>
                    <div class="pageNavLinkGroup">
                        <div class="linkGroup">
                        </div>
                        <div class="linkGroup" style="display: none"><a href="javascript:" class="muted JsOnly DisplayIgnoredContent Tooltip" title="Show hidden content by ">Show Ignored Content</a></div>
                    </div>
                    <footer>
                        <div class="footer">
                            <div class="pageContent">
                            </div>
                            <span class="helper"></span>
                            <ul class="footerLinks">
                                <li><a href="https://oxidemod.org/terms/">Terms and Rules</a></li>
                                <li><a href="https://umod.org/community" target="_blank">Contact Us</a></li>
                            </ul>
                            <span class="helper"></span>
                        </div>
                </div>
                </footer>
            </div>
        </div>
    </div>
    <header>
        <div id="header">
            <div class="headerWidth">
                <div id="logoBlock">
                    <div id="logo"><a href="https://oxidemod.org/">
                            <span></span>
                            <img src="styles/oxide/logo.png" alt="Oxide" />
                        </a></div>
                    <span class="helper"></span>
                </div>
                <div id="navigation" class="">
                    <div class="pageContent">
                        <nav>
                            <div class="navTabs">
                                <ul class="publicTabs">
                                    <li class="navTab forums Popup PopupControl PopupClosed PopupContainerControl">
                                        <a href="https://oxidemod.org/" class="navLink" rel="Menu">Forums</a>
                                    </li>
                                    <li class="navTab PopupClosed">
                                        <a href="https://umod.org/documentation" class="navLink">Docs</a>
                                    </li>
                                    <li class="navTab Popup PopupControl PopupClosed PopupContainerControl">
                                        <a href="https://oxidemod.org/downloads/" class="navLink" rel="Menu"> Downloads </a>
                                    </li>
                                    <li class="navTab Popup PopupControl PopupClosed PopupContainerControl">
                                        <a href="https://oxidemod.org/plugins/" class="navLink" rel="Menu"> Plugins </a>
                                    </li>
                                    <li class="navTab selected">
                                        <div class="tabLinks"></div>
                                    </li>
                                </ul>
                            </div>
                            <span class="helper"></span>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </header>
    </div>
    <script>
        jQuery.extend(true, XenForo, {
            visitor: {
                user_id: 0
            },
            serverTimeInfo: {
                now: 1548598548,
                today: 1548547200,
                todayDow: 0
            },
            _lightBoxUniversal: "0",
            _enableOverlays: "1",
            _animationSpeedMultiplier: "1",
            _overlayConfig: {
                top: "10%",
                speed: 200,
                closeSpeed: 100,
                mask: {
                    color: "rgb(255, 255, 255)",
                    opacity: "0.6",
                    loadSpeed: 200,
                    closeSpeed: 100
                }
            },
            _ignoredUsers: [],
            _loadedScripts: {
                "thread_view": true,
                "message": true,
                "bb_code": true,
                "message_user_info": true
            },
            _cookieConfig: {
                path: "/",
                domain: ".oxidemod.org",
                prefix: "ih_xfid_"
            },
            _csrfToken: "",
            _csrfRefreshUrl: "login/csrf-token-refresh",
            _jsVersion: "f33b43a2"
        });
        jQuery.extend(XenForo.phrases, {
            cancel: "Cancel",
            a_moment_ago: "A moment ago",
            one_minute_ago: "1 minute ago",
            x_minutes_ago: "%minutes% minutes ago",
            today_at_x: "Today at %time%",
            yesterday_at_x: "Yesterday at %time%",
            day_x_at_time_y: "%day% at %time%",
            day0: "Sunday",
            day1: "Monday",
            day2: "Tuesday",
            day3: "Wednesday",
            day4: "Thursday",
            day5: "Friday",
            day6: "Saturday",
            _months: "January,February,March,April,May,June,July,August,September,October,November,December",
            _daysShort: "Sun,Mon,Tue,Wed,Thu,Fri,Sat",
            following_error_occurred: "The following error occurred",
            server_did_not_respond_in_time_try_again: "The server did not respond in time. Please try again.",
            logging_in: "Logging in",
            click_image_show_full_size_version: "Click this image to show the full-size version.",
            show_hidden_content_by_x: "Show hidden content by {names}"
        });

    </script>
</body>

</html>
