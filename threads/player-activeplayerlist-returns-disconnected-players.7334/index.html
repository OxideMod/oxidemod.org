<!DOCTYPE html>
<html lang="en-US" dir="LTR" class="Public NoJs LoggedOut NoSidebar Responsive">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <base href="" />
    <title>Oxide - Not an Issue - Player.activePlayerList returns disconnected players</title>
    <noscript>
        <style>
            .JsOnly,
            .jsOnly {
                display: none !important;
            }
        </style>
    </noscript>
    <script src="/assets/js/jquery/jquery-1.11.0.min.js"></script>
    <script src="/assets/js/xenforo/xenforo.js?_v=f33b43a2"></script>
    <link rel="canonical" href="" />
    <link rel="stylesheet" href="/assets/default.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" />
    <link rel="icon" sizes="196x196" href="/assets/styles/oxide/logo.og.png" />
    <link rel="apple-touch-icon" href="/assets/styles/oxide/logo.og.png" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="description" content="Oxide is an abstracted, modular, and extensible mod and plugin framework for any game that uses .NET" />
    <meta property="og:site_name" content="Oxide" />
    <meta property="og:image" content="/assets/styles/oxide/logo.og.png" />
    <meta property="og:url" content="" />
    <meta property="og:title" content="Oxide - Not an Issue - Player.activePlayerList returns disconnected players" />
    <meta property="og:description" content="" />
</head>
<body>
    <div id="headerMover">
        <div id="headerProxy"></div>
        <div id="content" class="forum_list">
            <div class="pageWidth">
                <div class="pageContent">
                    <div class="breadBoxTop">
    <nav>
        <fieldset class="breadcrumb">
            <div class="boardTitle"><strong>Oxide</strong></div>
            <span class="crumbs">
                <span class="crust">
                    <a href="/" class="crumb" rel="up" itemprop="url">
                        <span itemprop="title">Forums</span>
                    </a>
                    <span class="arrow"></span>
                </span>
                
                    
                    <span class="crust">
                        <a href="/categories/game-discussion.106/" class="crumb" rel="up" itemprop="url">
                            <span itemprop="title">Game Discussion</span>
                        </a>
                        <span class="arrow"></span>
                    </span>
                    
                
                    
                    <span class="crust">
                        <a href="/forums/rust-discussion.23/" class="crumb" rel="up" itemprop="url">
                            <span itemprop="title">Rust Discussion</span>
                        </a>
                        <span class="arrow"></span>
                    </span>
                    
                
            </span>
        </fieldset>
    </nav>
</div>

<div class="titleBar">
    <h1>
        <span class="prefix prefixBlue">Not an Issue</span> <a href="/threads/player-activeplayerlist-returns-disconnected-players.7334/">Player.activePlayerList
            returns disconnected players</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="/forums/rust-discussion.23/">Rust Discussion</a>' started by <a class="username"
            dir="auto">AlexALX_[rus-ua]</a>, <a href="/threads/player-activeplayerlist-returns-disconnected-players.7334/"><span class="DateTime"
                title="Mar 20, 2015 at 12:05 PM">Mar 20, 2015</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-73829" class="message" data-author="AlexALX_[rus-ua]">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="AlexALX_[rus-ua]" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">AlexALX_[rus-ua]</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>  local playerList = player.activePlayerList
  local enum = playerList:GetEnumerator()</pre>
                        </div>What wrongs with this code after update? I&#039;m getting offline players in list what already disconnected from server long time ago. This happens not for all players,
                        but some still stored here. For example plugin running man now can set as running man player that slepping. Also i&#039;m getting offline players displayed on rustio map like
                        online (and display they positions).<br />
                        <br /> Is this oxide problem or rust? Anyone else have this problem? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">AlexALX_[rus-ua]</a>,</span>
                        <a href="/threads/player-activeplayerlist-returns-disconnected-players.7334/" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Mar 20, 2015 at 12:05 PM">Mar 20, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/player-activeplayerlist-returns-disconnected-players.7334/" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/73829/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-73833" class="message" data-author="Mughisi">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Mughisi" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Mughisi</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Have you tried looking up their position and check them out on the map? It&#039;s possible that something went
                        wrong and they didn&#039;t log correctly. Because Oxide doesn&#039;t do anything to those lists and in BasePlayer.OnDisconnected() it&#039;s still removing the player from the
                        list. The only plugins I can think of that mess with those lists are those that fake population. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
                        <a href="/threads/player-activeplayerlist-returns-disconnected-players.7334/#post-73833" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Mar 20, 2015 at 12:29 PM">Mar 20, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/player-activeplayerlist-returns-disconnected-players.7334/#post-73833" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/73833/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-73834" class="message" data-author="AlexALX_[rus-ua]">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="AlexALX_[rus-ua]" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">AlexALX_[rus-ua]</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> @<b><a href="http://oxidemod.org/members/mughisi.24296/" class="internalLink">Mughisi</a></b><br />
                        <br /> Yes they are on map and they are sleeping. Already found that one sleeping guy was running map... And looking around found another sleeping players what actually shows
                        in this list like online. Also server itself report correct player count, so this problem only in activePlayerList variable.<br />
                        <br /> After look logs i found this intresting thing:<br />
                        <br />
                        <div class="bbCodeBlock bbCodeQuote">
                            <aside>
                                <blockquote class="quoteContainer">
                                    <div class="quote">[3/20/2015 11:17:15 AM] [Oxide] 11:17 AM [Info] [Ping] stalk (***) connected with 226ms ping<br /> [3/20/2015 11:17:15 AM] [Oxide] 11:17 AM
                                        [Info] The player *** uses the name of stalk<br /> [3/20/2015 11:17:15 AM] [Oxide] 11:17 AM [Info] stalk зашел(а) на сервер<br /> [3/20/2015 11:17:15 AM]
                                        ***:50054/***/stalk joined<br /> [3/20/2015 11:17:33 AM] ***:60866/***/stalk Rejecting connection - You are already connected!</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>So oxide actually detected that player connected to server, but hook ondisconnect didn&#039;t called when he was disconnected because of &quot;You are already
                        connected&quot;. It seems like same thing happens to some other players. After this it still displaying like &quot;connected&quot; in rustio map and activePlayerList and it
                        seems like he can&#039;t connect anymore to server. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">AlexALX_[rus-ua]</a>,</span>
                        <a href="/threads/player-activeplayerlist-returns-disconnected-players.7334/#post-73834" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Mar 20, 2015 at 12:43 PM">Mar 20, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/player-activeplayerlist-returns-disconnected-players.7334/#post-73834" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/73834/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-73844" class="message" data-author="Mughisi">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Mughisi" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Mughisi</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Hook or no hook, the server still handles the disconnection of player, this most likely an issue with the server.
                        What you can try is kick the players that are stuck online, or kill them. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
                        <a href="/threads/player-activeplayerlist-returns-disconnected-players.7334/#post-73844" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Mar 20, 2015 at 1:13 PM">Mar 20, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/player-activeplayerlist-returns-disconnected-players.7334/#post-73844" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/73844/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-73847" class="message" data-author="AlexALX_[rus-ua]">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="AlexALX_[rus-ua]" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">AlexALX_[rus-ua]</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Hmmm, it seems like kick help. When i&#039;m kicking stuck player oxide called hook ondisconnect and after that
                        list clears. Thank you for tip, but still, something wrong that players can stuck on server... Probably an rust problem because before latest update never had such problem.
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">AlexALX_[rus-ua]</a>,</span>
                        <a href="/threads/player-activeplayerlist-returns-disconnected-players.7334/#post-73847" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Mar 20, 2015 at 1:20 PM">Mar 20, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/player-activeplayerlist-returns-disconnected-players.7334/#post-73847" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/73847/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-73868" class="message" data-author="Mughisi">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Mughisi" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Mughisi</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="AlexALX_[rus-ua]">
                            <aside>
                                <div class="attribution type">AlexALX_[rus-ua] said: <a href="#post-73847" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Hmmm, it seems like kick help. When i&#039;m kicking stuck player oxide called hook ondisconnect and after that list clears. Thank you for tip,
                                        but still, something wrong that players can stuck on server... Probably an rust problem because before latest update never had such problem.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>It is most likely a rust problem yes, unless you have a plugin that&#039;s messing with the playerlists as I mentioned previously <img
                            src="styles/default/xenforo/clear.png" class="mceSmilieSprite mceSmilie7" alt=":p" title="Stick Out Tongue    :p" />, and the hook doesn&#039;t really have anything to do
                        with it, it&#039;s the method OnDisconnected() in BasePlayer that needs to run (which at some point triggers the hook OnPlayerDisconnect) <div class="messageTextEndMarker">
                            &nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
                        <a href="/threads/player-activeplayerlist-returns-disconnected-players.7334/#post-73868" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Mar 20, 2015 at 3:34 PM">Mar 20, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/player-activeplayerlist-returns-disconnected-players.7334/#post-73868" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/73868/permalink">#6</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-73881" class="message" data-author="PaiN">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="PaiN" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">PaiN</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Its a rust problem man i have it on my server too. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">PaiN</a>,</span>
                        <a href="/threads/player-activeplayerlist-returns-disconnected-players.7334/#post-73881" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Mar 20, 2015 at 5:24 PM">Mar 20, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/player-activeplayerlist-returns-disconnected-players.7334/#post-73881" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/73881/permalink">#7</a>
                </div>
            </div>
        </div>
    </li>
</ol>


                    <footer>
                        <div class="footer">
                            <div class="pageContent"></div>
                            <div id="copyright"><span class="concealed">Built: Wed, 27 Mar 2019 21:25:21 -0400</span></div>
                            <span class="helper"></span>
                            <ul class="footerLinks">
                                <li><a href="/terms/">Terms and Rules</a></li>
                                <li><a href="https://umod.org/community" target="_blank">Contact Us</a></li>
                            </ul>
                            <span class="helper"></span>
                        </div>
                    </footer>
                </div>
            </div>
        </div>
        <header>
            <div id="header">
                <div class="headerWidth">
                    <div id="logoBlock">
                        <div id="logo"><a href="/">
                                <span></span>
                                <img src="/assets/styles/oxide/logo.png" alt="Oxide" />
                            </a></div>
                        <span class="helper"></span>
                    </div>
                    <div id="navigation" class="">
                        <div class="pageContent">
                            <nav>
                                <div class="navTabs">
                                    <ul class="publicTabs">
                                        <li class="navTab forums Popup PopupControl PopupClosed PopupContainerControl">
                                            <a href="/" class="navLink" rel="Menu">Forums</a>
                                        </li>
                                        <li class="navTab PopupClosed">
                                            <a href="https://umod.org/documentation" class="navLink">Docs</a>
                                        </li>
                                        <li class="navTab Popup PopupControl PopupClosed PopupContainerControl">
                                            <a href="/downloads/" class="navLink" rel="Menu">Downloads</a>
                                        </li>
                                        <li class="navTab Popup PopupControl PopupClosed PopupContainerControl">
                                            <a href="/plugins/" class="navLink" rel="Menu">Plugins</a>
                                        </li>
                                        <li class="navTab selected">
                                            <div class="tabLinks"></div>
                                        </li>
                                    </ul>
                                </div>
                                <span class="helper"></span>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </header>
    </div>
    <script>
        jQuery.extend(true, XenForo, {
            visitor: {
                user_id: 0
            },
            serverTimeInfo: {
                now: 1548531785,
                today: 1548460800,
                todayDow: 6
            },
            _lightBoxUniversal: "0",
            _enableOverlays: "1",
            _animationSpeedMultiplier: "1",
            _overlayConfig: {
                top: "10%",
                speed: 200,
                closeSpeed: 100,
                mask: {
                    color: "rgb(255, 255, 255)",
                    opacity: "0.6",
                    loadSpeed: 200,
                    closeSpeed: 100
                }
            },
            _ignoredUsers: [],
            _loadedScripts: {
                "node_list": true,
                "node_category": true,
                "node_forum": true,
                "discussion_list": true,
                "wf_default": true
            },
            _cookieConfig: {
                path: "/",
                domain: ".oxidemod.org",
                prefix: "xfid_"
            },
            _jsVersion: "f33b43a2"
        });
        jQuery.extend(XenForo.phrases, {
            cancel: "Cancel",
            a_moment_ago: "A moment ago",
            one_minute_ago: "1 minute ago",
            x_minutes_ago: "%minutes% minutes ago",
            today_at_x: "Today at %time%",
            yesterday_at_x: "Yesterday at %time%",
            day_x_at_time_y: "%day% at %time%",
            day0: "Sunday",
            day1: "Monday",
            day2: "Tuesday",
            day3: "Wednesday",
            day4: "Thursday",
            day5: "Friday",
            day6: "Saturday",
            _months: "January,February,March,April,May,June,July,August,September,October,November,December",
            _daysShort: "Sun,Mon,Tue,Wed,Thu,Fri,Sat",
            following_error_occurred: "The following error occurred",
            server_did_not_respond_in_time_try_again: "The server did not respond in time. Please try again.",
            logging_in: "Logging in",
            click_image_show_full_size_version: "Click this image to show the full-size version.",
            show_hidden_content_by_x: "Show hidden content by {names}"
        });
    </script>
</body>
</html>
