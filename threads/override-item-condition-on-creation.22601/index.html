<!DOCTYPE html>
<html id="XenForo" lang="en-US" dir="LTR" class="Public NoJs LoggedOut NoSidebar  Responsive" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>

	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
	
		<meta name="viewport" content="width=device-width, initial-scale=1" />
	
	
		<base href="https://oxidemod.org/" />
		<script>
			var _b = document.getElementsByTagName('base')[0], _bH = "https://oxidemod.org/";
			if (_b && _b.href != _bH) _b.href = _bH;
		</script>
	

	<title>Solved - Override item condition on creation? | Oxide</title>
	
	<noscript><style>.JsOnly, .jsOnly { display: none !important; }</style></noscript>
	<link rel="stylesheet" href="css.php?css=xenforo,form,public&amp;style=5&amp;dir=LTR&amp;d=1548526345" />
	<link rel="stylesheet" href="css.php?css=bb_code,message,message_user_info,thread_view&amp;style=5&amp;dir=LTR&amp;d=1548526345" />
	
	

	
		<script src="js/jquery/jquery-1.11.0.min.js"></script>	
		
	<script src="js/xenforo/xenforo.js?_v=f33b43a2"></script>

	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
	<meta name="mobile-web-app-capable" content="yes" />
<link rel="icon" sizes="196x196" href="https://oxidemod.org/styles/oxide/logo.og.png" />
<link rel="apple-touch-icon" href="https://oxidemod.org/styles/oxide/logo.og.png" />
	<link rel="alternate" type="application/rss+xml" title="RSS feed for Oxide" href="forums/-/index.rss" />
		
	<link rel="next" href="threads/override-item-condition-on-creation.22601/page-2" />
	<link rel="canonical" href="https://oxidemod.org/threads/override-item-condition-on-creation.22601/" />
	<meta name="description" content="Hello,

I have been looking everywhere in the Oxide .dll files for some sort of hook or method that allows for me to modify a items condition as it's..." />	<meta property="og:site_name" content="Oxide" />
	<meta property="og:image" content="https://oxidemod.org/styles/default/xenforo/avatars/avatar_m.png" />
	<meta property="og:image" content="https://oxidemod.org/styles/oxide/logo.og.png" />
	<meta property="og:type" content="article" />
	<meta property="og:url" content="https://oxidemod.org/threads/override-item-condition-on-creation.22601/" />
	<meta property="og:title" content="Solved - Override item condition on creation?" />
	<meta property="og:description" content="Hello,

I have been looking everywhere in the Oxide .dll files for some sort of hook or method that allows for me to modify a items condition as it's..." />
	
	
	

</head>

<body class="node4 node1 node104 node105 SelectQuotable">




<div id="headerMover">
	<div id="headerProxy"></div>

<div id="content" class="thread_view">
	<div class="pageWidth">
		<div class="pageContent">
			
			
			

			

			
			
				<div class="breadBoxTop ">
					
					

<nav>
	
		
			
				
			
		
			
				
			
		
			
				
			
		
			
				
			
		
	

	<fieldset class="breadcrumb">			
		<div class="boardTitle"><strong>Oxide</strong></div>
		
		<span class="crumbs">
			
				

					
						<span class="crust selectedTabCrumb" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
							<a href="https://oxidemod.org/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Forums</span></a>
							<span class="arrow"><span>&gt;</span></span>
						</span>
					

					
						
							<span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
								<a href="https://oxidemod.org/#oxide-project.1" class="crumb" rel="up" itemprop="url"><span itemprop="title">Oxide Project</span></a>
								<span class="arrow"><span>&gt;</span></span>
							</span>
						
							<span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
								<a href="https://oxidemod.org/categories/archive.104/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Archive</span></a>
								<span class="arrow"><span>&gt;</span></span>
							</span>
						
							<span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
								<a href="https://oxidemod.org/categories/plugin-development.105/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Plugin Development</span></a>
								<span class="arrow"><span>&gt;</span></span>
							</span>
						
							<span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
								<a href="https://oxidemod.org/forums/rust-development.4/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Rust Development</span></a>
								<span class="arrow"><span>&gt;</span></span>
							</span>
						
					
				
			
		</span>
	</fieldset>
</nav>
				</div>
			
			
	
			



			
				

						
			
			
			
						
						
													
								<!-- h1 title, description -->
								<div class="titleBar">
									
									<h1>
										
											
												<span class="prefix prefixGreen">Solved</span> <a href="https://oxidemod.org/threads/override-item-condition-on-creation.22601/">Override item condition on creation?</a>
											
										
									</h1>

									<p id="pageDescription" class="muted ">
	Discussion in '<a href="forums/rust-development.4/">Rust Development</a>' started by <a class="username" dir="auto">Evano</a>, <a href="threads/override-item-condition-on-creation.22601/"><span class="DateTime" title="Dec 22, 2016 at 12:19 PM">Dec 22, 2016</span></a>.
</p>
								</div>
							
						
						
						
						

						

	

























	




<div class="pageNavLinkGroup">
	<div class="linkGroup SelectionCountContainer">
		
		
	</div>

	


<div class="PageNav"
	data-page="1"
	data-range="2"
	data-start="2"
	data-end="2"
	data-last="2"
	data-sentinel="{{sentinel}}"
	data-baseurl="threads/override-item-condition-on-creation.22601/page-{{sentinel}}">
	
	
	<nav>
		
		
		<a href="threads/override-item-condition-on-creation.22601/" class="currentPage " rel="start">1</a>
		
		
		
		
		
		
		
		<a href="threads/override-item-condition-on-creation.22601/page-2" class="">2</a>
		
		
			<a href="threads/override-item-condition-on-creation.22601/page-2" class="text">Next &gt;</a>
			
		
	</nav>	
	
	
</div>

</div>






<form action="inline-mod/post/switch" method="post"
	class="InlineModForm section"
	data-cookieName="posts"
	data-controls="#InlineModControls"
	data-imodOptions="#ModerationSelect option">

	<ol class="messageList" id="messageList">
		
			
				


<li id="post-278244" class="message   " data-author="Evano">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Evano" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Evano</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					Hello,<br />
<br />
I have been looking everywhere in the Oxide .dll files for some sort of hook or method that allows for me to modify a items condition as it&#039;s created in a Barrel/Crate.<br />
<br />
I&#039;m still rather new to learning C# so any guidance would be greatly appreciated!<br />
<br />
Regards,
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Evano</a>,</span>
					<a href="threads/override-item-condition-on-creation.22601/" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 22, 2016 at 12:19 PM">Dec 22, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/override-item-condition-on-creation.22601/" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/278244/permalink">#1</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-278253" class="message   " data-author="Austinv900">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Austinv900" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Austinv900</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					I don&#039;t believe your answer is gonna be in the oxide files. Try looking at docs.oxidemod.org if not there you need to look inside the assembly for rust
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Austinv900</a>,</span>
					<a href="threads/override-item-condition-on-creation.22601/#post-278253" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 22, 2016 at 1:33 PM">Dec 22, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/override-item-condition-on-creation.22601/#post-278253" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/278253/permalink">#2</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-278256" class="message   " data-author="FuJiCuRa">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="FuJiCuRa" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">FuJiCuRa</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					Basic example:<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>void OnItemAddedToContainer(ItemContainer container, Item item)
{
    if (container == null || item == null) return;
    if (item.hasCondition)
        item.condition = 100f;
}</pre>
</div>
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">FuJiCuRa</a>,</span>
					<a href="threads/override-item-condition-on-creation.22601/#post-278256" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 22, 2016 at 1:54 PM">Dec 22, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/override-item-condition-on-creation.22601/#post-278256" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/278256/permalink">#3</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-278353" class="message   " data-author="Evano">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Evano" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Evano</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					@Fujukura - I had very similar code to that but all it would do is repair the item basically if it was placed into a container of any kind. However I didn&#039;t have null checks.<br />
<br />
Here was the code I used.<br />
<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>
void OnItemAddedToContainer(ItemContainer container, Item item)
{
            item.condition = item.maxCondition;
            //Puts(&quot;OnItemAddedToContainer works!&quot;);
}
</pre>
</div>
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Evano</a>,</span>
					<a href="threads/override-item-condition-on-creation.22601/#post-278353" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 22, 2016 at 8:38 PM">Dec 22, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/override-item-condition-on-creation.22601/#post-278353" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/278353/permalink">#4</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-279199" class="message   " data-author="EinTime">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="EinTime" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">EinTime</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					Evano what exactly are you trying to do? Fujikura&#039;s code will repair an item to full condition.<br />
<br />
If you wanted that item at half condition you would change the line item.condition = 100f   to    item.condition = 50f;<br />
<br />
Are you trying to do something other than that?
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">EinTime</a>,</span>
					<a href="threads/override-item-condition-on-creation.22601/#post-279199" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 25, 2016 at 8:57 PM">Dec 25, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/override-item-condition-on-creation.22601/#post-279199" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/279199/permalink">#5</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-279200" class="message   " data-author="Evano">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Evano" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Evano</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					Yes, I&#039;m trying to  adjust their condition when they&#039;re created in a LootContainer i.e Barrels/Crates the code above just adjusts the condition to max when it&#039;s placed in ANY container. So a player can put a broken AK in a small wooden box and it would be repaired. I need items specifically to be max condition when they&#039;re created in a Barrel/Crate to override Garry&#039;s changes in a previous devblog. does that make sense? I can word things confusing sometimes. :S<br />
[DOUBLEPOST=1482699958][/DOUBLEPOST]<img src="proxy.php?image=https%3A%2F%2Fi.gyazo.com%2F599f7ffbef90f78dc7346c83fc79fc42.png&amp;hash=9d19260078978fe655435e2cd49d6ef8" class="bbCodeImage LbImage" alt="[&#x200B;IMG]" data-url="https://i.gyazo.com/599f7ffbef90f78dc7346c83fc79fc42.png" />
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Evano</a>,</span>
					<a href="threads/override-item-condition-on-creation.22601/#post-279200" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 25, 2016 at 9:03 PM">Dec 25, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/override-item-condition-on-creation.22601/#post-279200" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/279200/permalink">#6</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-279202" class="message   " data-author="EinTime">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="EinTime" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">EinTime</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					Ah! Ok got it. Try this:<br />
<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>void OnItemAddedToContainer(ItemContainer container, Item item)
        {
            if(container == null || item == null) return;
            if(container.entityOwner &amp;&amp; !(container.entityOwner is LootContainer)) return;
            if(item.owners.Count != 0) return;
            if(item.hasCondition)
                item.condition = 100f;
        }</pre>
</div>The item container is not the actual box. Item containers are things that are &#039;possessed&#039; by StorageContainers or Players. LootContainer is derived from StorageContainer and is the type that refers to all barrels/world spawn boxes.<br />
<br />
So by checking if the container.entityOwner is a LootContainer we are basically saying, &quot;Is the thing that owns this ItemContainer a world spawn loot box or barrel? If not, return&quot;<br />
<br />
If instead we checked if it was a StorageContainer then we could check for all player created loot boxes as well.<br />
<br />
Hope this helps!<br />
[DOUBLEPOST=1482700373][/DOUBLEPOST]However, do note that if a player places an item inside of a LootContainer (a barrel) it will still affect it&#039;s condition. (A player places a Broken AK inside a barrel it&#039;s going to repair it).<br />
<br />
To fix that you can put this line in there (before u set the items condition):  if(item.owners.Count != 0) return;<br />
<br />
Items that are created by the server dont have an owner yet (to my knowledge). So if it&#039;s an item with an owner, dont repair it.<br />
<br />
Let me know if there are any problems!
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">EinTime</a>,</span>
					<a href="threads/override-item-condition-on-creation.22601/#post-279202" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 25, 2016 at 9:09 PM">Dec 25, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/override-item-condition-on-creation.22601/#post-279202" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/279202/permalink">#7</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-279203" class="message   " data-author="Evano">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Evano" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Evano</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					Wow very insightful! I will give it a try when I get home. Happy holidays!
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Evano</a>,</span>
					<a href="threads/override-item-condition-on-creation.22601/#post-279203" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 25, 2016 at 9:13 PM">Dec 25, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/override-item-condition-on-creation.22601/#post-279203" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/279203/permalink">#8</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-279207" class="message   " data-author="Evano">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Evano" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Evano</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					Okay <a href="https://oxidemod.org/members/182462/" class="username" data-user="182462, @EinTime">@EinTime</a> I tried it and it compiled but it doesn&#039;t seem to be changing the condition of anything. I even tried to be a little more specific in the code by added.<br />
<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>
if(container.entityOwner is LootContainer &amp;&amp; item.hasCondition)
                item.condition = 100f;
</pre>
</div>Good news is the check for player storage is working, just not the LootContainers.<br />
<br />
I&#039;m still new to C# but now that I think of it do you think this could be the problem?<br />
<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>
if(item.owners.Count != 0) return;
</pre>
</div>If LootContainer is a owner wouldn&#039;t that cause a problem? Or am I reading it wrong?
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Evano</a>,</span>
					<a href="threads/override-item-condition-on-creation.22601/#post-279207" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 25, 2016 at 9:54 PM">Dec 25, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/override-item-condition-on-creation.22601/#post-279207" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/279207/permalink">#9</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-279210" class="message   " data-author="EinTime">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="EinTime" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">EinTime</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					If it&#039;s not changing the condition then it means that one of our if statements is returning. Instead of just returning can you do a Puts(&quot;This doesnt work&quot;) under the if so we can find which one it is.<br />
<br />
An easier solution might also be to use the oxide hook:<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>void OnLootEntity(BasePlayer player, BaseEntity entity)
{
    Puts(&quot;OnLootEntity works!&quot;);
}</pre>
</div>You could cast that entity to a LootContainer (LootContainer container = entity as LootContainer), check if it&#039;s null and, if not, set the condition of all items inside to 100.<br />
[DOUBLEPOST=1482703250][/DOUBLEPOST]Sorry I can&#039;t test them my self, my server only drops components from lootcontainers. Best I can do is maybes, haha<br />
[DOUBLEPOST=1482703355][/DOUBLEPOST]Exact code for that would be:<br />
<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>void OnLootEntity(BasePlayer player, BaseEntity entity)
        {
            LootContainer container = entity as LootContainer;
            if(container)
            {
                foreach(var item in container.inventory.itemList)
                {
                    item.condition = 100f;
                }
            }
        }</pre>
</div>You might also want to do some checks to make sure the LootContainer has an inventory, and that each item inside isnt null, etc.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">EinTime</a>,</span>
					<a href="threads/override-item-condition-on-creation.22601/#post-279210" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 25, 2016 at 9:59 PM">Dec 25, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/override-item-condition-on-creation.22601/#post-279210" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/279210/permalink">#10</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-279213" class="message   " data-author="Evano">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Evano" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Evano</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="EinTime">
	<aside>
		
			<div class="attribution type">EinTime said:
				
					<a href="goto/post?id=279210#post-279210" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">If it&#039;s not changing the condition then it means that one of our if statements is returning. Instead of just returning can you do a Puts(&quot;This doesnt work&quot;) under the if so we can find which one it is.<br />
<br />
An easier solution might also be to use the oxide hook:<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>void OnLootEntity(BasePlayer player, BaseEntity entity)
{
    Puts(&quot;OnLootEntity works!&quot;);
}</pre>
</div>You could cast that entity to a LootContainer (LootContainer container = entity as LootContainer), check if it&#039;s null and, if not, set the condition of all items inside to 100.<br />
[DOUBLEPOST=1482703250][/DOUBLEPOST]Sorry I can&#039;t test them my self, my server only drops components from lootcontainers. Best I can do is maybes, haha<br />
[DOUBLEPOST=1482703355][/DOUBLEPOST]Exact code for that would be:<br />
<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>void OnLootEntity(BasePlayer player, BaseEntity entity)
        {
            LootContainer container = entity as LootContainer;
            if(container)
            {
                foreach(var item in container.inventory.itemList)
                {
                    item.condition = 100f;
                }
            }
        }</pre>
</div>You might also want to do some checks to make sure the LootContainer has an inventory, and that each item inside isnt null, etc.</div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>Do you put it after the method, or under the last if in the method? Because I put it under the last if and I occasionally got spam in the console but I don&#039;t know how to use that information to find out what statement is the cause of the problem.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Evano</a>,</span>
					<a href="threads/override-item-condition-on-creation.22601/#post-279213" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 25, 2016 at 10:12 PM">Dec 25, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/override-item-condition-on-creation.22601/#post-279213" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/279213/permalink">#11</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-279215" class="message   " data-author="EinTime">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="EinTime" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">EinTime</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					For example, instead of:<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>if(container.entityOwner &amp;&amp; !(container.entityOwner is LootContainer)) return;</pre>
</div>Do<br />
<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>if(container.entityOwner == null)
{
     Puts(&quot;Entity Owner is Null&quot;);
     return;
}
if(!(container.entityOwner is LootContainer))
{
     Puts(&quot;Entity is not LootContainer&quot;);
     return;
}</pre>
</div>Just so we can see which if statement isnt passing.<br />
<br />
However, I think that second approach I posted may be the better one.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">EinTime</a>,</span>
					<a href="threads/override-item-condition-on-creation.22601/#post-279215" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 25, 2016 at 10:15 PM">Dec 25, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/override-item-condition-on-creation.22601/#post-279215" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/279215/permalink">#12</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-279217" class="message   " data-author="Evano">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Evano" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Evano</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					Okay I did that, here&#039;s the code so far.<br />
<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>
void OnItemAddedToContainer(ItemContainer container, Item item)
        {
            if(container == null || item == null)return;
          
            if(container.entityOwner == null)
            {
                Puts(&quot;Entity Owner is Null&quot;);
                return;
            }
            if(!(container.entityOwner is LootContainer))
            {
                Puts(&quot;Entity is not LootContainer&quot;);
                return;
            }
            if(item.owners.Count != 0) return;
            if(container.entityOwner is LootContainer &amp;&amp; item.hasCondition)
                item.condition = 100f;
        }
</pre>
</div>And it&#039;s returning &quot;Entity Owner is Null&quot; Whenever I break a barrel or reload LootConfig. So I assume the check for Owner is causing the hangup.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Evano</a>,</span>
					<a href="threads/override-item-condition-on-creation.22601/#post-279217" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 25, 2016 at 10:20 PM">Dec 25, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/override-item-condition-on-creation.22601/#post-279217" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/279217/permalink">#13</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-279218" class="message   " data-author="EinTime">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="EinTime" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">EinTime</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					Hmm, it&#039;s odd that the owner of the item container would be null. To be honest I have no idea why.<br />
<br />
I think the better approach would be to go with the OnLootEntity hook. Also, who knows if the OnItemAddedToContainer hook is even called when the map is spawned and item&#039;s are first placed. Since it&#039;s during map generation it may be before oxide hooks in? Who knows. But yea, either way, OnLootEntity will be the safer/better option. Give that a try and let me know if it works.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">EinTime</a>,</span>
					<a href="threads/override-item-condition-on-creation.22601/#post-279218" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 25, 2016 at 10:25 PM">Dec 25, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/override-item-condition-on-creation.22601/#post-279218" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/279218/permalink">#14</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-279219" class="message   " data-author="Evano">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Evano" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Evano</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					Wouldn&#039;t that only set condition of items when they&#039;re looted? Also something just occurred to me, aren&#039;t player entities set to LootContainer on death?
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Evano</a>,</span>
					<a href="threads/override-item-condition-on-creation.22601/#post-279219" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 25, 2016 at 10:28 PM">Dec 25, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/override-item-condition-on-creation.22601/#post-279219" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/279219/permalink">#15</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-279265" class="message   " data-author="EinTime">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="EinTime" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">EinTime</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					I don&#039;t believe that player&#039;s are set to LootContainer or even StorageContainer on death. Remember there is a big difference between LootContainer (the derived class that barrels and boxes use) and ItemContainer. All BaseEntities have the functionality to be looted. When players die that lootcontainer (their inventory) is then able to be looted.<br />
<br />
As for it only working when players open the barrel, is that a problem?<br />
<br />
I believe that OnLootContainer is called when the player opens a loot container, and not when they extract or deposit loot into it, but I could be wrong about that. OnLootContainer has a BaseEntity parameter, which should be the entity that is being lootEr (and not it&#039;s container)<br />
<br />
One more thing: regarding that null reference you were getting prior. Try just forcing a GetComponent&lt;BaseEntity&gt;() on the loot container. May work may not =P
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
			<div class="editDate">
			
				Last edited by a moderator: <span class="DateTime" title="Dec 26, 2016 at 1:56 AM">Dec 26, 2016</span>
			
			</div>
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">EinTime</a>,</span>
					<a href="threads/override-item-condition-on-creation.22601/#post-279265" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 26, 2016 at 1:30 AM">Dec 26, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/override-item-condition-on-creation.22601/#post-279265" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/279265/permalink">#16</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-279270" class="message   " data-author="Evano">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Evano" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Evano</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					Yeah I&#039;m not having luck with OnLootEntity either and no that&#039;s not a problem, I misunderstood. As for the GetComponent&lt;BaseEntity&gt;() I&#039;m not familiar with this, did you find this in the .dll? And how do you mean by force?
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Evano</a>,</span>
					<a href="threads/override-item-condition-on-creation.22601/#post-279270" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 26, 2016 at 1:56 AM">Dec 26, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/override-item-condition-on-creation.22601/#post-279270" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/279270/permalink">#17</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-279271" class="message   " data-author="EinTime">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="EinTime" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">EinTime</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="Evano">
	<aside>
		
			<div class="attribution type">Evano said:
				
					<a href="goto/post?id=279270#post-279270" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">Yeah I&#039;m not having luck with OnLootEntity either and no that&#039;s not a problem, I misunderstood. As for the GetComponent&lt;BaseEntity&gt;() I&#039;m not familiar with this, did you find this in the .dll? And how do you mean by force?</div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>GetComponent&lt;T&gt;() is a unity method. It will get any Type which derives from component that is attached to the same game object as the script that is calling it. So, if ItemContainer is attached to the same GameObject as the BaseEntity that has that loot container you may be able to get a reference to that BaseEntity directly by using GetComponent. Try this,<br />
<br />
BaseEntity be = container.GetComponent&lt;BaseEntity&gt;();<br />
<br />
This will only work if container is indeed a monobehaviour (which I&#039;m not sure is true. I&#039;m not at a computer and can&#039;t check)
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">EinTime</a>,</span>
					<a href="threads/override-item-condition-on-creation.22601/#post-279271" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 26, 2016 at 2:01 AM">Dec 26, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/override-item-condition-on-creation.22601/#post-279271" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/279271/permalink">#18</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-279274" class="message   " data-author="FuJiCuRa">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="FuJiCuRa" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">FuJiCuRa</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="Evano">
	<aside>
		
			<div class="attribution type">Evano said:
				
					<a href="goto/post?id=279200#post-279200" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">Yes, I&#039;m trying to  adjust their condition when they&#039;re created in a LootContainer i.e Barrels/Crates the code above just adjusts the condition to max when it&#039;s placed in ANY container. So a player can put a broken AK in a small wooden box and it would be repaired. I need items specifically to be max condition when they&#039;re created in a Barrel/Crate to override Garry&#039;s changes in a previous devblog. does that make sense? I can word things confusing sometimes. :S<br />
[DOUBLEPOST=1482699958][/DOUBLEPOST]<img src="proxy.php?image=https%3A%2F%2Fi.gyazo.com%2F599f7ffbef90f78dc7346c83fc79fc42.png&amp;hash=9d19260078978fe655435e2cd49d6ef8" class="bbCodeImage LbImage" alt="[&#x200B;IMG]" data-url="https://i.gyazo.com/599f7ffbef90f78dc7346c83fc79fc42.png" /></div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>Am i right you trying to revert the changes from DevBlog 85???? Nize, it was created over a year ago <img src="styles/default/xenforo/clear.png" class="mceSmilieSprite mceSmilie1" alt=":)" title="Smile    :)" /><br />
<br />
when you search for a solution for this, you need to find out, how its done <img src="styles/default/xenforo/clear.png" class="mceSmilieSprite mceSmilie2" alt=";)" title="Wink    ;)" /><br />
All before leads you maybe into a direction, but sure not the right.<br />
<br />
How its done currently by the game:<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>// LootContainer
public virtual void PopulateLoot()
{
    if (this.lootDefinition == null)
    {
        return;
    }
    for (int i = 0; i &lt; this.maxDefinitionsToSpawn; i++)
    {
        this.lootDefinition.SpawnIntoContainer(this.inventory);
    }
    if (this.SpawnType == LootContainer.spawnType.ROADSIDE || this.SpawnType == LootContainer.spawnType.TOWN)
    {
        foreach (Item current in this.inventory.itemList)
        {
            if (current.hasCondition)
            {
                current.condition = UnityEngine.Random.Range(current.info.condition.foundCondition.fractionMin, current.info.condition.foundCondition.fractionMax) * current.info.condition.max;
            }
        }
    }
    if (this.distributeFragments)
    {
        int num = 1;
        for (int j = 0; j &lt; this.inventory.capacity; j++)
        {
            Item slot = this.inventory.GetSlot(j);
            if (slot == null)
            {
                break;
            }
            num += this.ScoreForRarity(slot.info.rarity);
        }
    }
}
</pre>
</div>When you want to revert it, you need to to check for &quot;OnEntitySpawned&quot; for LootContainers.<br />
Afterwards you might need to wait 1 or 2 ticks (NextTick), to let the &quot;PopulateLoot&quot; function finish its job.<br />
<br />
Then you could run the same thing like it did, but reverting it to default, like in example:<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>    LootContainer container = entity.GetComponent&lt;LootContainer&gt;();
    if (container.SpawnType == LootContainer.spawnType.ROADSIDE || container.SpawnType == LootContainer.spawnType.TOWN)
    {
        foreach (Item current in container.inventory.itemList)
        {
            if (current.hasCondition)
            {
                current.condition = current.info.condition.max;
            }
        }
    }</pre>
</div>
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">FuJiCuRa</a>,</span>
					<a href="threads/override-item-condition-on-creation.22601/#post-279274" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 26, 2016 at 2:09 AM">Dec 26, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/override-item-condition-on-creation.22601/#post-279274" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/279274/permalink">#19</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-279286" class="message   " data-author="Evano">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Evano" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Evano</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					Okay yeah, I saw that when I was digging through the .dll but I was apparently using it wrong.<br />
<br />
So you&#039;re saying I have check for OnEntitySpawned on a tick and THEN execute code like in your example? Back to the drawing board, I have more stuff to look up then I have been using the .dll files and other plugins for reference.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Evano</a>,</span>
					<a href="threads/override-item-condition-on-creation.22601/#post-279286" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 26, 2016 at 3:35 AM">Dec 26, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/override-item-condition-on-creation.22601/#post-279286" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/279286/permalink">#20</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
		
	</ol>

	

	

</form>


	<div class="pageNavLinkGroup">
		
			
				<div class="linkGroup">
					
				</div>
			
			<div class="linkGroup" style="display: none"><a href="javascript:" class="muted JsOnly DisplayIgnoredContent Tooltip" title="Show hidden content by ">Show Ignored Content</a></div>

			


<div class="PageNav"
	data-page="1"
	data-range="2"
	data-start="2"
	data-end="2"
	data-last="2"
	data-sentinel="{{sentinel}}"
	data-baseurl="threads/override-item-condition-on-creation.22601/page-{{sentinel}}">
	
	
	<nav>
		
		
		<a href="threads/override-item-condition-on-creation.22601/" class="currentPage " rel="start">1</a>
		
		
		
		
		
		
		
		<a href="threads/override-item-condition-on-creation.22601/page-2" class="">2</a>
		
		
			<a href="threads/override-item-condition-on-creation.22601/page-2" class="text">Next &gt;</a>
			
		
	</nav>	
	
	
</div>

		
	</div>












	


												
												
					
			
						
			
						
			


			<footer>
				


<div class="footer">
		<div class="pageContent">
			
            
            
            </div>
			
		
			
			
			<span class="helper"></span>
			<ul class="footerLinks">
			
				
				<li><a href="https://oxidemod.org/terms/">Terms and Rules</a></li>
				
				
				<li><a href="https://umod.org/community" target="_blank">Contact Us</a></li>
			
			</ul>
			
			<span class="helper"></span>
		</div>
</div>

			</footer>
		</div>
	</div>
</div>

<header>
	


<div id="header">
	<div class="headerWidth">
		<div id="logoBlock">
			
			
			<div id="logo"><a href="https://oxidemod.org/">
				<span></span>
				<img src="styles/oxide/logo.png" alt="Oxide" />
			</a></div>
			
			
			<span class="helper"></span>

</div>
		


<div id="navigation" class="">
	<div class="pageContent">
		<nav>
			<div class="navTabs">
				<ul class="publicTabs">

					
					

					
					

					
					
						<li class="navTab forums Popup PopupControl PopupClosed PopupContainerControl">
							<a href="https://oxidemod.org/" class="navLink" rel="Menu">Forums</a>

							
						</li>
					

					<li class="navTab PopupClosed">
	<a href="https://umod.org/documentation" class="navLink">Docs</a>
</li>


					
					
						
							<li class="navTab Popup PopupControl PopupClosed PopupContainerControl">

							<a href="https://oxidemod.org/downloads/" class="navLink" rel="Menu"> Downloads </a>

							
						</li>
						
					
						
							<li class="navTab Popup PopupControl PopupClosed PopupContainerControl">

							<a href="https://oxidemod.org/plugins/" class="navLink" rel="Menu"> Plugins </a>

							
						</li>
						
					
					

					
					

					
					

					
					<li class="navTab selected"><div class="tabLinks"></div></li>
				</ul>

				
				
			</div>

			<span class="helper"></span>
		</nav>
	</div>
</div>
	</div>
</div>

	
	
</header>

</div>

<script>


jQuery.extend(true, XenForo,
{
	visitor: { user_id: 0 },
	serverTimeInfo:
	{
		now: 1548538208,
		today: 1548460800,
		todayDow: 6
	},
	_lightBoxUniversal: "0",
	_enableOverlays: "1",
	_animationSpeedMultiplier: "1",
	_overlayConfig:
	{
		top: "10%",
		speed: 200,
		closeSpeed: 100,
		mask:
		{
			color: "rgb(255, 255, 255)",
			opacity: "0.6",
			loadSpeed: 200,
			closeSpeed: 100
		}
	},
	_ignoredUsers: [],
	_loadedScripts: {"thread_view":true,"message":true,"bb_code":true,"message_user_info":true},
	_cookieConfig: { path: "/", domain: ".oxidemod.org", prefix: "ih_xfid_"},
	_csrfToken: "",
	_csrfRefreshUrl: "login/csrf-token-refresh",
	_jsVersion: "f33b43a2"
});
jQuery.extend(XenForo.phrases,
{
	cancel: "Cancel",

	a_moment_ago:    "A moment ago",
	one_minute_ago:  "1 minute ago",
	x_minutes_ago:   "%minutes% minutes ago",
	today_at_x:      "Today at %time%",
	yesterday_at_x:  "Yesterday at %time%",
	day_x_at_time_y: "%day% at %time%",

	day0: "Sunday",
	day1: "Monday",
	day2: "Tuesday",
	day3: "Wednesday",
	day4: "Thursday",
	day5: "Friday",
	day6: "Saturday",

	_months: "January,February,March,April,May,June,July,August,September,October,November,December",
	_daysShort: "Sun,Mon,Tue,Wed,Thu,Fri,Sat",

	following_error_occurred: "The following error occurred",
	server_did_not_respond_in_time_try_again: "The server did not respond in time. Please try again.",
	logging_in: "Logging in",
	click_image_show_full_size_version: "Click this image to show the full-size version.",
	show_hidden_content_by_x: "Show hidden content by {names}"
});




</script>




</body>
</html>