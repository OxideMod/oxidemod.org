<!DOCTYPE html>
<html lang="en-US" dir="LTR" class="Public NoJs LoggedOut NoSidebar Responsive">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <base href="" />
    <title>Oxide - Data based on userID question</title>
    <noscript>
        <style>
            .JsOnly,
            .jsOnly {
                display: none !important;
            }
        </style>
    </noscript>
    <script src="/assets/js/jquery/jquery-1.11.0.min.js"></script>
    <script src="/assets/js/xenforo/xenforo.js?_v=f33b43a2"></script>
    <link rel="canonical" href="" />
    <link rel="stylesheet" href="/assets/default.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" />
    <link rel="icon" sizes="196x196" href="/assets/styles/oxide/logo.og.png" />
    <link rel="apple-touch-icon" href="/assets/styles/oxide/logo.og.png" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="description" content="Oxide is an abstracted, modular, and extensible mod and plugin framework for any game that uses .NET" />
    <meta property="og:site_name" content="Oxide" />
    <meta property="og:image" content="/assets/styles/oxide/logo.og.png" />
    <meta property="og:url" content="" />
    <meta property="og:title" content="Oxide - Data based on userID question" />
    <meta property="og:description" content="" />
</head>
<body>
    <div id="headerMover">
        <div id="headerProxy"></div>
        <div id="content" class="forum_list">
            <div class="pageWidth">
                <div class="pageContent">
                    <div class="breadBoxTop">
    <nav>
        <fieldset class="breadcrumb">
            <div class="boardTitle"><strong>Oxide</strong></div>
            <span class="crumbs">
                <span class="crust">
                    <a href="/" class="crumb" rel="up" itemprop="url">
                        <span itemprop="title">Forums</span>
                    </a>
                    <span class="arrow"></span>
                </span>
                
                    
                    <span class="crust">
                        <a href="/forums/plugin-development.105/" class="crumb" rel="up" itemprop="url">
                            <span itemprop="title">Plugin Development</span>
                        </a>
                        <span class="arrow"></span>
                    </span>
                    
                
                    
                    <span class="crust">
                        <a href="/forums/rust-development.4/" class="crumb" rel="up" itemprop="url">
                            <span itemprop="title">Rust Development</span>
                        </a>
                        <span class="arrow"></span>
                    </span>
                    
                
            </span>
        </fieldset>
    </nav>
</div>

<div class="titleBar">
    <h1>
        <a href="/threads/data-based-on-userid-question.30390/">Data based on userID question</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="/forums/rust-development.4/">Rust Development</a>' started by <a class="username"
            dir="auto">FireBurst</a>, <a href="/threads/data-based-on-userid-question.30390/"><span class="DateTime" title="Apr 26, 2018 at 2:00 AM">Apr 26,
                2018</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-397784" class="message" data-author="FireBurst">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="FireBurst" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">FireBurst</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Hi. im novice at programming and I see most databases from plugins use a simple data file. I am trying to get a
                        file for each players (data_0123456789.json, where 0123456789 is the playerid). I looked at the bank plugin which uses a bank id for each player but I get lost very fast with
                        all the items around which I won&#039;t need to use.<br />
                        <br /> I simply want to have a profile for each player: name, last connect, custominfos, etc I want to add the infos myself and be able to retrieve/change them. I don&#039;t
                        know if I need to use the simple data in oxide docs or its more complicated than that (looks like it).<br />
                        <br /> Do I need to use this<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>try
                { //get Player info data
                    playerinfoData = Interface.Oxide.DataFileSystem.ReadObject&lt;Dictionary&lt;ulong, Dictionary&lt;string, PlayerInfoData&gt;&gt;&gt;(&quot;PlayerInfos\\info_&quot;+ player.userID);
                }
                catch
                {
                    playerinfoData = new Dictionary&lt;ulong, Dictionary&lt;string, PlayerInfoData&gt;&gt;();
                }</pre>
                        </div>How do I retrieve, for example, a custominfo in a specific playerid data? :/ I wish I had a complete tutorial somewhere explaining, im having a hard time trying to
                        understand everything in the plugins made. thanks <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">FireBurst</a>,</span>
                        <a href="/threads/data-based-on-userid-question.30390/" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 26, 2018 at 2:00 AM">Apr 26, 2018</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/data-based-on-userid-question.30390/" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/397784/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-397787" class="message" data-author="Ankawi">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Ankawi" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Ankawi</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Check out KDRGUI on that one. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Ankawi</a>,</span>
                        <a href="/threads/data-based-on-userid-question.30390/#post-397787" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 26, 2018 at 2:09 AM">Apr 26, 2018</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/data-based-on-userid-question.30390/#post-397787" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/397787/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-397788" class="message" data-author="FireBurst">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="FireBurst" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">FireBurst</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Ankawi">
                            <aside>
                                <div class="attribution type">Ankawi said: <a href="#post-397787" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Check out KDRGUI on that one.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Thanks for your reply. I cannot seem to find KDRGUI in search :/ is it in rust plugins or gone? or maybe in universal plugins?<br />
                        <br /> EDIT nvm it was <a href="https://oxidemod.org/plugins/kdr-gui.2042/" class="internalLink">KDR GUI</a> ill have a look <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="editDate">Last edited by a moderator: <span class="DateTime" title="Apr 26, 2018 at 2:30 AM">Apr 26, 2018</span>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">FireBurst</a>,</span>
                        <a href="/threads/data-based-on-userid-question.30390/#post-397788" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 26, 2018 at 2:21 AM">Apr 26, 2018</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/data-based-on-userid-question.30390/#post-397788" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/397788/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-397790" class="message" data-author="Kappasaurus">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Kappasaurus" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Kappasaurus</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="FireBurst">
                            <aside>
                                <div class="attribution type">FireBurst said: <a href="#post-397788" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Thanks for your reply. I cannot seem to find KDRGUI in search :/ is it in rust plugins or gone? or maybe in universal plugins?</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Looking through a plugin can be confusing. While it would be better to learn fundamentals of programming before making plugins, but here&#039;s a small data access
                        example. There&#039;s no reason to make separate files in this case as far as I can tell.<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>        private static bool Changed { get; set; }        private StoredData Data { get; set; }        private void Init()
        {
            Data = Interface.Oxide.DataFileSystem.ReadObject&lt;StoredData&gt;(Name);            Data[12345].Value = &quot;Hello, world!&quot;;
            Changed = true;            Console.WriteLine(Data[12345].Value); // Hello, world!
        }        private void OnServerSave()
        {
            if (!Changed)
            {
                return;
            }            Interface.Oxide.DataFileSystem.WriteObject(Name, Data);
            Changed = false;
        }        private void Unload() =&gt; OnServerSave();        private class StoredData
        {
            [JsonProperty(&quot;players&quot;)]
            public HashSet&lt;PlayerData&gt; Players { get; } = new HashSet&lt;PlayerData&gt;();            public PlayerData this[ulong userId]
            {
                get
                {
                    var data = Players.SingleOrDefault(x =&gt; x.UserId == userId);
                    if (data != null)
                    {
                        return data;
                    }                    data = new PlayerData(userId);
                    Players.Add(data);
                    Changed = true;
                    return data;
                }
            }            public class PlayerData
            {
                [JsonProperty(&quot;value&quot;)]
                private string _value;                public PlayerData(ulong userId)
                {
                    UserId = userId;
                }                [JsonProperty(&quot;userId&quot;)]
                public ulong UserId { get; }                [JsonIgnore]
                public string Value
                {
                    get
                    {
                        return _value;     
                    }
                    set
                    {
                        _value = value;
                        Changed = true;
                    }
                }
            }
        }</pre>
                        </div>
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>{
  &quot;players&quot;: [
    {
      &quot;userId&quot;: 12345,
      &quot;value&quot;: &quot;Hello, world!&quot;
    }
  ]
}</pre>
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="editDate">Last edited by a moderator: <span class="DateTime" title="Apr 26, 2018 at 3:00 AM">Apr 26, 2018</span>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Kappasaurus</a>,</span>
                        <a href="/threads/data-based-on-userid-question.30390/#post-397790" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 26, 2018 at 2:42 AM">Apr 26, 2018</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/data-based-on-userid-question.30390/#post-397790" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/397790/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-397791" class="message" data-author="FireBurst">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="FireBurst" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">FireBurst</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Thanks alot. This is really appreciated! What do you mean there is no reason to make separate files? I believe if
                        we get plenty of players, and each player will have like 5 to 10 stats each, this could lead to slow read performance on a single file if everybody is in the same data. Or I
                        misunderstood you about what &quot;separate files&quot; means. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">FireBurst</a>,</span>
                        <a href="/threads/data-based-on-userid-question.30390/#post-397791" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 26, 2018 at 2:47 AM">Apr 26, 2018</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/data-based-on-userid-question.30390/#post-397791" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/397791/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-397792" class="message" data-author="Kappasaurus">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Kappasaurus" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Kappasaurus</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="FireBurst">
                            <aside>
                                <div class="attribution type">FireBurst said: <a href="#post-397791" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Thanks alot. This is really appreciated! What do you mean there is no reason to make separate files? I believe if we get plenty of players, and
                                        each player will have like 5 to 10 stats each, this could lead to slow read performance on a single file if everybody is in the same data. Or I misunderstood
                                        you about what &quot;separate files&quot; means.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>I think separate files per player is overkill for small amounts of data like this. If you really want better performance look at something like MySQL or SQLite. <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Kappasaurus</a>,</span>
                        <a href="/threads/data-based-on-userid-question.30390/#post-397792" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 26, 2018 at 2:48 AM">Apr 26, 2018</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/data-based-on-userid-question.30390/#post-397792" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/397792/permalink">#6</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-397795" class="message" data-author="FireBurst">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="FireBurst" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">FireBurst</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Kappasaurus">
                            <aside>
                                <div class="attribution type">Kappasaurus said: <a href="#post-397792" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">I think separate files per player is overkill for small amounts of data like this. If you really want better performance look at something like
                                        MySQL or SQLite.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Oh ok so I should simply go for a single datafile.json and store all players with all the infos in it? it won&#039;t take seconds to load/save data on each write/read?
                        ill follow your idea then. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">FireBurst</a>,</span>
                        <a href="/threads/data-based-on-userid-question.30390/#post-397795" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 26, 2018 at 3:02 AM">Apr 26, 2018</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/data-based-on-userid-question.30390/#post-397795" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/397795/permalink">#7</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-397860" class="message" data-author="Kappasaurus">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Kappasaurus" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Kappasaurus</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="FireBurst">
                            <aside>
                                <div class="attribution type">FireBurst said: <a href="#post-397795" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Oh ok so I should simply go for a single datafile.json and store all players with all the infos in it? it won&#039;t take seconds to load/save
                                        data on each write/read? ill follow your idea then.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>You&#039;re not saving it after every change, it&#039;s batched in memory, then saved periodically, it should be fine, though some will disagree. <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Kappasaurus</a>,</span>
                        <a href="/threads/data-based-on-userid-question.30390/#post-397860" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 26, 2018 at 2:58 PM">Apr 26, 2018</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/data-based-on-userid-question.30390/#post-397860" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/397860/permalink">#8</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-397919" class="message" data-author="FireBurst">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="FireBurst" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">FireBurst</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Kappasaurus">
                            <aside>
                                <div class="attribution type">Kappasaurus said: <a href="#post-397860" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">You&#039;re not saving it after every change, it&#039;s batched in memory, then saved periodically, it should be fine, though some will disagree.
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>I am experiencing an issue with the save/load data. So, basically, everytime I try to delete the datafile (userid of player), make it just like if data doesnt exist, it
                        has to create a new one. I reload the plugin, the data doesn&#039;t appear. Isn&#039;t it suppose to load and create file?<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>void Loaded()
        {
            foreach (BasePlayer player in BasePlayer.activePlayerList) {
            PlayerData2.TryLoad(player);
            }
      }</pre>
                        </div>Maybe it&#039;s because it adds the player in the HashSet list and if it&#039;s already inside, it will never update the player&#039;s data?<br />
                        <br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>static HashSet&lt;PlayerData2&gt; LoadedPlayerData2 = new HashSet&lt;PlayerData2&gt;();        #region Data
        class PlayerData2
        {
            public ulong id;
            public string name;
            public string insurance;
            public int time;
            public int wood;
            public int stone;
            public int metalfrag;
            public int hqm;            internal static void TryLoad(BasePlayer player)
            {
                if (Find(player) != null)
                    return;                PlayerData2 data = Interface.Oxide.DataFileSystem.ReadObject&lt;PlayerData2&gt;($&quot;Insurance/{player.userID}&quot;);                if (data == null || data.id == 0)
                {
                    data = new PlayerData2
                    {
                        id = player.userID,
                        name = player.displayName,
                        insurance = &quot;Level 1&quot;,
                    };
                    Interface.Oxide.DataFileSystem.WriteObject($&quot;Insurance/{player.userID}&quot;, data);
                }
                else
                    data.Update(player);                data.Save(player);
                LoadedPlayerData2.Add(data);
            }            internal void Update(BasePlayer player)
            {
                name = player.displayName;
                Save(player);
            }            internal void Save(BasePlayer player) =&gt; Interface.Oxide.DataFileSystem.WriteObject($&quot;Insurance/{player.userID}&quot;, this, true);
            internal static PlayerData2 Find(BasePlayer player)
            {                PlayerData2 data = LoadedPlayerData2.ToList().Find((p) =&gt; p.id == player.userID);                return data;
            }
        }</pre>
                        </div>Also im calling the PlayerData2.TryLoad(player);<br /> when I type a command to trigger it myself but it just creates the file with<br />
                        <br /> &quot;id&quot;: 0,<br /> &quot;name&quot;: null,<br />
                        <br /> I thought the script above checks the id = 0 and change all infos from the list then save? :/ i&#039;m surely missing something somewhere if you could help me :s<br />
                        <br /> All I want is if data file (file is userid of player) doesn&#039;t exist on plugin reload or save or whatever command I put (using the void TryLoad(BasePlayer player)),
                        then creates it. If id = 0 (new file), change all infos to what I set. I&#039;m so noob <img src="styles/default/xenforo/clear.png" class="mceSmilieSprite mceSmilie3" alt=":("
                            title="Frown    :(" />
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="editDate">Last edited by a moderator: <span class="DateTime" title="Apr 26, 2018 at 9:21 PM">Apr 26, 2018</span>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">FireBurst</a>,</span>
                        <a href="/threads/data-based-on-userid-question.30390/#post-397919" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 26, 2018 at 9:08 PM">Apr 26, 2018</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/data-based-on-userid-question.30390/#post-397919" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/397919/permalink">#9</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-397928" class="message" data-author="FireBurst">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="FireBurst" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">FireBurst</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Reloading plugin doesn&#039;t update/create the data file of the player. I noticed it only works when I edit the
                        plugin and save (reload but also recompile). It seems to scan players online and add file if doesn&#039;t exist. The TryLoad works properly only on file save. Does that mean it
                        has something to do with Hash List? Considers player loaded once, no longer check the file if corrupted or missing :/ <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">FireBurst</a>,</span>
                        <a href="/threads/data-based-on-userid-question.30390/#post-397928" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 26, 2018 at 10:09 PM">Apr 26, 2018</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/data-based-on-userid-question.30390/#post-397928" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/397928/permalink">#10</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-397937" class="message" data-author="FireBurst">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="FireBurst" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">FireBurst</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Ok after some tests, it&#039;s about the HashSet list. I tried put LoadedPlayerData2.Clear();, it worked but isnt
                        what I want (I don&#039;t want all players removed from list). So I suppose the correct line to add is LoadedPlayerData2.Remove(data); Looks like this:<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>if (data == null || data.id == 0) //Detected player data Corrupted
                {
                   LoadedPlayerData2.Remove(data);                    data = new PlayerData2
                    {
                        id = player.userID,
                        name = player.displayName,
                       insurance = &quot;Level 1&quot;,
                    };
                }</pre>
                        </div>Unfortunately the Remove doesn&#039;t solve like Clear does. Why? Am I targetting the correct data? :/ <img src="styles/default/xenforo/clear.png"
                            class="mceSmilieSprite mceSmilie3" alt=":(" title="Frown    :(" />
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">FireBurst</a>,</span>
                        <a href="/threads/data-based-on-userid-question.30390/#post-397937" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 26, 2018 at 11:08 PM">Apr 26, 2018</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/data-based-on-userid-question.30390/#post-397937" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/397937/permalink">#11</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-398063" class="message" data-author="Kappasaurus">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Kappasaurus" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Kappasaurus</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="FireBurst">
                            <aside>
                                <div class="attribution type">FireBurst said: <a href="#post-397937" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Ok after some tests, it&#039;s about the HashSet list. I tried put LoadedPlayerData2.Clear();, it worked but isnt what I want (I don&#039;t want
                                        all players removed from list). So I suppose the correct line to add is LoadedPlayerData2.Remove(data); Looks like this:<br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            <pre>if (data == null || data.id == 0) //Detected player data Corrupted
                {
                   LoadedPlayerData2.Remove(data);                    data = new PlayerData2
                    {
                        id = player.userID,
                        name = player.displayName,
                       insurance = &quot;Level 1&quot;,
                    };
                }</pre>
                                        </div>Unfortunately the Remove doesn&#039;t solve like Clear does. Why? Am I targetting the correct data? :/ <img src="styles/default/xenforo/clear.png"
                                            class="mceSmilieSprite mceSmilie3" alt=":(" title="Frown    :(" />
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Do what I said, the cost of creating new files will be more than occasionally saving one large file. That&#039;s bad design. <div class="messageTextEndMarker">&nbsp;
                        </div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Kappasaurus</a>,</span>
                        <a href="/threads/data-based-on-userid-question.30390/#post-398063" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 28, 2018 at 4:52 AM">Apr 28, 2018</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/data-based-on-userid-question.30390/#post-398063" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/398063/permalink">#12</a>
                </div>
            </div>
        </div>
    </li>
</ol>


                    <footer>
                        <div class="footer">
                            <div class="pageContent"></div>
                            <div id="copyright"><span class="concealed">Built: Wed, 27 Mar 2019 21:25:21 -0400</span></div>
                            <span class="helper"></span>
                            <ul class="footerLinks">
                                <li><a href="/terms/">Terms and Rules</a></li>
                                <li><a href="https://umod.org/community" target="_blank">Contact Us</a></li>
                            </ul>
                            <span class="helper"></span>
                        </div>
                    </footer>
                </div>
            </div>
        </div>
        <header>
            <div id="header">
                <div class="headerWidth">
                    <div id="logoBlock">
                        <div id="logo"><a href="/">
                                <span></span>
                                <img src="/assets/styles/oxide/logo.png" alt="Oxide" />
                            </a></div>
                        <span class="helper"></span>
                    </div>
                    <div id="navigation" class="">
                        <div class="pageContent">
                            <nav>
                                <div class="navTabs">
                                    <ul class="publicTabs">
                                        <li class="navTab forums Popup PopupControl PopupClosed PopupContainerControl">
                                            <a href="/" class="navLink" rel="Menu">Forums</a>
                                        </li>
                                        <li class="navTab PopupClosed">
                                            <a href="https://umod.org/documentation" class="navLink">Docs</a>
                                        </li>
                                        <li class="navTab Popup PopupControl PopupClosed PopupContainerControl">
                                            <a href="/downloads/" class="navLink" rel="Menu">Downloads</a>
                                        </li>
                                        <li class="navTab Popup PopupControl PopupClosed PopupContainerControl">
                                            <a href="/plugins/" class="navLink" rel="Menu">Plugins</a>
                                        </li>
                                        <li class="navTab selected">
                                            <div class="tabLinks"></div>
                                        </li>
                                    </ul>
                                </div>
                                <span class="helper"></span>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </header>
    </div>
    <script>
        jQuery.extend(true, XenForo, {
            visitor: {
                user_id: 0
            },
            serverTimeInfo: {
                now: 1548531785,
                today: 1548460800,
                todayDow: 6
            },
            _lightBoxUniversal: "0",
            _enableOverlays: "1",
            _animationSpeedMultiplier: "1",
            _overlayConfig: {
                top: "10%",
                speed: 200,
                closeSpeed: 100,
                mask: {
                    color: "rgb(255, 255, 255)",
                    opacity: "0.6",
                    loadSpeed: 200,
                    closeSpeed: 100
                }
            },
            _ignoredUsers: [],
            _loadedScripts: {
                "node_list": true,
                "node_category": true,
                "node_forum": true,
                "discussion_list": true,
                "wf_default": true
            },
            _cookieConfig: {
                path: "/",
                domain: ".oxidemod.org",
                prefix: "xfid_"
            },
            _jsVersion: "f33b43a2"
        });
        jQuery.extend(XenForo.phrases, {
            cancel: "Cancel",
            a_moment_ago: "A moment ago",
            one_minute_ago: "1 minute ago",
            x_minutes_ago: "%minutes% minutes ago",
            today_at_x: "Today at %time%",
            yesterday_at_x: "Yesterday at %time%",
            day_x_at_time_y: "%day% at %time%",
            day0: "Sunday",
            day1: "Monday",
            day2: "Tuesday",
            day3: "Wednesday",
            day4: "Thursday",
            day5: "Friday",
            day6: "Saturday",
            _months: "January,February,March,April,May,June,July,August,September,October,November,December",
            _daysShort: "Sun,Mon,Tue,Wed,Thu,Fri,Sat",
            following_error_occurred: "The following error occurred",
            server_did_not_respond_in_time_try_again: "The server did not respond in time. Please try again.",
            logging_in: "Logging in",
            click_image_show_full_size_version: "Click this image to show the full-size version.",
            show_hidden_content_by_x: "Show hidden content by {names}"
        });
    </script>
</body>
</html>
