<!DOCTYPE html>
<html lang="en-US" dir="LTR" class="Public NoJs LoggedOut NoSidebar Responsive">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <base href="" />
    <title>Oxide - Solved - Memory keeps going up with CUI</title>
    <noscript>
        <style>
            .JsOnly,
            .jsOnly {
                display: none !important;
            }
        </style>
    </noscript>
    <script src="/assets/js/jquery/jquery-1.11.0.min.js"></script>
    <script src="/assets/js/xenforo/xenforo.js?_v=f33b43a2"></script>
    <link rel="canonical" href="" />
    <link rel="stylesheet" href="/assets/default.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" />
    <link rel="icon" sizes="196x196" href="/assets/styles/oxide/logo.og.png" />
    <link rel="apple-touch-icon" href="/assets/styles/oxide/logo.og.png" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="description" content="Oxide is an abstracted, modular, and extensible mod and plugin framework for any game that uses .NET" />
    <meta property="og:site_name" content="Oxide" />
    <meta property="og:image" content="/assets/styles/oxide/logo.og.png" />
    <meta property="og:url" content="" />
    <meta property="og:title" content="Oxide - Solved - Memory keeps going up with CUI" />
    <meta property="og:description" content="" />
</head>
<body>
    <div id="headerMover">
        <div id="headerProxy"></div>
        <div id="content" class="forum_list">
            <div class="pageWidth">
                <div class="pageContent">
                    <div class="breadBoxTop">
    <nav>
        <fieldset class="breadcrumb">
            <div class="boardTitle"><strong>Oxide</strong></div>
            <span class="crumbs">
                <span class="crust">
                    <a href="/" class="crumb" rel="up" itemprop="url">
                        <span itemprop="title">Forums</span>
                    </a>
                    <span class="arrow"></span>
                </span>
                
                    
                    <span class="crust">
                        <a href="/forums/plugin-development.105/" class="crumb" rel="up" itemprop="url">
                            <span itemprop="title">Plugin Development</span>
                        </a>
                        <span class="arrow"></span>
                    </span>
                    
                
                    
                    <span class="crust">
                        <a href="/forums/rust-development.4/" class="crumb" rel="up" itemprop="url">
                            <span itemprop="title">Rust Development</span>
                        </a>
                        <span class="arrow"></span>
                    </span>
                    
                
            </span>
        </fieldset>
    </nav>
</div>

<div class="titleBar">
    <h1>
        <span class="prefix prefixGreen">Solved</span> <a href="/threads/memory-keeps-going-up-with-cui.17557/">Memory keeps going up with CUI</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="/forums/rust-development.4/">Rust Development</a>' started by <a class="username"
            dir="auto">athlon.89</a>, <a href="/threads/memory-keeps-going-up-with-cui.17557/"><span class="DateTime" title="Apr 23, 2016 at 5:48 PM">Apr 23,
                2016</span></a>.
    </p>
</div>
<div class="pageNavLinkGroup">
    <div class="linkGroup SelectionCountContainer">
    </div>
    <div class="PageNav" data-page="1" data-range="2" data-start="2" data-end="2" data-last="2" data-sentinel=""
        data-baseurl="threads/memory-keeps-going-up-with-cui.17557/page-">
        <nav>
            <a href="/threads/memory-keeps-going-up-with-cui.17557/" class="currentPage " rel="start">1</a>
            <a href="/threads/memory-keeps-going-up-with-cui.17557/page-2" class="">2</a>
            <a href="/threads/memory-keeps-going-up-with-cui.17557/page-2" class="text">Next &gt;</a>
        </nav>
    </div>
</div>
<ol class="messageList" id="messageList">
    <li id="post-199346" class="message" data-author="athlon.89">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="athlon.89" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">athlon.89</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Hi all, sorry for my english.<br /> After each command <b>/test</b> input, free memory on the client side is
                        reduced. How to manually remove all components by <b>CuiRawImageComponent</b>?<br /> A test case to test the memory leak.<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>using System;
using Oxide.Game.Rust.Cui;
using UnityEngine;namespace Oxide.Plugins
{
    [Info(&quot;Test&quot;, &quot;tester&quot;, 0.1)]
    [Description(&quot;For test&quot;)]    class Test : RustPlugin
    {
        [ChatCommand(&quot;test&quot;)]
        void test(BasePlayer player, string command, string[] args) {
            var elements = new CuiElementContainer();
            var mainPanel = elements.Add(new CuiPanel
            {
                CursorEnabled = true,
                Image = { Color = &quot;0.24 0.25 0.25 0.95&quot; },
                RectTransform = { AnchorMin = &quot;0.1 0.1&quot;, AnchorMax = &quot;0.4 0.4&quot; }
            });            elements.Add(new CuiButton
            {
                Button =
                {
                    Close = mainPanel,
                    Color = &quot;1.0 0.07 0.07 0.85&quot;
                },
                RectTransform =
                {
                    AnchorMin = &quot;0.95 0.95&quot;,
                    AnchorMax = &quot;0.999 1.0005&quot;
                },
                Text =
                {
                    Text = &quot;X&quot;,
                    FontSize = 8,
                    Align = TextAnchor.MiddleCenter
                }
            }, mainPanel);            for (int i = 0; i &lt; 5; i++) {
                elements.Add(new CuiElement
                {
                    Name = CuiHelper.GetGuid(),
                    Parent = mainPanel,
                    Components =
                    {
                        new CuiRawImageComponent
                        {
                            Sprite = &quot;assets/content/textures/generic/fulltransparent.tga&quot;,
                            Url = &quot;https://homepages.cae.wisc.edu/~ece533/images/airplane.png&quot;
                            //Color = &quot;1.0 1.0 1.0 1.0&quot;
                        },
                        new CuiRectTransformComponent
                        {
                            AnchorMin = &quot;0.0 0.0&quot;,
                            AnchorMax = &quot;1.0 0.9&quot;
                        }
                    }
                });
            }            CuiHelper.AddUi(player, elements);
        }
    }
}</pre>
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">athlon.89</a>,</span>
                        <a href="/threads/memory-keeps-going-up-with-cui.17557/" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 23, 2016 at 5:48 PM">Apr 23, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/memory-keeps-going-up-with-cui.17557/" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/199346/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-199477" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> You aren&#039;t destroying the existing CUI, you are just adding to it. You&#039;d need to store it in a variable
                        per player, and then destroy it when you call it again. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-199477" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 24, 2016 at 3:25 AM">Apr 24, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-199477" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/199477/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-199941" class="message" data-author="athlon.89">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="athlon.89" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">athlon.89</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> I tried to do it, but it does not work. Memory is not released.<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>class Test : RustPlugin
    {
        private CuiElementContainer elements = new CuiElementContainer();        [ChatCommand(&quot;test&quot;)]
        void test(BasePlayer player, string command, string[] args) {
            SendReply(player, elements.Count.ToString());
           
            if (elements.Count &gt; 0) {
                foreach (var elem in elements) {
                    CuiHelper.DestroyUi(player, elem.Name);
                }
                elements.Clear();
            }            var mainPanel = elements.Add(new CuiPanel
            {
                CursorEnabled = true,
                Image = { Color = &quot;0.24 0.25 0.25 0.95&quot; },
                RectTransform = { AnchorMin = &quot;0.1 0.1&quot;, AnchorMax = &quot;0.4 0.4&quot; }
            });            elements.Add(new CuiButton
            {
                Button =
                {
                    Close = mainPanel,
                    Color = &quot;1.0 0.07 0.07 0.85&quot;
                },
                RectTransform =
                {
                    AnchorMin = &quot;0.95 0.95&quot;,
                    AnchorMax = &quot;0.999 1.0005&quot;
                },
                Text =
                {
                    Text = &quot;X&quot;,
                    FontSize = 8,
                    Align = TextAnchor.MiddleCenter
                }
            }, mainPanel);            for (int i = 0; i &lt; 5; i++) {
                elements.Add(new CuiElement
                {
                    Name = CuiHelper.GetGuid(),
                    Parent = mainPanel,
                    Components =
                    {
                        new CuiRawImageComponent
                        {
                            Sprite = &quot;assets/content/textures/generic/fulltransparent.tga&quot;,
                            Url = &quot;https://homepages.cae.wisc.edu/~ece533/images/airplane.png&quot;
                            //Color = &quot;1.0 1.0 1.0 1.0&quot;
                        },
                        new CuiRectTransformComponent
                        {
                            AnchorMin = &quot;0.0 0.0&quot;,
                            AnchorMax = &quot;1.0 0.9&quot;
                        }
                    }
                });
            }            CuiHelper.AddUi(player, elements);
        }
    }</pre>
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">athlon.89</a>,</span>
                        <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-199941" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 25, 2016 at 5:52 PM">Apr 25, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-199941" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/199941/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-200219" class="message" data-author="Troubled">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Troubled" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Troubled</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Because you are still adding elements to it and not removing it.<br />
                        <br /> You have your <br /> private CuiElementContainer elements = new CuiElementContainer();<br /> See that as a list.<br /> Every time someone does the command it will add
                        new objects to that list so the list will grow bigger and bigger. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Troubled</a>,</span>
                        <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200219" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 26, 2016 at 2:59 PM">Apr 26, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200219" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/200219/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-200286" class="message" data-author="athlon.89">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="athlon.89" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">athlon.89</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Troubled">
                            <aside>
                                <div class="attribution type">Troubled said: <a href="#post-200219" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Because you are still adding elements to it and not removing it.<br />
                                        <br /> You have your<br /> private CuiElementContainer elements = new CuiElementContainer();<br /> See that as a list.<br /> Every time someone does the command
                                        it will add new objects to that list so the list will grow bigger and bigger.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>I do not understand. I use Clear () to remove all objects from the elements<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>class Test : RustPlugin
    {
        private CuiElementContainer elements = new CuiElementContainer();        [ChatCommand(&quot;test&quot;)]
        void test(BasePlayer player, string command, string[] args) {
            SendReply(player, &quot;Before clear: &quot; + elements.Count.ToString());
            if (elements.Count &gt; 0) {
                foreach (var elem in elements) {
                    CuiHelper.DestroyUi(player, elem.Name);
                }
                elements.Clear();
            }
            SendReply(player, &quot;After clear: &quot; + elements.Count.ToString());            var mainPanel = elements.Add(new CuiPanel
            {
                CursorEnabled = true,
                Image = { Color = &quot;0.24 0.25 0.25 0.95&quot; },
                RectTransform = { AnchorMin = &quot;0.1 0.1&quot;, AnchorMax = &quot;0.4 0.4&quot; }
            });            elements.Add(new CuiButton
            {
                Button =
                {
                    Close = mainPanel,
                    Color = &quot;1.0 0.07 0.07 0.85&quot;
                },
                RectTransform =
                {
                    AnchorMin = &quot;0.95 0.95&quot;,
                    AnchorMax = &quot;0.999 1.0005&quot;
                },
                Text =
                {
                    Text = &quot;X&quot;,
                    FontSize = 8,
                    Align = TextAnchor.MiddleCenter
                }
            }, mainPanel);            for (int i = 0; i &lt; 5; i++) {
                elements.Add(new CuiElement
                {
                    Name = CuiHelper.GetGuid(),
                    Parent = mainPanel,
                    Components =
                    {
                        new CuiRawImageComponent
                        {
                            Sprite = &quot;assets/content/textures/generic/fulltransparent.tga&quot;,
                            Url = &quot;https://homepages.cae.wisc.edu/~ece533/images/airplane.png&quot;
                            //Color = &quot;1.0 1.0 1.0 1.0&quot;
                        },
                        new CuiRectTransformComponent
                        {
                            AnchorMin = &quot;0.0 0.0&quot;,
                            AnchorMax = &quot;1.0 0.9&quot;
                        }
                    }
                });
            }            CuiHelper.AddUi(player, elements);
        }
    }</pre>
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">athlon.89</a>,</span>
                        <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200286" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 26, 2016 at 5:53 PM">Apr 26, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200286" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/200286/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-200295" class="message" data-author="Troubled">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Troubled" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Troubled</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="athlon.89">
                            <aside>
                                <div class="attribution type">athlon.89 said: <a href="#post-200286" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">I do not understand. I use Clear () to remove all objects from the elements<br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            <pre>class Test : RustPlugin
    {
        private CuiElementContainer elements = new CuiElementContainer();        [ChatCommand(&quot;test&quot;)]
        void test(BasePlayer player, string command, string[] args) {
            SendReply(player, &quot;Before clear: &quot; + elements.Count.ToString());
            if (elements.Count &gt; 0) {
                foreach (var elem in elements) {
                    CuiHelper.DestroyUi(player, elem.Name);
                }
                elements.Clear();
            }
            SendReply(player, &quot;After clear: &quot; + elements.Count.ToString());            var mainPanel = elements.Add(new CuiPanel
            {
                CursorEnabled = true,
                Image = { Color = &quot;0.24 0.25 0.25 0.95&quot; },
                RectTransform = { AnchorMin = &quot;0.1 0.1&quot;, AnchorMax = &quot;0.4 0.4&quot; }
            });            elements.Add(new CuiButton
            {
                Button =
                {
                    Close = mainPanel,
                    Color = &quot;1.0 0.07 0.07 0.85&quot;
                },
                RectTransform =
                {
                    AnchorMin = &quot;0.95 0.95&quot;,
                    AnchorMax = &quot;0.999 1.0005&quot;
                },
                Text =
                {
                    Text = &quot;X&quot;,
                    FontSize = 8,
                    Align = TextAnchor.MiddleCenter
                }
            }, mainPanel);            for (int i = 0; i &lt; 5; i++) {
                elements.Add(new CuiElement
                {
                    Name = CuiHelper.GetGuid(),
                    Parent = mainPanel,
                    Components =
                    {
                        new CuiRawImageComponent
                        {
                            Sprite = &quot;assets/content/textures/generic/fulltransparent.tga&quot;,
                            Url = &quot;https://homepages.cae.wisc.edu/~ece533/images/airplane.png&quot;
                            //Color = &quot;1.0 1.0 1.0 1.0&quot;
                        },
                        new CuiRectTransformComponent
                        {
                            AnchorMin = &quot;0.0 0.0&quot;,
                            AnchorMax = &quot;1.0 0.9&quot;
                        }
                    }
                });
            }            CuiHelper.AddUi(player, elements);
        }
    }</pre>
                                        </div>
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Ah sorry didn&#039;t see that. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Troubled</a>,</span>
                        <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200295" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 26, 2016 at 6:25 PM">Apr 26, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200295" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/200295/permalink">#6</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-200300" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> I don&#039;t think .Clear() does the same as .Destroy(). <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200300" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 26, 2016 at 6:29 PM">Apr 26, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200300" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/200300/permalink">#7</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-200312" class="message" data-author="Troubled">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Troubled" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Troubled</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Also isn&#039;t <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>CuiHelper.AddUi(player, elements);</pre>
                        </div> also staying in the memory? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Troubled</a>,</span>
                        <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200312" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 26, 2016 at 6:54 PM">Apr 26, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200312" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/200312/permalink">#8</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-200443" class="message" data-author="athlon.89">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="athlon.89" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">athlon.89</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Thanks for your answers guys.<br />
                        <div class="bbCodeBlock bbCodeQuote" data-author="Wulf">
                            <aside>
                                <div class="attribution type">Wulf said: <a href="#post-200300" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">I don&#039;t think .Clear() does the same as .Destroy().</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>I tried to use<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>elements = null;
GC.Collect();</pre>
                        </div>and<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>elements.RemoveRange(0, elements.Count);</pre>
                        </div>I have not found a method Destroy() for CuiElementsContainer class or List. In Unity there Destroy() method to GameObject class. <div class="messageTextEndMarker">&nbsp;
                        </div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">athlon.89</a>,</span>
                        <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200443" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 26, 2016 at 11:04 PM">Apr 26, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200443" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/200443/permalink">#9</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-200446" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="athlon.89">
                            <aside>
                                <div class="attribution type">athlon.89 said: <a href="#post-200443" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Thanks for your answers guys.<br />
                                        <br /> I tried to use<br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            <pre>elements = null;
GC.Collect();</pre>
                                        </div>and<br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            <pre>elements.RemoveRange(0, elements.Count);</pre>
                                        </div>I have not found a method Destroy() for CuiElementsContainer class or List. In Unity there Destroy() method to GameObject class.
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>I was a bit off, it&#039;s actually CuiHelper.DestroyUi(player, guiInfo). You can find a working example in my Vanish plugin, or the InfoPanel plugin by Nogrod. <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200446" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 26, 2016 at 11:15 PM">Apr 26, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200446" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/200446/permalink">#10</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-200652" class="message" data-author="athlon.89">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="athlon.89" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">athlon.89</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Wulf">
                            <aside>
                                <div class="attribution type">Wulf said: <a href="#post-200446" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">I was a bit off, it&#039;s actually CuiHelper.DestroyUi(player, guiInfo). You can find a working example in my Vanish plugin, or the InfoPanel
                                        plugin by Nogrod.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>I used the code from your <b>Vanish</b> plugin to destroy ui. But the memory is still not released<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>class Test : RustPlugin
    {
        Dictionary&lt;ulong, string&gt; GuiInfo = new Dictionary&lt;ulong, string&gt;();        [ChatCommand(&quot;test&quot;)]
        void test(BasePlayer player, string command, string[] args) {
            for (int i = 0; i &lt; 5; i++) {
                string guiInfo;
                if (GuiInfo.TryGetValue(player.userID, out guiInfo))
                    CuiHelper.DestroyUi(player, guiInfo);                var elements = new CuiElementContainer();                GuiInfo[player.userID] = CuiHelper.GetGuid();
                elements.Add(new CuiElement
                {
                    Name = GuiInfo[player.userID],
                    Components =
                    {
                        new CuiRawImageComponent
                        {
                            Sprite = &quot;assets/content/textures/generic/fulltransparent.tga&quot;,
                            Url = &quot;https://homepages.cae.wisc.edu/~ece533/images/airplane.png&quot;
                            //Color = &quot;1.0 1.0 1.0 1.0&quot;
                        },
                        new CuiRectTransformComponent
                        {
                            AnchorMin = &quot;0.45 0.15&quot;,
                            AnchorMax = &quot;0.55 0.35&quot;
                        }
                    }
                });                CuiHelper.AddUi(player, elements);
            }
        }        void Unload()
        {
            foreach (var player in BasePlayer.activePlayerList)
            {
                // Destroy existing UI
                string guiInfo;
                if (GuiInfo.TryGetValue(player.userID, out guiInfo)) CuiHelper.DestroyUi(player, guiInfo);
            }
        }
    }</pre>
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">athlon.89</a>,</span>
                        <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200652" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 27, 2016 at 7:06 PM">Apr 27, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200652" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/200652/permalink">#11</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-200653" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="athlon.89">
                            <aside>
                                <div class="attribution type">athlon.89 said: <a href="#post-200652" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">I used the code from your <b>Vanish</b> plugin to destroy ui. But the memory is still not released<br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            <pre>class Test : RustPlugin
    {
        Dictionary&lt;ulong, string&gt; GuiInfo = new Dictionary&lt;ulong, string&gt;();        [ChatCommand(&quot;test&quot;)]
        void test(BasePlayer player, string command, string[] args) {
            for (int i = 0; i &lt; 5; i++) {
                string guiInfo;
                if (GuiInfo.TryGetValue(player.userID, out guiInfo))
                    CuiHelper.DestroyUi(player, guiInfo);                var elements = new CuiElementContainer();                GuiInfo[player.userID] = CuiHelper.GetGuid();
                elements.Add(new CuiElement
                {
                    Name = GuiInfo[player.userID],
                    Components =
                    {
                        new CuiRawImageComponent
                        {
                            Sprite = &quot;assets/content/textures/generic/fulltransparent.tga&quot;,
                            Url = &quot;https://homepages.cae.wisc.edu/~ece533/images/airplane.png&quot;
                            //Color = &quot;1.0 1.0 1.0 1.0&quot;
                        },
                        new CuiRectTransformComponent
                        {
                            AnchorMin = &quot;0.45 0.15&quot;,
                            AnchorMax = &quot;0.55 0.35&quot;
                        }
                    }
                });                CuiHelper.AddUi(player, elements);
            }
        }        void Unload()
        {
            foreach (var player in BasePlayer.activePlayerList)
            {
                // Destroy existing UI
                string guiInfo;
                if (GuiInfo.TryGetValue(player.userID, out guiInfo)) CuiHelper.DestroyUi(player, guiInfo);
            }
        }
    }</pre>
                                        </div>
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>If it is being destroyed properly, then as far as I know, it&#039;s likely a bug with Rust and its CUI. Paging <a href="https://oxidemod.org/members/45547/"
                            class="username" data-user="45547, @Nogrod">@Nogrod</a> for another look though. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200653" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 27, 2016 at 7:09 PM">Apr 27, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200653" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/200653/permalink">#12</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-200909" class="message" data-author="Shady757">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Shady757" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Shady757</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> He appears to be on to something, because in my testing with the code he has supplied, and it being properly
                        destroyed, it is still using the memory and not freeing it. Running the console commands gc.collect and gc.unload on the client seem to unload most of it, but it isn&#039;t
                        done via DestroyUi. (Or so it seems) <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Shady757</a>,</span>
                        <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200909" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 28, 2016 at 7:37 PM">Apr 28, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200909" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/200909/permalink">#13</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-200911" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Shady757">
                            <aside>
                                <div class="attribution type">Shady757 said: <a href="#post-200909" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">He appears to be on to something, because in my testing with the code he has supplied, and it being properly destroyed, it is still using the
                                        memory and not freeing it. Running the console commands gc.collect and gc.unload on the client seem to unload most of it, but it isn&#039;t done via DestroyUi.
                                        (Or so it seems)</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>That&#039;s pretty much what is going on. The DestroyUi destroys it, but Rust isn&#039;t freeing up the memory until the garbage is collected. This would be something
                        that would need to be fixed in Rust. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200911" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 28, 2016 at 7:40 PM">Apr 28, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200911" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/200911/permalink">#14</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-200912" class="message" data-author="athlon.89">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="athlon.89" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">athlon.89</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Shady757">
                            <aside>
                                <div class="attribution type">Shady757 said: <a href="#post-200909" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">He appears to be on to something, because in my testing with the code he has supplied, and it being properly destroyed, it is still using the
                                        memory and not freeing it. Running the console commands gc.collect and gc.unload on the client seem to unload most of it, but it isn&#039;t done via DestroyUi.
                                        (Or so it seems)</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Yes. <a href="https://oxidemod.org/members/45547/" class="username" data-user="45547, @Nogrod">@Nogrod</a> already helped me. This code works :<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>    class Test : RustPlugin
    {
        Dictionary&lt;ulong, string&gt; GuiInfo = new Dictionary&lt;ulong, string&gt;();        [ChatCommand(&quot;test&quot;)]
        void test(BasePlayer player, string command, string[] args) {
            for (int i = 0; i &lt; 5; i++) {
                string guiInfo;
                if (GuiInfo.TryGetValue(player.userID, out guiInfo))
                    CuiHelper.DestroyUi(player, guiInfo);                var elements = new CuiElementContainer();                GuiInfo[player.userID] = CuiHelper.GetGuid();
                elements.Add(new CuiElement
                {
                    Name = GuiInfo[player.userID],
                    Components =
                    {
                        new CuiRawImageComponent
                        {
                            Sprite = &quot;assets/content/textures/generic/fulltransparent.tga&quot;,
                            Url = &quot;https://homepages.cae.wisc.edu/~ece533/images/airplane.png&quot;
                            //Color = &quot;1.0 1.0 1.0 1.0&quot;
                        },
                        new CuiRectTransformComponent
                        {
                            AnchorMin = &quot;0.45 0.15&quot;,
                            AnchorMax = &quot;0.55 0.35&quot;
                        }
                    }
                });                CuiHelper.AddUi(player, elements);
            }
            player.Command(&quot;gc.unload&quot;);
            player.Command(&quot;gc.collect&quot;);
        }        void Unload()
        {
            foreach (var player in BasePlayer.activePlayerList)
            {
                // Destroy existing UI
                string guiInfo;
                if (GuiInfo.TryGetValue(player.userID, out guiInfo)) CuiHelper.DestroyUi(player, guiInfo);
            }
        }
    }</pre>
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">athlon.89</a>,</span>
                        <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200912" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 28, 2016 at 7:47 PM">Apr 28, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200912" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/200912/permalink">#15</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-200916" class="message" data-author="sqroot">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="sqroot" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">sqroot</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Wulf">
                            <aside>
                                <div class="attribution type">Wulf said: <a href="#post-200911" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">That&#039;s pretty much what is going on. The DestroyUi destroys it, but Rust isn&#039;t freeing up the memory until the garbage is collected.
                                        This would be something that would need to be fixed in Rust.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Well, memory is generally only freed when garbage is collected, so this is perfectly fine and I don&#039;t see how this is something that&#039;s supposed to be
                        fixed.<br /> In any application memory will increase until the garbage collector fires, unless you&#039;re using RC GCs or RC/STW GCs and not pure STW GCs.<br /> It&#039;d only
                        be an issue if memory was never freed, in which case you either got a memory leak at the C++ level, a reference cycle for RC GCs, a thread leak or you simply didn&#039;t
                        account for some reference dragging a lot of garbage along (anonymous classes in Java can cause this issue for instance).<br />
                        <br /> The reason why Rust frees some memory before a GC fires is because that&#039;s the engine stuff written in C++, and that is either RC GC&#039;d or manually freed. <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">sqroot</a>,</span>
                        <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200916" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 28, 2016 at 8:01 PM">Apr 28, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200916" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/200916/permalink">#16</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-200917" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="sqroot">
                            <aside>
                                <div class="attribution type">sqroot said: <a href="#post-200916" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Well, memory is generally only freed when garbage is collected, so this is perfectly fine and I don&#039;t see how this is something that&#039;s
                                        supposed to be fixed.<br /> In any application memory will increase until the garbage collector fires, unless you&#039;re using RC GCs or RC/STW GCs and not
                                        pure STW GCs.<br /> It&#039;d only be an issue if memory was never freed, in which case you either got a memory leak at the C++ level, a reference cycle for RC
                                        GCs, a thread leak or you simply didn&#039;t account for some reference dragging a lot of garbage along (anonymous classes in Java can cause this issue for
                                        instance).<br />
                                        <br /> The reason why Rust frees some memory before a GC fires is because that&#039;s the engine stuff written in C++, and that is either RC GC&#039;d or
                                        manually freed.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Sure, I wasn&#039;t saying otherwise. It&#039;s not really my area anyways. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200917" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 28, 2016 at 8:06 PM">Apr 28, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200917" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/200917/permalink">#17</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-200976" class="message" data-author="Troubled">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Troubled" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Troubled</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Wouldnt it be nice of someone made a garbage collector plugin? Does the server also need manual garbage
                        collection? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Troubled</a>,</span>
                        <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200976" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 28, 2016 at 10:42 PM">Apr 28, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200976" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/200976/permalink">#18</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-200982" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Troubled">
                            <aside>
                                <div class="attribution type">Troubled said: <a href="#post-200976" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Wouldnt it be nice of someone made a garbage collector plugin? Does the server also need manual garbage collection?</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>I&#039;m not sure that would be the best option, probably lead to more issues than good. It&#039;s there as a command, but I don&#039;t think it&#039;s meant to be ran
                        frequently. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200982" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 28, 2016 at 10:50 PM">Apr 28, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-200982" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/200982/permalink">#19</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-201169" class="message" data-author="sqroot">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="sqroot" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">sqroot</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Troubled">
                            <aside>
                                <div class="attribution type">Troubled said: <a href="#post-200976" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Wouldnt it be nice of someone made a garbage collector plugin? Does the server also need manual garbage collection?</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>No, it wouldn&#039;t be nice, it&#039;s pretty much pointless and will reduce throughput by a lot.<br /> Neither does the server need manual garbage collection (the
                        suggestion of which makes it seem like you misunderstood the concept).<br /> You should <b>never </b>call the collect method yourself unless you&#039;re blocking the GC due to
                        profiling.<br /> If you want to reduce throughput for lower latency you should always configure that directly in the GC, not through some script that runs on top of the GC.
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">sqroot</a>,</span>
                        <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-201169" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 29, 2016 at 2:40 PM">Apr 29, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/memory-keeps-going-up-with-cui.17557/#post-201169" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/201169/permalink">#20</a>
                </div>
            </div>
        </div>
    </li>
</ol>
<div class="pageNavLinkGroup">
    <div class="PageNav" data-page="1" data-range="2" data-start="2" data-end="2" data-last="2" data-sentinel=""
        data-baseurl="threads/memory-keeps-going-up-with-cui.17557/page-">
        <nav>
            <a href="/threads/memory-keeps-going-up-with-cui.17557/" class="currentPage " rel="start">1</a>
            <a href="/threads/memory-keeps-going-up-with-cui.17557/page-2" class="">2</a>
            <a href="/threads/memory-keeps-going-up-with-cui.17557/page-2" class="text">Next &gt;</a>
        </nav>
    </div>
</div>


                    <footer>
                        <div class="footer">
                            <div class="pageContent"></div>
                            <div id="copyright"><span class="concealed">Built: Wed, 27 Mar 2019 21:25:21 -0400</span></div>
                            <span class="helper"></span>
                            <ul class="footerLinks">
                                <li><a href="/terms/">Terms and Rules</a></li>
                                <li><a href="https://umod.org/community" target="_blank">Contact Us</a></li>
                            </ul>
                            <span class="helper"></span>
                        </div>
                    </footer>
                </div>
            </div>
        </div>
        <header>
            <div id="header">
                <div class="headerWidth">
                    <div id="logoBlock">
                        <div id="logo"><a href="/">
                                <span></span>
                                <img src="/assets/styles/oxide/logo.png" alt="Oxide" />
                            </a></div>
                        <span class="helper"></span>
                    </div>
                    <div id="navigation" class="">
                        <div class="pageContent">
                            <nav>
                                <div class="navTabs">
                                    <ul class="publicTabs">
                                        <li class="navTab forums Popup PopupControl PopupClosed PopupContainerControl">
                                            <a href="/" class="navLink" rel="Menu">Forums</a>
                                        </li>
                                        <li class="navTab PopupClosed">
                                            <a href="https://umod.org/documentation" class="navLink">Docs</a>
                                        </li>
                                        <li class="navTab Popup PopupControl PopupClosed PopupContainerControl">
                                            <a href="/downloads/" class="navLink" rel="Menu">Downloads</a>
                                        </li>
                                        <li class="navTab Popup PopupControl PopupClosed PopupContainerControl">
                                            <a href="/plugins/" class="navLink" rel="Menu">Plugins</a>
                                        </li>
                                        <li class="navTab selected">
                                            <div class="tabLinks"></div>
                                        </li>
                                    </ul>
                                </div>
                                <span class="helper"></span>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </header>
    </div>
    <script>
        jQuery.extend(true, XenForo, {
            visitor: {
                user_id: 0
            },
            serverTimeInfo: {
                now: 1548531785,
                today: 1548460800,
                todayDow: 6
            },
            _lightBoxUniversal: "0",
            _enableOverlays: "1",
            _animationSpeedMultiplier: "1",
            _overlayConfig: {
                top: "10%",
                speed: 200,
                closeSpeed: 100,
                mask: {
                    color: "rgb(255, 255, 255)",
                    opacity: "0.6",
                    loadSpeed: 200,
                    closeSpeed: 100
                }
            },
            _ignoredUsers: [],
            _loadedScripts: {
                "node_list": true,
                "node_category": true,
                "node_forum": true,
                "discussion_list": true,
                "wf_default": true
            },
            _cookieConfig: {
                path: "/",
                domain: ".oxidemod.org",
                prefix: "xfid_"
            },
            _jsVersion: "f33b43a2"
        });
        jQuery.extend(XenForo.phrases, {
            cancel: "Cancel",
            a_moment_ago: "A moment ago",
            one_minute_ago: "1 minute ago",
            x_minutes_ago: "%minutes% minutes ago",
            today_at_x: "Today at %time%",
            yesterday_at_x: "Yesterday at %time%",
            day_x_at_time_y: "%day% at %time%",
            day0: "Sunday",
            day1: "Monday",
            day2: "Tuesday",
            day3: "Wednesday",
            day4: "Thursday",
            day5: "Friday",
            day6: "Saturday",
            _months: "January,February,March,April,May,June,July,August,September,October,November,December",
            _daysShort: "Sun,Mon,Tue,Wed,Thu,Fri,Sat",
            following_error_occurred: "The following error occurred",
            server_did_not_respond_in_time_try_again: "The server did not respond in time. Please try again.",
            logging_in: "Logging in",
            click_image_show_full_size_version: "Click this image to show the full-size version.",
            show_hidden_content_by_x: "Show hidden content by {names}"
        });
    </script>
</body>
</html>
