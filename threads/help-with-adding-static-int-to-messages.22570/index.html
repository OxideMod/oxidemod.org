<!DOCTYPE html>
<html id="XenForo" lang="en-US" dir="LTR" class="Public NoJs LoggedOut NoSidebar  Responsive" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>

	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
	
		<meta name="viewport" content="width=device-width, initial-scale=1" />
	
	
		<base href="https://oxidemod.org/" />
		<script>
			var _b = document.getElementsByTagName('base')[0], _bH = "https://oxidemod.org/";
			if (_b && _b.href != _bH) _b.href = _bH;
		</script>
	

	<title>Help with adding static int to messages | Oxide</title>
	
	<noscript><style>.JsOnly, .jsOnly { display: none !important; }</style></noscript>
	<link rel="stylesheet" href="css.php?css=xenforo,form,public&amp;style=5&amp;dir=LTR&amp;d=1548544754" />
	<link rel="stylesheet" href="css.php?css=bb_code,message,message_user_info,thread_view&amp;style=5&amp;dir=LTR&amp;d=1548544754" />
	
	

	
		<script src="js/jquery/jquery-1.11.0.min.js"></script>	
		
	<script src="js/xenforo/xenforo.js?_v=f33b43a2"></script>

	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
	<meta name="mobile-web-app-capable" content="yes" />
<link rel="icon" sizes="196x196" href="https://oxidemod.org/styles/oxide/logo.og.png" />
<link rel="apple-touch-icon" href="https://oxidemod.org/styles/oxide/logo.og.png" />
	<link rel="alternate" type="application/rss+xml" title="RSS feed for Oxide" href="forums/-/index.rss" />
		
	
	<link rel="canonical" href="https://oxidemod.org/threads/help-with-adding-static-int-to-messages.22570/" />
	<meta name="description" content="private static int buyMoney = 500;

        Dictionary&lt;string, string&gt; messages = new Dictionary&lt;string, string&gt;()
        {
  {&quot;nomoney&quot;, &quot;You do not..." />	<meta property="og:site_name" content="Oxide" />
	<meta property="og:image" content="https://oxidemod.org/styles/default/xenforo/avatars/avatar_m.png" />
	<meta property="og:image" content="https://oxidemod.org/styles/oxide/logo.og.png" />
	<meta property="og:type" content="article" />
	<meta property="og:url" content="https://oxidemod.org/threads/help-with-adding-static-int-to-messages.22570/" />
	<meta property="og:title" content="Help with adding static int to messages" />
	<meta property="og:description" content="private static int buyMoney = 500;

        Dictionary&lt;string, string&gt; messages = new Dictionary&lt;string, string&gt;()
        {
  {&quot;nomoney&quot;, &quot;You do not..." />
	
	
	

</head>

<body class="node4 node1 node104 node105 SelectQuotable">




<div id="headerMover">
	<div id="headerProxy"></div>

<div id="content" class="thread_view">
	<div class="pageWidth">
		<div class="pageContent">
			
			
			

			

			
			
				<div class="breadBoxTop ">
					
					

<nav>
	
		
			
				
			
		
			
				
			
		
			
				
			
		
			
				
			
		
	

	<fieldset class="breadcrumb">			
		<div class="boardTitle"><strong>Oxide</strong></div>
		
		<span class="crumbs">
			
				

					
						<span class="crust selectedTabCrumb" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
							<a href="https://oxidemod.org/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Forums</span></a>
							<span class="arrow"><span>&gt;</span></span>
						</span>
					

					
						
							<span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
								<a href="https://oxidemod.org/#oxide-project.1" class="crumb" rel="up" itemprop="url"><span itemprop="title">Oxide Project</span></a>
								<span class="arrow"><span>&gt;</span></span>
							</span>
						
							<span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
								<a href="https://oxidemod.org/categories/archive.104/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Archive</span></a>
								<span class="arrow"><span>&gt;</span></span>
							</span>
						
							<span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
								<a href="https://oxidemod.org/categories/plugin-development.105/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Plugin Development</span></a>
								<span class="arrow"><span>&gt;</span></span>
							</span>
						
							<span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
								<a href="https://oxidemod.org/forums/rust-development.4/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Rust Development</span></a>
								<span class="arrow"><span>&gt;</span></span>
							</span>
						
					
				
			
		</span>
	</fieldset>
</nav>
				</div>
			
			
	
			



			
				

						
			
			
			
						
						
													
								<!-- h1 title, description -->
								<div class="titleBar">
									
									<h1>
										
											
												<a href="https://oxidemod.org/threads/help-with-adding-static-int-to-messages.22570/">Help with adding static int to messages</a>
											
										
									</h1>

									<p id="pageDescription" class="muted ">
	Discussion in '<a href="forums/rust-development.4/">Rust Development</a>' started by <a class="username" dir="auto">Ts3hosting</a>, <a href="threads/help-with-adding-static-int-to-messages.22570/"><span class="DateTime" title="Dec 19, 2016 at 10:59 PM">Dec 19, 2016</span></a>.
</p>
								</div>
							
						
						
						
						

						

	

























	




<div class="pageNavLinkGroup">
	<div class="linkGroup SelectionCountContainer">
		
		
	</div>

	
</div>






<form action="inline-mod/post/switch" method="post"
	class="InlineModForm section"
	data-cookieName="posts"
	data-controls="#InlineModControls"
	data-imodOptions="#ModerationSelect option">

	<ol class="messageList" id="messageList">
		
			
				


<li id="post-277759" class="message   " data-author="Ts3hosting">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Ts3hosting" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Ts3hosting</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre> private static int buyMoney = 500;

        Dictionary&lt;string, string&gt; messages = new Dictionary&lt;string, string&gt;()
        {
  {&quot;nomoney&quot;, &quot;You do not have Money to talk to me!&quot; },

SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;nomoney&quot;, this )));

</pre>
</div><br />
I cant seem to figure out how to add the buyMoney to the message tried failing. so asking for help thanks.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
			<div class="editDate">
			
				Last edited by a moderator: <span class="DateTime" title="Dec 19, 2016 at 11:05 PM">Dec 19, 2016</span>
			
			</div>
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Ts3hosting</a>,</span>
					<a href="threads/help-with-adding-static-int-to-messages.22570/" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 19, 2016 at 10:59 PM">Dec 19, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-adding-static-int-to-messages.22570/" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/277759/permalink">#1</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-277760" class="message   " data-author="sami37">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="sami37" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">sami37</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>lang.RegisterMessages(new Dictionary&lt;string, string&gt;()
{
     [&quot;nomoney&quot;] = &quot;You do not have Money to talk to me!&quot;
}, this);
</pre>
</div>
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">sami37</a>,</span>
					<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277760" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 19, 2016 at 11:04 PM">Dec 19, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277760" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/277760/permalink">#2</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-277763" class="message   " data-author="Ts3hosting">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Ts3hosting" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Ts3hosting</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="sami37">
	<aside>
		
			<div class="attribution type">sami37 said:
				
					<a href="goto/post?id=277760#post-277760" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">

<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>lang.RegisterMessages(new Dictionary&lt;string, string&gt;()
{
     [&quot;nomoney&quot;] = &quot;You do not have Money to talk to me!&quot;
}, this);
</pre>
</div></div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>that confused me lol
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Ts3hosting</a>,</span>
					<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277763" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 19, 2016 at 11:11 PM">Dec 19, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277763" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/277763/permalink">#3</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-277767" class="message  staff " data-author="Wulf">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto" itemprop="name">Wulf</a>
			<em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="Ts3hosting">
	<aside>
		
			<div class="attribution type">Ts3hosting said:
				
					<a href="goto/post?id=277763#post-277763" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">that confused me lol</div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>Your initial snippet of code isn&#039;t valid C#, but what sami posted is how you register messages with the Lang API.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
					<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277767" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 19, 2016 at 11:19 PM">Dec 19, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277767" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/277767/permalink">#4</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-277769" class="message   " data-author="Ts3hosting">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Ts3hosting" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Ts3hosting</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="Wulf">
	<aside>
		
			<div class="attribution type">Wulf said:
				
					<a href="goto/post?id=277767#post-277767" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">Your initial snippet of code isn&#039;t valid C#, but what sami posted is how you register messages with the Lang API.</div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>so i should be doing the messages another way? They work they way i have them in there but if wrong i want to change it.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Ts3hosting</a>,</span>
					<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277769" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 19, 2016 at 11:20 PM">Dec 19, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277769" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/277769/permalink">#5</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-277770" class="message  staff " data-author="Wulf">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto" itemprop="name">Wulf</a>
			<em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="Ts3hosting">
	<aside>
		
			<div class="attribution type">Ts3hosting said:
				
					<a href="goto/post?id=277769#post-277769" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">so i should be doing the messages another way?</div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>What exactly are you trying to do?
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
					<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277770" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 19, 2016 at 11:21 PM">Dec 19, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277770" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/277770/permalink">#6</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-277773" class="message   " data-author="Ts3hosting">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Ts3hosting" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Ts3hosting</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>        #region Localization    
        Dictionary&lt;string, string&gt; messages = new Dictionary&lt;string, string&gt;()
        {
            {&quot;title&quot;, &quot;&lt;color=orange&gt;Npc&lt;/color&gt; : &quot;},
            {&quot;cdTime&quot;, &quot;You must wait another {0} minutes and some seconds before using me again&quot; },
            {&quot;noperm&quot;, &quot;You do not have permissions to talk to me!&quot; },
            {&quot;nomoney&quot;, &quot;You do not have Money to talk to me!&quot; },
            {&quot;notenabled&quot;, &quot;Sorry i am not enabled!&quot; }
       };
        #endregion</pre>
</div><br />
               SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;nomoney&quot;, this, amount )));<br />
                return false;<br />
<br />
<br />
Under the line 

<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre> {&quot;nomoney&quot;, &quot;You do not have Money to talk to me!&quot; },</pre>
</div>i want to add in the 500 that comes from 

<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre> private static int buyMoney = 500;</pre>
</div>the line i have for the call is<br />
               SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;nomoney&quot;, this)));<br />
                return false;<br />
<br />
<br />
i tryed to make it like <br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>               SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;nomoney&quot;, this, buyMoney )));
                return false;</pre>
</div>but receive error <br />
(17:34:10) | [Oxide] 17:34 [Error] Error while compiling Npctp.cs(261,114): error CS1503: Argument `#3&#039; cannot convert `int&#039; expression to type `string&#039;
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
			<div class="editDate">
			
				Last edited by a moderator: <span class="DateTime" title="Dec 19, 2016 at 11:37 PM">Dec 19, 2016</span>
			
			</div>
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Ts3hosting</a>,</span>
					<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277773" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 19, 2016 at 11:30 PM">Dec 19, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277773" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/277773/permalink">#7</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-277775" class="message  staff " data-author="Wulf">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto" itemprop="name">Wulf</a>
			<em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					The setup:<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>const int buyMoney = 500;

void Init()
{
    lang.RegisterMessages(new Dictionary&lt;string, string&gt;()
    {
        [&quot;nomoney&quot;] = &quot;You do not have enough money ({0}) to talk to me!&quot;
    }, this);
}</pre>
</div>The call:<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>SendReply(player, string.Format(lang.GetMessage(&quot;nomoney&quot;, this, player.UserIDString), buyMoney));</pre>
</div>
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
					<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277775" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 19, 2016 at 11:37 PM">Dec 19, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277775" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/277775/permalink">#8</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-277777" class="message   " data-author="Ts3hosting">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Ts3hosting" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Ts3hosting</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>using System.Collections.Generic;
using System;
using Oxide.Core;
using Oxide.Core.Plugins;
using Oxide.Core.Configuration;
using Oxide.Game.Rust.Cui;
using Newtonsoft.Json;
using UnityEngine;
using Newtonsoft.Json.Converters;
using Newtonsoft.Json.Linq;
using Oxide.Core.Libraries.Covalence;
using static UnityEngine.Vector3;

namespace Oxide.Plugins
{
    [Info(&quot;Npctp&quot;, &quot;Ts3hosting&quot;, &quot;2.2.3&quot;, ResourceId = 2229)]
    [Description(&quot;Some NPC Controle&quot;)]

    class Npctp : RustPlugin
    {
        #region Initialization


        [PluginReference]
        Plugin Spawns;
        [PluginReference]
        Plugin Economics;


        PlayerCooldown pcdData;
        private DynamicConfigFile PCDDATA;

                private static int cooldownTime = 3600;
                private static int cooldownTime2 = 3600;
                private static int cooldownTime3 = 3600;
                private static int cooldownTime4 = 60;
                private static bool useEconomics = true;
                private static int buyMoney = 500;

                private string setx;
                private string sety;
                private string setz;



                private static int auth = 2;
                private static bool noAdminCooldown = false;


        private bool Changed;
        private string text;
        private bool displayoneveryconnect;

        private string NpcID;
        private string NpcID1;
        private string NpcID2;
        private string NpcID3;


        private string SpawnsFile;
        private string SpawnsFile1;


        private string command;
        private string arrangements;



        private string CanUse = &quot;false&quot;;
        private string CanUse1 = &quot;false&quot;;
        private string CanUse2 = &quot;false&quot;;
        private string CanUse3 = &quot;false&quot;;

       #region Localization      


  lang.RegisterMessages(new Dictionary&lt;string, string&gt;()
    {
            {&quot;title&quot;, &quot;&lt;color=orange&gt;Npc&lt;/color&gt; : &quot;},
            {&quot;cdTime&quot;, &quot;You must wait another {0} minutes and some seconds before using me again&quot; },
            {&quot;noperm&quot;, &quot;You do not have permissions to talk to me!&quot; },
            {&quot;notenabled&quot;, &quot;Sorry i am not enabled!&quot; },
            [&quot;nomoney&quot;] = &quot;You do not have enough money ({0}) to talk to me!&quot;
    }, this);
}
#endregion


        void Loaded() 
        {
                        PCDDATA = Interface.Oxide.DataFileSystem.GetFile(&quot;NpcTP_data&quot;);
                        LoadData();
            LoadVariables();
                        RegisterPermissions();
                        lang.RegisterMessages(messages, this);
                        Puts(&quot;Thanks for using NPCTP drop me a line if you need anything added.&quot;);

        }
       
        object GetConfig(string menu, string datavalue, object defaultValue)
        {
            var data = Config[menu] as Dictionary&lt;string, object&gt;;
            if (data == null)
            {
                data = new Dictionary&lt;string, object&gt;();
                Config[menu] = data;
                Changed = true;
            }
            object value;
            if (!data.TryGetValue(datavalue, out value))
            {
                value = defaultValue;
                data[datavalue] = value;
                Changed = true;
            }
            return value; 
        }

        private void RegisterPermissions()
        {
            permission.RegisterPermission(&quot;npctp.admin&quot;, this);
            permission.RegisterPermission(&quot;npctp.one&quot;, this);
            permission.RegisterPermission(&quot;npctp.two&quot;, this);
            permission.RegisterPermission(&quot;npctp.command&quot;, this);
            permission.RegisterPermission(&quot;npctp.name&quot;, this);

        }
 
  private void CheckDependencies()
        {
            if (Economics == null)
                if (useEconomics)
                {
                    PrintWarning($&quot;Economics could not be found! Disabling money feature&quot;);
                    useEconomics = false;
                }
        }


        void LoadVariables()
        {
            NpcID = Convert.ToString(GetConfig(&quot;NpcOne&quot;, &quot;NpcID&quot;, &quot;123456789&quot;));
            CanUse = Convert.ToString(GetConfig(&quot;NpcOne&quot;, &quot;EnableNpcOne&quot;, &quot;false&quot;));
            SpawnsFile = Convert.ToString(GetConfig(&quot;NpcOne&quot;, &quot;SpawnsFile&quot;, &quot;spawnfile&quot;));
            cooldownTime = Convert.ToInt32(GetConfig(&quot;NpcOne&quot;, &quot;cooldownTime&quot;, &quot;3600&quot;));


            NpcID1 = Convert.ToString(GetConfig(&quot;NpcTwo&quot;, &quot;NpcID&quot;, &quot;123456789&quot;));
                        buyMoney = Convert.ToInt32(GetConfig(&quot;NpcTwo&quot;, &quot;Money&quot;, &quot;1000&quot;));
            CanUse1 = Convert.ToString(GetConfig(&quot;NpcTwo&quot;, &quot;EnableNpcTwo&quot;, &quot;false&quot;));
            SpawnsFile1 = Convert.ToString(GetConfig(&quot;NpcTwo&quot;, &quot;SpawnsFile&quot;, &quot;spawnfile&quot;));
            cooldownTime2 = Convert.ToInt32(GetConfig(&quot;NpcTwo&quot;, &quot;cooldownTime&quot;, &quot;3600&quot;));

            NpcID2 = Convert.ToString(GetConfig(&quot;NpcCommand&quot;, &quot;NpcID&quot;, &quot;123456789&quot;));
            CanUse2 = Convert.ToString(GetConfig(&quot;NpcCommand&quot;, &quot;EnableNpcCommand&quot;, &quot;false&quot;));
            command = Convert.ToString(GetConfig(&quot;NpcCommand&quot;, &quot;Command&quot;, &quot;inv.giveplayer&quot;));
            arrangements = Convert.ToString(GetConfig(&quot;NpcCommand&quot;, &quot;Arrangements&quot;, &quot;kit MVP&quot;));
            cooldownTime3 = Convert.ToInt32(GetConfig(&quot;NpcCommand&quot;, &quot;cooldownTime&quot;, &quot;86400&quot;));

            NpcID3 = Convert.ToString(GetConfig(&quot;NpcNAME&quot;, &quot;NpcNAME&quot;, &quot;GoToTown&quot;));
            CanUse3 = Convert.ToString(GetConfig(&quot;NpcNAME&quot;, &quot;EnableNpcName&quot;, &quot;false&quot;));
            setx = Convert.ToString(GetConfig(&quot;NpcNAME&quot;, &quot;set x&quot;, &quot;100&quot;));
            sety = Convert.ToString(GetConfig(&quot;NpcNAME&quot;, &quot;set y&quot;, &quot;50&quot;));
            setz = Convert.ToString(GetConfig(&quot;NpcNAME&quot;, &quot;set z&quot;, &quot;100&quot;));
            cooldownTime4 = Convert.ToInt32(GetConfig(&quot;NpcNAME&quot;, &quot;cooldownTime&quot;, &quot;360&quot;)); 


           
            if (Changed)
            {
                SaveConfig();
                Changed = false;
           
            }   
        }

        protected override void LoadDefaultConfig()
        {
            Puts(&quot;Creating a new configuration file!&quot;);
            Config.Clear();
            LoadVariables();
        }



        #endregion




        #region Classes and Data Management      
        class PlayerCooldown
        {
            public Dictionary&lt;ulong, PCDInfo&gt; pCooldown = new Dictionary&lt;ulong, PCDInfo&gt;();


            public PlayerCooldown() { }
        }
        class PCDInfo
        {
            public long Cooldown;
            public long Cooldown2;
            public long Cooldown3;
            public long Cooldown4;
            public PCDInfo() { }
            public PCDInfo(long cd)
            {
                Cooldown = cd;
                Cooldown2 = cd;
                Cooldown3 = cd;
                Cooldown4 = cd;




            }
          }

        void SaveData()
        {
            PCDDATA.WriteObject(pcdData);
        }
        void LoadData()
        {
            try
            {
                pcdData = Interface.GetMod().DataFileSystem.ReadObject&lt;PlayerCooldown&gt;(&quot;NpcTP_data&quot;);
            }
            catch
            {
                Puts(&quot;Couldn't load NPCTP data, creating new datafile&quot;);
                pcdData = new PlayerCooldown();
            }
        }

        #endregion


      #region Cooldown Management      

        static double GrabCurrentTime() =&gt; DateTime.UtcNow.Subtract(new DateTime(1970, 1, 1, 0, 0, 0)).TotalSeconds;


        #endregion


   private bool CheckPlayerMoney(BasePlayer player, int amount)
        {
            if (useEconomics)
            {
                double money = (double)Economics?.CallHook(&quot;GetPlayerMoney&quot;, player.userID);
                if (money &gt;= amount)
                {
                    money = money - amount;
                    Economics?.CallHook(&quot;Set&quot;, player.userID, money);
                    return true;
                }
            SendReply(player, string.Format(lang.GetMessage(&quot;nomoney&quot;, this, player.UserIDString), amount));
                return false;
            }
            return false;
        }










       #region USENPC


             
        void OnUseNPC(BasePlayer npc, BasePlayer player, Vector3 destination)
          {
      ulong  playerID = player.userID;
      string lowername = npc.userID.ToString();
      string lowername2 = npc.displayName;

            var d = pcdData.pCooldown;
            ulong ID = player.userID;
            double timeStamp = GrabCurrentTime();
           

      string lowernpc = NpcID.ToString();
      string lowernpc1 = NpcID1.ToString();
      string lowernpc2 = NpcID2.ToString();
      string lowernpc3 = NpcID3;

      string x = setx;
      string y = sety;
      string z = setz;



                object newpos = null;
                string spawn = SpawnsFile;
                string spawn1 = SpawnsFile1;


           if (!d.ContainsKey(ID))
            {
                d.Add(ID, new PCDInfo((long)timeStamp));
                SaveData();
                 }




         if (lowernpc == lowername)
               {

                if (CanUse == &quot;false&quot;)
                        {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;notenabled&quot;, this)));
                    return;
                       }
                     else
                      {

                long time = d[ID].Cooldown;
            if (!permission.UserHasPermission(player.userID.ToString(), &quot;npctp.one&quot;))                {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;noperm&quot;, this)));
                    return;
                }
                if (time &gt; timeStamp &amp;&amp; time != 0.0)
                {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;cdTime&quot;, this, player.UserIDString), (int)(time - timeStamp) / 60));
                }
                else
                {
                    d[ID].Cooldown = (long)timeStamp + cooldownTime;
                    SaveData();
   object success = Spawns.Call(&quot;GetRandomSpawn&quot;, spawn);
   if (success is Vector3) // Check if the returned type is Vector3
   {
      Vector3 location = (Vector3) success;     
      rust.RunServerCommand($&quot;teleport.topos {player.userID} {location.x} {location.y} {location.z}&quot;);
    }
   else PrintError((string)newpos); // Otherwise print the error message to console so server owners know there is a problem

  }
}
}


        if (lowernpc1 == lowername)
               {
                if (CanUse1 == &quot;false&quot;)
                        {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;notenabled&quot;, this)));
                    return;
                       }
                     else
                      {

                    
                     

                long time = d[ID].Cooldown2;
            if (!permission.UserHasPermission(player.userID.ToString(), &quot;npctp.two&quot;))                {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;noperm&quot;, this)));
                    return;
                }
                if (time &gt; timeStamp &amp;&amp; time != 0.0)
                {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;cdTime&quot;, this, player.UserIDString), (int)(time - timeStamp) / 60));
                }
                else
                {
                  if (Economics &amp;&amp; useEconomics)
                      if (CheckPlayerMoney(player, buyMoney))
                        {

                    d[ID].Cooldown2 = (long)timeStamp + cooldownTime2;
                    SaveData();
   object success = Spawns.Call(&quot;GetRandomSpawn&quot;, spawn1);
   if (success is Vector3) // Check if the returned type is Vector3
   {
      Vector3 location = (Vector3) success;     
      rust.RunServerCommand($&quot;teleport.topos {player.userID} {location.x} {location.y} {location.z}&quot;);
    }
   else PrintError((string)newpos); // Otherwise print the error message to console so server owners know there is a problem

             }
           }
      }
}



       if (lowernpc2 == lowername)
                       {
                if (CanUse2 == &quot;false&quot;)
                        {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;notenabled&quot;, this)));
                    return;
                       }
                     else
                      {
            long time = d[ID].Cooldown3;
            if (!permission.UserHasPermission(player.userID.ToString(), &quot;npctp.command&quot;))                {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;noperm&quot;, this)));
                    return;
                }
                if (time &gt; timeStamp &amp;&amp; time != 0.0)
                {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;cdTime&quot;, this, player.UserIDString), (int)(time - timeStamp) / 60));
                }
                else
                {
                    d[ID].Cooldown3 = (long)timeStamp + cooldownTime3;
                    SaveData();
               rust.RunServerCommand($&quot;{command} {player.userID} {arrangements}&quot;);

               }
  }

}

       if (lowernpc3 == lowername2)
                       {
                if (CanUse3 == &quot;false&quot;)
                        {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;notenabled&quot;, this)));
                    return;
                       }
                     else
                      {
            long time = d[ID].Cooldown4;
            if (!permission.UserHasPermission(player.userID.ToString(), &quot;npctp.name&quot;))                {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;noperm&quot;, this)));
                    return;
                }
                if (time &gt; timeStamp &amp;&amp; time != 0.0)
                {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;cdTime&quot;, this, player.UserIDString), (int)(time - timeStamp) / 60));
                }
                else
                {
                    d[ID].Cooldown4 = (long)timeStamp + cooldownTime4;
                    SaveData();
               rust.RunServerCommand($&quot;teleport.topos {player.userID} {x} {y} {z}&quot;);

               }
  }


        #endregion


           }

       } 

}

}
       


</pre>
</div><br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>       #region Localization      


  lang.RegisterMessages(new Dictionary&lt;string, string&gt;()
    {
            {&quot;title&quot;, &quot;&lt;color=orange&gt;Npc&lt;/color&gt; : &quot;},
            {&quot;cdTime&quot;, &quot;You must wait another {0} minutes and some seconds before using me again&quot; },
            {&quot;noperm&quot;, &quot;You do not have permissions to talk to me!&quot; },
            {&quot;notenabled&quot;, &quot;Sorry i am not enabled!&quot; },
            [&quot;nomoney&quot;] = &quot;You do not have enough money ({0}) to talk to me!&quot;
    }, this);
}
#endregion</pre>
</div><br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>(17:52:22) | [Oxide] 17:52 [Error] Error while compiling Npctp.cs(100,36): error CS1525: Unexpected symbol `as'
</pre>
</div>
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Ts3hosting</a>,</span>
					<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277777" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 19, 2016 at 11:54 PM">Dec 19, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277777" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/277777/permalink">#9</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-277778" class="message  staff " data-author="Wulf">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto" itemprop="name">Wulf</a>
			<em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="Ts3hosting">
	<aside>
		
			<div class="attribution type">Ts3hosting said:
				
					<a href="goto/post?id=277777#post-277777" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">

<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>using System.Collections.Generic;
using System;
using Oxide.Core;
using Oxide.Core.Plugins;
using Oxide.Core.Configuration;
using Oxide.Game.Rust.Cui;
using Newtonsoft.Json;
using UnityEngine;
using Newtonsoft.Json.Converters;
using Newtonsoft.Json.Linq;
using Oxide.Core.Libraries.Covalence;
using static UnityEngine.Vector3;

namespace Oxide.Plugins
{
    [Info(&quot;Npctp&quot;, &quot;Ts3hosting&quot;, &quot;2.2.3&quot;, ResourceId = 2229)]
    [Description(&quot;Some NPC Controle&quot;)]

    class Npctp : RustPlugin
    {
        #region Initialization


        [PluginReference]
        Plugin Spawns;
        [PluginReference]
        Plugin Economics;


        PlayerCooldown pcdData;
        private DynamicConfigFile PCDDATA;

                private static int cooldownTime = 3600;
                private static int cooldownTime2 = 3600;
                private static int cooldownTime3 = 3600;
                private static int cooldownTime4 = 60;
                private static bool useEconomics = true;
                private static int buyMoney = 500;

                private string setx;
                private string sety;
                private string setz;



                private static int auth = 2;
                private static bool noAdminCooldown = false;


        private bool Changed;
        private string text;
        private bool displayoneveryconnect;

        private string NpcID;
        private string NpcID1;
        private string NpcID2;
        private string NpcID3;


        private string SpawnsFile;
        private string SpawnsFile1;


        private string command;
        private string arrangements;



        private string CanUse = &quot;false&quot;;
        private string CanUse1 = &quot;false&quot;;
        private string CanUse2 = &quot;false&quot;;
        private string CanUse3 = &quot;false&quot;;

       #region Localization     


  lang.RegisterMessages(new Dictionary&lt;string, string&gt;()
    {
            {&quot;title&quot;, &quot;&lt;color=orange&gt;Npc&lt;/color&gt; : &quot;},
            {&quot;cdTime&quot;, &quot;You must wait another {0} minutes and some seconds before using me again&quot; },
            {&quot;noperm&quot;, &quot;You do not have permissions to talk to me!&quot; },
            {&quot;notenabled&quot;, &quot;Sorry i am not enabled!&quot; },
            [&quot;nomoney&quot;] = &quot;You do not have enough money ({0}) to talk to me!&quot;
    }, this);
}
#endregion


        void Loaded()
        {
                        PCDDATA = Interface.Oxide.DataFileSystem.GetFile(&quot;NpcTP_data&quot;);
                        LoadData();
            LoadVariables();
                        RegisterPermissions();
                        lang.RegisterMessages(messages, this);
                        Puts(&quot;Thanks for using NPCTP drop me a line if you need anything added.&quot;);

        }
      
        object GetConfig(string menu, string datavalue, object defaultValue)
        {
            var data = Config[menu] as Dictionary&lt;string, object&gt;;
            if (data == null)
            {
                data = new Dictionary&lt;string, object&gt;();
                Config[menu] = data;
                Changed = true;
            }
            object value;
            if (!data.TryGetValue(datavalue, out value))
            {
                value = defaultValue;
                data[datavalue] = value;
                Changed = true;
            }
            return value;
        }

        private void RegisterPermissions()
        {
            permission.RegisterPermission(&quot;npctp.admin&quot;, this);
            permission.RegisterPermission(&quot;npctp.one&quot;, this);
            permission.RegisterPermission(&quot;npctp.two&quot;, this);
            permission.RegisterPermission(&quot;npctp.command&quot;, this);
            permission.RegisterPermission(&quot;npctp.name&quot;, this);

        }

  private void CheckDependencies()
        {
            if (Economics == null)
                if (useEconomics)
                {
                    PrintWarning($&quot;Economics could not be found! Disabling money feature&quot;);
                    useEconomics = false;
                }
        }


        void LoadVariables()
        {
            NpcID = Convert.ToString(GetConfig(&quot;NpcOne&quot;, &quot;NpcID&quot;, &quot;123456789&quot;));
            CanUse = Convert.ToString(GetConfig(&quot;NpcOne&quot;, &quot;EnableNpcOne&quot;, &quot;false&quot;));
            SpawnsFile = Convert.ToString(GetConfig(&quot;NpcOne&quot;, &quot;SpawnsFile&quot;, &quot;spawnfile&quot;));
            cooldownTime = Convert.ToInt32(GetConfig(&quot;NpcOne&quot;, &quot;cooldownTime&quot;, &quot;3600&quot;));


            NpcID1 = Convert.ToString(GetConfig(&quot;NpcTwo&quot;, &quot;NpcID&quot;, &quot;123456789&quot;));
                        buyMoney = Convert.ToInt32(GetConfig(&quot;NpcTwo&quot;, &quot;Money&quot;, &quot;1000&quot;));
            CanUse1 = Convert.ToString(GetConfig(&quot;NpcTwo&quot;, &quot;EnableNpcTwo&quot;, &quot;false&quot;));
            SpawnsFile1 = Convert.ToString(GetConfig(&quot;NpcTwo&quot;, &quot;SpawnsFile&quot;, &quot;spawnfile&quot;));
            cooldownTime2 = Convert.ToInt32(GetConfig(&quot;NpcTwo&quot;, &quot;cooldownTime&quot;, &quot;3600&quot;));

            NpcID2 = Convert.ToString(GetConfig(&quot;NpcCommand&quot;, &quot;NpcID&quot;, &quot;123456789&quot;));
            CanUse2 = Convert.ToString(GetConfig(&quot;NpcCommand&quot;, &quot;EnableNpcCommand&quot;, &quot;false&quot;));
            command = Convert.ToString(GetConfig(&quot;NpcCommand&quot;, &quot;Command&quot;, &quot;inv.giveplayer&quot;));
            arrangements = Convert.ToString(GetConfig(&quot;NpcCommand&quot;, &quot;Arrangements&quot;, &quot;kit MVP&quot;));
            cooldownTime3 = Convert.ToInt32(GetConfig(&quot;NpcCommand&quot;, &quot;cooldownTime&quot;, &quot;86400&quot;));

            NpcID3 = Convert.ToString(GetConfig(&quot;NpcNAME&quot;, &quot;NpcNAME&quot;, &quot;GoToTown&quot;));
            CanUse3 = Convert.ToString(GetConfig(&quot;NpcNAME&quot;, &quot;EnableNpcName&quot;, &quot;false&quot;));
            setx = Convert.ToString(GetConfig(&quot;NpcNAME&quot;, &quot;set x&quot;, &quot;100&quot;));
            sety = Convert.ToString(GetConfig(&quot;NpcNAME&quot;, &quot;set y&quot;, &quot;50&quot;));
            setz = Convert.ToString(GetConfig(&quot;NpcNAME&quot;, &quot;set z&quot;, &quot;100&quot;));
            cooldownTime4 = Convert.ToInt32(GetConfig(&quot;NpcNAME&quot;, &quot;cooldownTime&quot;, &quot;360&quot;));


          
            if (Changed)
            {
                SaveConfig();
                Changed = false;
          
            }  
        }

        protected override void LoadDefaultConfig()
        {
            Puts(&quot;Creating a new configuration file!&quot;);
            Config.Clear();
            LoadVariables();
        }



        #endregion




        #region Classes and Data Management     
        class PlayerCooldown
        {
            public Dictionary&lt;ulong, PCDInfo&gt; pCooldown = new Dictionary&lt;ulong, PCDInfo&gt;();


            public PlayerCooldown() { }
        }
        class PCDInfo
        {
            public long Cooldown;
            public long Cooldown2;
            public long Cooldown3;
            public long Cooldown4;
            public PCDInfo() { }
            public PCDInfo(long cd)
            {
                Cooldown = cd;
                Cooldown2 = cd;
                Cooldown3 = cd;
                Cooldown4 = cd;




            }
          }

        void SaveData()
        {
            PCDDATA.WriteObject(pcdData);
        }
        void LoadData()
        {
            try
            {
                pcdData = Interface.GetMod().DataFileSystem.ReadObject&lt;PlayerCooldown&gt;(&quot;NpcTP_data&quot;);
            }
            catch
            {
                Puts(&quot;Couldn't load NPCTP data, creating new datafile&quot;);
                pcdData = new PlayerCooldown();
            }
        }

        #endregion


      #region Cooldown Management     

        static double GrabCurrentTime() =&gt; DateTime.UtcNow.Subtract(new DateTime(1970, 1, 1, 0, 0, 0)).TotalSeconds;


        #endregion


   private bool CheckPlayerMoney(BasePlayer player, int amount)
        {
            if (useEconomics)
            {
                double money = (double)Economics?.CallHook(&quot;GetPlayerMoney&quot;, player.userID);
                if (money &gt;= amount)
                {
                    money = money - amount;
                    Economics?.CallHook(&quot;Set&quot;, player.userID, money);
                    return true;
                }
            SendReply(player, string.Format(lang.GetMessage(&quot;nomoney&quot;, this, player.UserIDString), amount));
                return false;
            }
            return false;
        }










       #region USENPC


            
        void OnUseNPC(BasePlayer npc, BasePlayer player, Vector3 destination)
          {
      ulong  playerID = player.userID;
      string lowername = npc.userID.ToString();
      string lowername2 = npc.displayName;

            var d = pcdData.pCooldown;
            ulong ID = player.userID;
            double timeStamp = GrabCurrentTime();
          

      string lowernpc = NpcID.ToString();
      string lowernpc1 = NpcID1.ToString();
      string lowernpc2 = NpcID2.ToString();
      string lowernpc3 = NpcID3;

      string x = setx;
      string y = sety;
      string z = setz;



                object newpos = null;
                string spawn = SpawnsFile;
                string spawn1 = SpawnsFile1;


           if (!d.ContainsKey(ID))
            {
                d.Add(ID, new PCDInfo((long)timeStamp));
                SaveData();
                 }




         if (lowernpc == lowername)
               {

                if (CanUse == &quot;false&quot;)
                        {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;notenabled&quot;, this)));
                    return;
                       }
                     else
                      {

                long time = d[ID].Cooldown;
            if (!permission.UserHasPermission(player.userID.ToString(), &quot;npctp.one&quot;))                {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;noperm&quot;, this)));
                    return;
                }
                if (time &gt; timeStamp &amp;&amp; time != 0.0)
                {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;cdTime&quot;, this, player.UserIDString), (int)(time - timeStamp) / 60));
                }
                else
                {
                    d[ID].Cooldown = (long)timeStamp + cooldownTime;
                    SaveData();
   object success = Spawns.Call(&quot;GetRandomSpawn&quot;, spawn);
   if (success is Vector3) // Check if the returned type is Vector3
   {
      Vector3 location = (Vector3) success;    
      rust.RunServerCommand($&quot;teleport.topos {player.userID} {location.x} {location.y} {location.z}&quot;);
    }
   else PrintError((string)newpos); // Otherwise print the error message to console so server owners know there is a problem

  }
}
}


        if (lowernpc1 == lowername)
               {
                if (CanUse1 == &quot;false&quot;)
                        {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;notenabled&quot;, this)));
                    return;
                       }
                     else
                      {

                   
                    

                long time = d[ID].Cooldown2;
            if (!permission.UserHasPermission(player.userID.ToString(), &quot;npctp.two&quot;))                {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;noperm&quot;, this)));
                    return;
                }
                if (time &gt; timeStamp &amp;&amp; time != 0.0)
                {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;cdTime&quot;, this, player.UserIDString), (int)(time - timeStamp) / 60));
                }
                else
                {
                  if (Economics &amp;&amp; useEconomics)
                      if (CheckPlayerMoney(player, buyMoney))
                        {

                    d[ID].Cooldown2 = (long)timeStamp + cooldownTime2;
                    SaveData();
   object success = Spawns.Call(&quot;GetRandomSpawn&quot;, spawn1);
   if (success is Vector3) // Check if the returned type is Vector3
   {
      Vector3 location = (Vector3) success;    
      rust.RunServerCommand($&quot;teleport.topos {player.userID} {location.x} {location.y} {location.z}&quot;);
    }
   else PrintError((string)newpos); // Otherwise print the error message to console so server owners know there is a problem

             }
           }
      }
}



       if (lowernpc2 == lowername)
                       {
                if (CanUse2 == &quot;false&quot;)
                        {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;notenabled&quot;, this)));
                    return;
                       }
                     else
                      {
            long time = d[ID].Cooldown3;
            if (!permission.UserHasPermission(player.userID.ToString(), &quot;npctp.command&quot;))                {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;noperm&quot;, this)));
                    return;
                }
                if (time &gt; timeStamp &amp;&amp; time != 0.0)
                {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;cdTime&quot;, this, player.UserIDString), (int)(time - timeStamp) / 60));
                }
                else
                {
                    d[ID].Cooldown3 = (long)timeStamp + cooldownTime3;
                    SaveData();
               rust.RunServerCommand($&quot;{command} {player.userID} {arrangements}&quot;);

               }
  }

}

       if (lowernpc3 == lowername2)
                       {
                if (CanUse3 == &quot;false&quot;)
                        {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;notenabled&quot;, this)));
                    return;
                       }
                     else
                      {
            long time = d[ID].Cooldown4;
            if (!permission.UserHasPermission(player.userID.ToString(), &quot;npctp.name&quot;))                {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;noperm&quot;, this)));
                    return;
                }
                if (time &gt; timeStamp &amp;&amp; time != 0.0)
                {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;cdTime&quot;, this, player.UserIDString), (int)(time - timeStamp) / 60));
                }
                else
                {
                    d[ID].Cooldown4 = (long)timeStamp + cooldownTime4;
                    SaveData();
               rust.RunServerCommand($&quot;teleport.topos {player.userID} {x} {y} {z}&quot;);

               }
  }


        #endregion


           }

       }

}

}
      


</pre>
</div><br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>       #region Localization     


  lang.RegisterMessages(new Dictionary&lt;string, string&gt;()
    {
            {&quot;title&quot;, &quot;&lt;color=orange&gt;Npc&lt;/color&gt; : &quot;},
            {&quot;cdTime&quot;, &quot;You must wait another {0} minutes and some seconds before using me again&quot; },
            {&quot;noperm&quot;, &quot;You do not have permissions to talk to me!&quot; },
            {&quot;notenabled&quot;, &quot;Sorry i am not enabled!&quot; },
            [&quot;nomoney&quot;] = &quot;You do not have enough money ({0}) to talk to me!&quot;
    }, this);
}
#endregion</pre>
</div><br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>(17:52:22) | [Oxide] 17:52 [Error] Error while compiling Npctp.cs(100,36): error CS1525: Unexpected symbol `as'
</pre>
</div></div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>Your error isn&#039;t with that new code. Look on line 100. Also, please use Visual Studio and format the code, it hurts the eyes. <img src="styles/default/xenforo/clear.png" class="mceSmilieSprite mceSmilie2" alt=";)" title="Wink    ;)" />
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
					<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277778" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 19, 2016 at 11:56 PM">Dec 19, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277778" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/277778/permalink">#10</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-277780" class="message   " data-author="Ts3hosting">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Ts3hosting" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Ts3hosting</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					thanks i will also i got it with  <br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;nomoney&quot;, this, player.UserIDString), (int)(amount) / 60));
</pre>
</div>

<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>        Dictionary&lt;string, string&gt; messages = new Dictionary&lt;string, string&gt;()
        {
            {&quot;title&quot;, &quot;&lt;color=orange&gt;Npc&lt;/color&gt; : &quot;},
            {&quot;cdTime&quot;, &quot;You must wait another {0} minutes and some seconds before using me again&quot; },
            {&quot;noperm&quot;, &quot;You do not have permissions to talk to me!&quot; },
            {&quot;notenabled&quot;, &quot;Sorry i am not enabled!&quot; },
            {&quot;nomoney&quot;, &quot;Sorry you need {0} to talk to me!&quot; }
       };</pre>
</div>
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Ts3hosting</a>,</span>
					<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277780" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 20, 2016 at 12:02 AM">Dec 20, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277780" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/277780/permalink">#11</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-277784" class="message  staff " data-author="Wulf">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto" itemprop="name">Wulf</a>
			<em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="Ts3hosting">
	<aside>
		
			<div class="attribution type">Ts3hosting said:
				
					<a href="goto/post?id=277780#post-277780" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">thanks i will also i got it with <br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;nomoney&quot;, this, player.UserIDString), (int)(amount) / 60));
</pre>
</div>

<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>        Dictionary&lt;string, string&gt; messages = new Dictionary&lt;string, string&gt;()
        {
            {&quot;title&quot;, &quot;&lt;color=orange&gt;Npc&lt;/color&gt; : &quot;},
            {&quot;cdTime&quot;, &quot;You must wait another {0} minutes and some seconds before using me again&quot; },
            {&quot;noperm&quot;, &quot;You do not have permissions to talk to me!&quot; },
            {&quot;notenabled&quot;, &quot;Sorry i am not enabled!&quot; },
            {&quot;nomoney&quot;, &quot;Sorry you need {0} to talk to me!&quot; }
       };</pre>
</div></div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>The error doesn&#039;t have anything to do with that code.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
					<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277784" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 20, 2016 at 12:07 AM">Dec 20, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277784" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/277784/permalink">#12</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-277800" class="message   " data-author="Ts3hosting">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Ts3hosting" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Ts3hosting</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					I got it all working.. idn if if there is better ways to do my code or not but if anyone wants to look threw it and let me know <br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>sing System.Collections.Generic;
using System;
using Oxide.Core;
using Oxide.Core.Plugins;
using Oxide.Core.Configuration;
using Oxide.Game.Rust.Cui;
using Newtonsoft.Json;
using UnityEngine;
using Newtonsoft.Json.Converters;
using Newtonsoft.Json.Linq;
using Oxide.Core.Libraries.Covalence;
using static UnityEngine.Vector3;

namespace Oxide.Plugins
{
    [Info(&quot;Npctp&quot;, &quot;Ts3hosting&quot;, &quot;2.2.3&quot;, ResourceId = 2229)]
    [Description(&quot;Some NPC Controle&quot;)]

    class Npctp : RustPlugin
    {
        #region Initialization


        [PluginReference]
        Plugin Spawns;
        [PluginReference]
        Plugin Economics;


        PlayerCooldown pcdData;
        private DynamicConfigFile PCDDATA;

        private static int cooldownTime = 3600;
        private static int cooldownTime2 = 3600;
        private static int cooldownTime3 = 3600;
        private static int cooldownTime4 = 60;
        private static bool useEconomics = true;
        private static int buyMoney = 500;
        private static int buyMoney1 = 500;
        private static int buyMoney2 = 500;
        private static int buyMoney3 = 500;


        private string setx;
        private string sety;
        private string setz;



        private static int auth = 2;
        private static bool noAdminCooldown = false;


        private bool Changed;
        private string text;
        private bool displayoneveryconnect;

        private string NpcID;
        private string NpcID1;
        private string NpcID2;
        private string NpcID3;


        private string SpawnsFile;
        private string SpawnsFile1;


        private string command;
        private string arrangements;



        private string CanUse = &quot;false&quot;;
        private string CanUse1 = &quot;false&quot;;
        private string CanUse2 = &quot;false&quot;;
        private string CanUse3 = &quot;false&quot;;



        #region Localization      
        Dictionary&lt;string, string&gt; messages = new Dictionary&lt;string, string&gt;()
        {
            {&quot;title&quot;, &quot;&lt;color=orange&gt;Npc&lt;/color&gt; : &quot;},
            {&quot;cdTime&quot;, &quot;You must wait another {0} minutes and some seconds before using me again&quot; },
            {&quot;noperm&quot;, &quot;You do not have permissions to talk to me!&quot; },
            {&quot;notenabled&quot;, &quot;Sorry i am not enabled!&quot; },
            {&quot;nomoney&quot;, &quot;Sorry you need {0} to talk to me!&quot; },
            {&quot;charged&quot;, &quot;Thanks i only took {0} from you!&quot; }




       };
        #endregion


        void Loaded()
        {
            PCDDATA = Interface.Oxide.DataFileSystem.GetFile(&quot;NpcTP_data&quot;);
            LoadData();
            LoadVariables();
            RegisterPermissions();
            lang.RegisterMessages(messages, this);
            Puts(&quot;Thanks for using NPCTP drop me a line if you need anything added.&quot;);


        }

        object GetConfig(string menu, string datavalue, object defaultValue)
        {
            var data = Config[menu] as Dictionary&lt;string, object&gt;;
            if (data == null)
            {
                data = new Dictionary&lt;string, object&gt;();
                Config[menu] = data;
                Changed = true;
            }
            object value;
            if (!data.TryGetValue(datavalue, out value))
            {
                value = defaultValue;
                data[datavalue] = value;
                Changed = true;
            }
            return value;
        }

        private void RegisterPermissions()
        {
            permission.RegisterPermission(&quot;npctp.admin&quot;, this);
            permission.RegisterPermission(&quot;npctp.one&quot;, this);
            permission.RegisterPermission(&quot;npctp.two&quot;, this);
            permission.RegisterPermission(&quot;npctp.command&quot;, this);
            permission.RegisterPermission(&quot;npctp.name&quot;, this);

        }

        private void CheckDependencies()
        {
            if (Economics == null)
                if (useEconomics)
                {
                    PrintWarning($&quot;Economics could not be found! Disabling money feature&quot;);
                    useEconomics = false;
                }
        }


        void LoadVariables()
        {

            useEconomics = Convert.ToBoolean(GetConfig(&quot;SETTINGS&quot;, &quot;useEconomics&quot;, false));

            NpcID = Convert.ToString(GetConfig(&quot;NpcOne&quot;, &quot;NpcID&quot;, &quot;123456789&quot;));
            buyMoney1 = Convert.ToInt32(GetConfig(&quot;NpcOne&quot;, &quot;Money&quot;, &quot;500&quot;));
            CanUse = Convert.ToString(GetConfig(&quot;NpcOne&quot;, &quot;EnableNpcOne&quot;, &quot;false&quot;));
            SpawnsFile = Convert.ToString(GetConfig(&quot;NpcOne&quot;, &quot;SpawnsFile&quot;, &quot;spawnfile&quot;));
            cooldownTime = Convert.ToInt32(GetConfig(&quot;NpcOne&quot;, &quot;cooldownTime&quot;, &quot;3600&quot;));


            NpcID1 = Convert.ToString(GetConfig(&quot;NpcTwo&quot;, &quot;NpcID&quot;, &quot;123456789&quot;));
            buyMoney = Convert.ToInt32(GetConfig(&quot;NpcTwo&quot;, &quot;Money&quot;, &quot;500&quot;));
            CanUse1 = Convert.ToString(GetConfig(&quot;NpcTwo&quot;, &quot;EnableNpcTwo&quot;, &quot;false&quot;));
            SpawnsFile1 = Convert.ToString(GetConfig(&quot;NpcTwo&quot;, &quot;SpawnsFile&quot;, &quot;spawnfile&quot;));
            cooldownTime2 = Convert.ToInt32(GetConfig(&quot;NpcTwo&quot;, &quot;cooldownTime&quot;, &quot;3600&quot;));

            NpcID2 = Convert.ToString(GetConfig(&quot;NpcCommand&quot;, &quot;NpcID&quot;, &quot;123456789&quot;));
            buyMoney2 = Convert.ToInt32(GetConfig(&quot;NpcCommand&quot;, &quot;Money&quot;, &quot;500&quot;));
            CanUse2 = Convert.ToString(GetConfig(&quot;NpcCommand&quot;, &quot;EnableNpcCommand&quot;, &quot;false&quot;));
            command = Convert.ToString(GetConfig(&quot;NpcCommand&quot;, &quot;Command&quot;, &quot;inv.giveplayer&quot;));
            arrangements = Convert.ToString(GetConfig(&quot;NpcCommand&quot;, &quot;Arrangements&quot;, &quot;kit MVP&quot;));
            cooldownTime3 = Convert.ToInt32(GetConfig(&quot;NpcCommand&quot;, &quot;cooldownTime&quot;, &quot;86400&quot;));

            NpcID3 = Convert.ToString(GetConfig(&quot;NpcNAME&quot;, &quot;NpcNAME&quot;, &quot;GoToTown&quot;));
            buyMoney3 = Convert.ToInt32(GetConfig(&quot;NpcNAME&quot;, &quot;Money&quot;, &quot;500&quot;));
            CanUse3 = Convert.ToString(GetConfig(&quot;NpcNAME&quot;, &quot;EnableNpcName&quot;, &quot;false&quot;));
            setx = Convert.ToString(GetConfig(&quot;NpcNAME&quot;, &quot;set x&quot;, &quot;100&quot;));
            sety = Convert.ToString(GetConfig(&quot;NpcNAME&quot;, &quot;set y&quot;, &quot;50&quot;));
            setz = Convert.ToString(GetConfig(&quot;NpcNAME&quot;, &quot;set z&quot;, &quot;100&quot;));
            cooldownTime4 = Convert.ToInt32(GetConfig(&quot;NpcNAME&quot;, &quot;cooldownTime&quot;, &quot;360&quot;));



            if (Changed)
            {
                SaveConfig();
                Changed = false;

            }
        }

        protected override void LoadDefaultConfig()
        {
            Puts(&quot;Creating a new configuration file!&quot;);
            Config.Clear();
            LoadVariables();
        }



        #endregion




        #region Classes and Data Management      
        class PlayerCooldown
        {
            public Dictionary&lt;ulong, PCDInfo&gt; pCooldown = new Dictionary&lt;ulong, PCDInfo&gt;();


            public PlayerCooldown() { }
        }
        class PCDInfo
        {
            public long Cooldown;
            public long Cooldown2;
            public long Cooldown3;
            public long Cooldown4;
            public PCDInfo() { }
            public PCDInfo(long cd)
            {
                Cooldown = cd;
                Cooldown2 = cd;
                Cooldown3 = cd;
                Cooldown4 = cd;




            }
        }

        void SaveData()
        {
            PCDDATA.WriteObject(pcdData);
        }
        void LoadData()
        {
            try
            {
                pcdData = Interface.GetMod().DataFileSystem.ReadObject&lt;PlayerCooldown&gt;(&quot;NpcTP_data&quot;);
            }
            catch
            {
                Puts(&quot;Couldn't load NPCTP data, creating new datafile&quot;);
                pcdData = new PlayerCooldown();
            }
        }

        #endregion


        #region Cooldown Management      

        static double GrabCurrentTime() =&gt; DateTime.UtcNow.Subtract(new DateTime(1970, 1, 1, 0, 0, 0)).TotalSeconds;


        #endregion


        private bool CheckPlayerMoney(BasePlayer player, int amount)
        {
            if (useEconomics)
            {
                double money = (double)Economics?.CallHook(&quot;GetPlayerMoney&quot;, player.userID);
                if (money &gt;= amount)
                {
                    money = money - amount;
                    Economics?.CallHook(&quot;Set&quot;, player.userID, money);
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;charged&quot;, this, player.UserIDString), (int)(amount)));
                    return true;
                }
                SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;nomoney&quot;, this, player.UserIDString), (int)(amount)));

            }
            return false;
        }










        #region USENPC



        void OnUseNPC(BasePlayer npc, BasePlayer player, Vector3 destination)
        {
            ulong playerID = player.userID;
            string lowername = npc.userID.ToString();
            string lowername2 = npc.displayName;

            var d = pcdData.pCooldown;
            ulong ID = player.userID;
            double timeStamp = GrabCurrentTime();


            string lowernpc = NpcID.ToString();
            string lowernpc1 = NpcID1.ToString();
            string lowernpc2 = NpcID2.ToString();
            string lowernpc3 = NpcID3;

            string x = setx;
            string y = sety;
            string z = setz;



            object newpos = null;
            string spawn = SpawnsFile;
            string spawn1 = SpawnsFile1;


            if (!d.ContainsKey(ID))
            {
                d.Add(ID, new PCDInfo((long)timeStamp));
                SaveData();
            }





            if (lowernpc == lowername)
            {

                if (CanUse == &quot;false&quot;)
                {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;notenabled&quot;, this)));
                    return;
                }
                else
                {

                    long time = d[ID].Cooldown;
                    if (!permission.UserHasPermission(player.userID.ToString(), &quot;npctp.one&quot;))
                    {
                        SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;noperm&quot;, this)));
                        return;
                    }
                    if (time &gt; timeStamp &amp;&amp; time != 0.0)
                    {
                        SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;cdTime&quot;, this, player.UserIDString), (int)(time - timeStamp) / 60));
                        return;
                    }
                    else if (!useEconomics)
                    {
                        d[ID].Cooldown = (long)timeStamp + cooldownTime;
                        SaveData();
                        object success = Spawns.Call(&quot;GetRandomSpawn&quot;, spawn);
                        if (success is Vector3) // Check if the returned type is Vector3
                        {
                            Vector3 location = (Vector3)success;
                            rust.RunServerCommand($&quot;teleport.topos {player.userID} {location.x} {location.y} {location.z}&quot;);
                        }
                        else PrintError((string)newpos); // Otherwise print the error message to console so server owners know there is a problem

                    }

                    if (useEconomics)
                        if (CheckPlayerMoney(player, buyMoney1))
                        {
                            d[ID].Cooldown = (long)timeStamp + cooldownTime;
                            SaveData();
                            object success = Spawns.Call(&quot;GetRandomSpawn&quot;, spawn);
                            if (success is Vector3) // Check if the returned type is Vector3
                            {
                                Vector3 location = (Vector3)success;
                                rust.RunServerCommand($&quot;teleport.topos {player.userID} {location.x} {location.y} {location.z}&quot;);
                            }
                            else PrintError((string)newpos); // Otherwise print the error message to console so server owners know there is a problem

                        }


                }
            }


            if (lowernpc1 == lowername)
            {
                if (CanUse1 == &quot;false&quot;)
                {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;notenabled&quot;, this)));
                    return;
                }
                else
                {

                    long time = d[ID].Cooldown2;
                    if (!permission.UserHasPermission(player.userID.ToString(), &quot;npctp.two&quot;))
                    {
                        SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;noperm&quot;, this)));
                        return;
                    }
                    if (time &gt; timeStamp &amp;&amp; time != 0.0)
                    {
                        SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;cdTime&quot;, this, player.UserIDString), (int)(time - timeStamp) / 60));
                        return;
                    }
                    else if (!useEconomics)
                    {
                        object success = Spawns.Call(&quot;GetRandomSpawn&quot;, spawn1);
                        if (success is Vector3) // Check if the returned type is Vector3
                        {
                            Vector3 location = (Vector3)success;
                            rust.RunServerCommand($&quot;teleport.topos {player.userID} {location.x} {location.y} {location.z}&quot;);
                        }
                        else PrintError((string)newpos); // Otherwise print the error message to console so server owners know there is a problem
                    }

                    if (useEconomics)
                        if (CheckPlayerMoney(player, buyMoney))
                        {
                            object success = Spawns.Call(&quot;GetRandomSpawn&quot;, spawn1);
                            if (success is Vector3) // Check if the returned type is Vector3
                            {
                                Vector3 location = (Vector3)success;
                                rust.RunServerCommand($&quot;teleport.topos {player.userID} {location.x} {location.y} {location.z}&quot;);
                            }
                            else PrintError((string)newpos); // Otherwise print the error message to console so server owners know there is a problem
                        }

                }
            }


            if (lowernpc2 == lowername)
            {
                if (CanUse2 == &quot;false&quot;)
                {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;notenabled&quot;, this)));
                    return;
                }
                else
                {
                    long time = d[ID].Cooldown3;
                    if (!permission.UserHasPermission(player.userID.ToString(), &quot;npctp.command&quot;))
                    {
                        SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;noperm&quot;, this)));
                        return;
                    }
                    if (time &gt; timeStamp &amp;&amp; time != 0.0)
                    {
                        SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;cdTime&quot;, this, player.UserIDString), (int)(time - timeStamp) / 60));
                        return;
                    }
                    else if (!useEconomics)
                    {
                        d[ID].Cooldown3 = (long)timeStamp + cooldownTime3;
                        SaveData();

                        rust.RunServerCommand($&quot;{command} {player.userID} {arrangements}&quot;);

                    }

                    if (useEconomics)
                        if (CheckPlayerMoney(player, buyMoney2))
                        {
                            d[ID].Cooldown3 = (long)timeStamp + cooldownTime3;
                            SaveData();

                            rust.RunServerCommand($&quot;{command} {player.userID} {arrangements}&quot;);

                        }
                    }
                }

            if (lowernpc3 == lowername2)
            {
                if (CanUse3 == &quot;false&quot;)
                {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;notenabled&quot;, this)));
                    return;
                }
                else
                {
                    long time = d[ID].Cooldown4;
                    if (!permission.UserHasPermission(player.userID.ToString(), &quot;npctp.name&quot;))
                    {
                        SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;noperm&quot;, this)));
                        return;
                    }
                    if (time &gt; timeStamp &amp;&amp; time != 0.0)
                    {
                        SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;cdTime&quot;, this, player.UserIDString), (int)(time - timeStamp) / 60));
                        return;
                    }
                    else if (!useEconomics)
                    {

                        d[ID].Cooldown4 = (long)timeStamp + cooldownTime4;
                        SaveData();

                        rust.RunServerCommand($&quot;teleport.topos {player.userID} {x} {y} {z}&quot;);

                    }
                    if (useEconomics)
                        if (CheckPlayerMoney(player, buyMoney3))
                        {
                            d[ID].Cooldown4 = (long)timeStamp + cooldownTime4;
                            SaveData();

                            rust.RunServerCommand($&quot;teleport.topos {player.userID} {x} {y} {z}&quot;);

                        }


                }


                #endregion


            }

        }

    }

}



</pre>
</div>
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Ts3hosting</a>,</span>
					<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277800" title="Permalink" class="datePermalink"><span class="DateTime" title="Dec 20, 2016 at 2:13 AM">Dec 20, 2016</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-adding-static-int-to-messages.22570/#post-277800" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/277800/permalink">#13</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
		
	</ol>

	

	

</form>


	<div class="pageNavLinkGroup">
		
			
				<div class="linkGroup">
					
				</div>
			
			<div class="linkGroup" style="display: none"><a href="javascript:" class="muted JsOnly DisplayIgnoredContent Tooltip" title="Show hidden content by ">Show Ignored Content</a></div>

			
		
	</div>












	


												
												
					
			
						
			
						
			


			<footer>
				


<div class="footer">
		<div class="pageContent">
			
            
            
            </div>
			
		
			
			
			<span class="helper"></span>
			<ul class="footerLinks">
			
				
				<li><a href="https://oxidemod.org/terms/">Terms and Rules</a></li>
				
				
				<li><a href="https://umod.org/community" target="_blank">Contact Us</a></li>
			
			</ul>
			
			<span class="helper"></span>
		</div>
</div>

			</footer>
		</div>
	</div>
</div>

<header>
	


<div id="header">
	<div class="headerWidth">
		<div id="logoBlock">
			
			
			<div id="logo"><a href="https://oxidemod.org/">
				<span></span>
				<img src="styles/oxide/logo.png" alt="Oxide" />
			</a></div>
			
			
			<span class="helper"></span>

</div>
		


<div id="navigation" class="">
	<div class="pageContent">
		<nav>
			<div class="navTabs">
				<ul class="publicTabs">

					
					

					
					

					
					
						<li class="navTab forums Popup PopupControl PopupClosed PopupContainerControl">
							<a href="https://oxidemod.org/" class="navLink" rel="Menu">Forums</a>

							
						</li>
					

					<li class="navTab PopupClosed">
	<a href="https://umod.org/documentation" class="navLink">Docs</a>
</li>


					
					
						
							<li class="navTab Popup PopupControl PopupClosed PopupContainerControl">

							<a href="https://oxidemod.org/downloads/" class="navLink" rel="Menu"> Downloads </a>

							
						</li>
						
					
						
							<li class="navTab Popup PopupControl PopupClosed PopupContainerControl">

							<a href="https://oxidemod.org/plugins/" class="navLink" rel="Menu"> Plugins </a>

							
						</li>
						
					
					

					
					

					
					

					
					<li class="navTab selected"><div class="tabLinks"></div></li>
				</ul>

				
				
			</div>

			<span class="helper"></span>
		</nav>
	</div>
</div>
	</div>
</div>

	
	
</header>

</div>

<script>


jQuery.extend(true, XenForo,
{
	visitor: { user_id: 0 },
	serverTimeInfo:
	{
		now: 1548596845,
		today: 1548547200,
		todayDow: 0
	},
	_lightBoxUniversal: "0",
	_enableOverlays: "1",
	_animationSpeedMultiplier: "1",
	_overlayConfig:
	{
		top: "10%",
		speed: 200,
		closeSpeed: 100,
		mask:
		{
			color: "rgb(255, 255, 255)",
			opacity: "0.6",
			loadSpeed: 200,
			closeSpeed: 100
		}
	},
	_ignoredUsers: [],
	_loadedScripts: {"thread_view":true,"message":true,"bb_code":true,"message_user_info":true},
	_cookieConfig: { path: "/", domain: ".oxidemod.org", prefix: "ih_xfid_"},
	_csrfToken: "",
	_csrfRefreshUrl: "login/csrf-token-refresh",
	_jsVersion: "f33b43a2"
});
jQuery.extend(XenForo.phrases,
{
	cancel: "Cancel",

	a_moment_ago:    "A moment ago",
	one_minute_ago:  "1 minute ago",
	x_minutes_ago:   "%minutes% minutes ago",
	today_at_x:      "Today at %time%",
	yesterday_at_x:  "Yesterday at %time%",
	day_x_at_time_y: "%day% at %time%",

	day0: "Sunday",
	day1: "Monday",
	day2: "Tuesday",
	day3: "Wednesday",
	day4: "Thursday",
	day5: "Friday",
	day6: "Saturday",

	_months: "January,February,March,April,May,June,July,August,September,October,November,December",
	_daysShort: "Sun,Mon,Tue,Wed,Thu,Fri,Sat",

	following_error_occurred: "The following error occurred",
	server_did_not_respond_in_time_try_again: "The server did not respond in time. Please try again.",
	logging_in: "Logging in",
	click_image_show_full_size_version: "Click this image to show the full-size version.",
	show_hidden_content_by_x: "Show hidden content by {names}"
});




</script>




</body>
</html>