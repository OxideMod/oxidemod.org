<!DOCTYPE html>
<html id="XenForo" lang="en-US" dir="LTR" class="Public NoJs LoggedOut NoSidebar  Responsive" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>

	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
	
		<meta name="viewport" content="width=device-width, initial-scale=1" />
	
	
		<base href="https://oxidemod.org/" />
		<script>
			var _b = document.getElementsByTagName('base')[0], _bH = "https://oxidemod.org/";
			if (_b && _b.href != _bH) _b.href = _bH;
		</script>
	

	<title>Help with UI return true/false | Oxide</title>
	
	<noscript><style>.JsOnly, .jsOnly { display: none !important; }</style></noscript>
	<link rel="stylesheet" href="css.php?css=xenforo,form,public&amp;style=5&amp;dir=LTR&amp;d=1548544754" />
	<link rel="stylesheet" href="css.php?css=bb_code,message,message_user_info,thread_view&amp;style=5&amp;dir=LTR&amp;d=1548544754" />
	
	

	
		<script src="js/jquery/jquery-1.11.0.min.js"></script>	
		
	<script src="js/xenforo/xenforo.js?_v=f33b43a2"></script>

	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
	<meta name="mobile-web-app-capable" content="yes" />
<link rel="icon" sizes="196x196" href="https://oxidemod.org/styles/oxide/logo.og.png" />
<link rel="apple-touch-icon" href="https://oxidemod.org/styles/oxide/logo.og.png" />
	<link rel="alternate" type="application/rss+xml" title="RSS feed for Oxide" href="forums/-/index.rss" />
		
	
	<link rel="canonical" href="https://oxidemod.org/threads/help-with-ui-return-true-false.23378/" />
	<meta name="description" content="void UseUI(BasePlayer player, string msg)
        {
            var elements = new CuiElementContainer();

            var mainName = elements.Add(new..." />	<meta property="og:site_name" content="Oxide" />
	<meta property="og:image" content="https://oxidemod.org/styles/default/xenforo/avatars/avatar_m.png" />
	<meta property="og:image" content="https://oxidemod.org/styles/oxide/logo.og.png" />
	<meta property="og:type" content="article" />
	<meta property="og:url" content="https://oxidemod.org/threads/help-with-ui-return-true-false.23378/" />
	<meta property="og:title" content="Help with UI return true/false" />
	<meta property="og:description" content="void UseUI(BasePlayer player, string msg)
        {
            var elements = new CuiElementContainer();

            var mainName = elements.Add(new..." />
	
	
	

</head>

<body class="node4 node1 node104 node105 SelectQuotable">




<div id="headerMover">
	<div id="headerProxy"></div>

<div id="content" class="thread_view">
	<div class="pageWidth">
		<div class="pageContent">
			
			
			

			

			
			
				<div class="breadBoxTop ">
					
					

<nav>
	
		
			
				
			
		
			
				
			
		
			
				
			
		
			
				
			
		
	

	<fieldset class="breadcrumb">			
		<div class="boardTitle"><strong>Oxide</strong></div>
		
		<span class="crumbs">
			
				

					
						<span class="crust selectedTabCrumb" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
							<a href="https://oxidemod.org/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Forums</span></a>
							<span class="arrow"><span>&gt;</span></span>
						</span>
					

					
						
							<span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
								<a href="https://oxidemod.org/#oxide-project.1" class="crumb" rel="up" itemprop="url"><span itemprop="title">Oxide Project</span></a>
								<span class="arrow"><span>&gt;</span></span>
							</span>
						
							<span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
								<a href="https://oxidemod.org/categories/archive.104/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Archive</span></a>
								<span class="arrow"><span>&gt;</span></span>
							</span>
						
							<span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
								<a href="https://oxidemod.org/categories/plugin-development.105/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Plugin Development</span></a>
								<span class="arrow"><span>&gt;</span></span>
							</span>
						
							<span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
								<a href="https://oxidemod.org/forums/rust-development.4/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Rust Development</span></a>
								<span class="arrow"><span>&gt;</span></span>
							</span>
						
					
				
			
		</span>
	</fieldset>
</nav>
				</div>
			
			
	
			



			
				

						
			
			
			
						
						
													
								<!-- h1 title, description -->
								<div class="titleBar">
									
									<h1>
										
											
												<a href="https://oxidemod.org/threads/help-with-ui-return-true-false.23378/">Help with UI return true/false</a>
											
										
									</h1>

									<p id="pageDescription" class="muted ">
	Discussion in '<a href="forums/rust-development.4/">Rust Development</a>' started by <a class="username" dir="auto">Ts3hosting</a>, <a href="threads/help-with-ui-return-true-false.23378/"><span class="DateTime" title="Jan 29, 2017 at 7:50 PM">Jan 29, 2017</span></a>.
</p>
								</div>
							
						
						
						
						

						

	

























	




<div class="pageNavLinkGroup">
	<div class="linkGroup SelectionCountContainer">
		
		
	</div>

	
</div>






<form action="inline-mod/post/switch" method="post"
	class="InlineModForm section"
	data-cookieName="posts"
	data-controls="#InlineModControls"
	data-imodOptions="#ModerationSelect option">

	<ol class="messageList" id="messageList">
		
			
				


<li id="post-290227" class="message   " data-author="Ts3hosting">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Ts3hosting" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Ts3hosting</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>        void UseUI(BasePlayer player, string msg)
        {
            var elements = new CuiElementContainer();

            var mainName = elements.Add(new CuiPanel
            {
                Image =
                {
                    Color = &quot;0.1 0.1 0.1 1&quot;
                },
                RectTransform =
                {
                    AnchorMin = &quot;0 0&quot;,
                    AnchorMax = &quot;1 1&quot;
                },
                CursorEnabled = true
            }, &quot;Overlay&quot;, &quot;Npctp&quot;);
            if(backroundimage == true)
            {
                elements.Add(new CuiElement
                { 
                    Parent = &quot;Npctp&quot;,
                    Components =
                    {
                        new CuiRawImageComponent
                        {
                            Url = backroundimageurl,
                            Sprite = &quot;assets/content/textures/generic/fulltransparent.tga&quot;
                        },
                        new CuiRectTransformComponent
                        {
                            AnchorMin = &quot;0 0&quot;,
                            AnchorMax = &quot;1 1&quot;
                        }
                    }
                });
            }                
            var Agree = new CuiButton
            {
                Button =
                {
                    Close = mainName,
                    Color = &quot;0 255 0 1&quot;
                },
                RectTransform =
                {
                    AnchorMin = &quot;0.2 0.16&quot;,
                    AnchorMax = &quot;0.45 0.2&quot;
                },
                Text =
                {
                    Text = &quot;I Agree&quot;,
                    FontSize = 22,
                    Align = TextAnchor.MiddleCenter
                }
            };
            var Disagree = new CuiButton
            {
               
               
                Button =
                {
                    Command = &quot;global.hardestcommandtoeverguess&quot;,
                    Close = mainName,
                    Color = &quot;255 0 0 1&quot;
                },
                RectTransform =
                {
                    AnchorMin = &quot;0.5 0.16&quot;,
                    AnchorMax = &quot;0.75 0.2&quot;
                },
                Text =
                {
                    Text = &quot;I Disagree&quot;,
                    FontSize = 22,
                    Align = TextAnchor.MiddleCenter
                }
            };
            elements.Add(new CuiLabel
            {
                Text =
                {
                    Text = msg,
                    FontSize = 22,
                    Align = TextAnchor.MiddleCenter
                },
                RectTransform =
                {
                    AnchorMin = &quot;0 0.20&quot;,
                    AnchorMax = &quot;1 0.9&quot;
                }
            }, mainName);
            elements.Add(Agree, mainName);
            elements.Add(Disagree, mainName);
            CuiHelper.AddUi(player, elements);
        }       
       
       
       
       
        void DisplayUI(BasePlayer player)
        {
       
                   
                    string msg = &quot;&quot;;
                   
                    msg = msg + lang.GetMessage(&quot;chargeyesno&quot;, this, player.UserIDString);
                    UseUI(player, msg.ToString());
   
                }
</pre>
</div>

<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>                if (useUI)
                    DisplayUI(player);
                    {
                    }    </pre>
</div><br />
how would i make it so that it will return true; if agree and return false; if disagree <br />
right now it is displaying the ui and still continuing the script with no input.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Ts3hosting</a>,</span>
					<a href="threads/help-with-ui-return-true-false.23378/" title="Permalink" class="datePermalink"><span class="DateTime" title="Jan 29, 2017 at 7:50 PM">Jan 29, 2017</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-ui-return-true-false.23378/" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/290227/permalink">#1</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-290239" class="message   " data-author="sami37">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="sami37" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">sami37</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					remember that if you want to return true/false, you have to make your function a bool and not void<br />
<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>bool UseUI(BasePlayer player, string msg)
{
   if(CuiHelper.AddUi(player, elements))
       return true;
    return false;
}</pre>
</div>Maybe try that
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">sami37</a>,</span>
					<a href="threads/help-with-ui-return-true-false.23378/#post-290239" title="Permalink" class="datePermalink"><span class="DateTime" title="Jan 29, 2017 at 8:14 PM">Jan 29, 2017</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-ui-return-true-false.23378/#post-290239" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/290239/permalink">#2</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-290244" class="message   " data-author="Ts3hosting">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Ts3hosting" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Ts3hosting</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					where would i add in the <br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>   if(CuiHelper.AddUi(player, elements))
       return true;
    return false;</pre>
</div>
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Ts3hosting</a>,</span>
					<a href="threads/help-with-ui-return-true-false.23378/#post-290244" title="Permalink" class="datePermalink"><span class="DateTime" title="Jan 29, 2017 at 8:31 PM">Jan 29, 2017</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-ui-return-true-false.23378/#post-290244" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/290244/permalink">#3</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-290254" class="message   " data-author="sami37">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="sami37" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">sami37</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="Ts3hosting">
	<aside>
		
			<div class="attribution type">Ts3hosting said:
				
					<a href="goto/post?id=290244#post-290244" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">where would i add in the<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>   if(CuiHelper.AddUi(player, elements))
       return true;
    return false;</pre>
</div></div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>at the end of your UseUI function
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">sami37</a>,</span>
					<a href="threads/help-with-ui-return-true-false.23378/#post-290254" title="Permalink" class="datePermalink"><span class="DateTime" title="Jan 29, 2017 at 9:35 PM">Jan 29, 2017</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-ui-return-true-false.23378/#post-290254" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/290254/permalink">#4</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-290256" class="message   " data-author="Ts3hosting">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Ts3hosting" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Ts3hosting</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="sami37">
	<aside>
		
			<div class="attribution type">sami37 said:
				
					<a href="goto/post?id=290254#post-290254" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">at the end of your UseUI function</div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div><br />
i tried that with no luck the ui pops up and still runs with no input to the UI<br />
<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>using System.Collections.Generic;
using System;
using Oxide.Core;
using Oxide.Core.Plugins;
using Oxide.Core.Configuration;
using UnityEngine;
using Newtonsoft.Json.Linq;
using Oxide.Core.Libraries.Covalence;
using static UnityEngine.Vector3;
using System.Linq;
using Oxide.Game.Rust.Cui;

namespace Oxide.Plugins
{
    [Info(&quot;Npctp&quot;, &quot;Ts3hosting&quot;, &quot;2.2.7&quot;, ResourceId = 2229)]
    [Description(&quot;Some NPC Controle Thanks Wulf and k1lly0u&quot;)]

    class Npctp : RustPlugin
    {
        #region Initialization


        [PluginReference]
        Plugin Spawns;
        [PluginReference]
        Plugin Economics;
        [PluginReference]
        Plugin ServerRewards;

        PlayerCooldown pcdData;
        NPCTPDATA npcData;
        private DynamicConfigFile PCDDATA;
        private DynamicConfigFile NPCDATA;
       
        private bool backroundimage;
        private bool Changed;
        private string text;
        private bool displayoneveryconnect;
        private string kickmsg;
        private string backroundimageurl;

        private static int cooldownTime = 3600;

        private static int auth = 2;
        private static bool noAdminCooldown = false;

        private float Cost = 0;
        private static bool useEconomics = false;
        private static bool useRewards = false;

        #region Localization      
        Dictionary&lt;string, string&gt; messages = new Dictionary&lt;string, string&gt;()
        {
            {&quot;title&quot;, &quot;&lt;color=orange&gt;Npc&lt;/color&gt; : &quot;},
            {&quot;cdTime&quot;, &quot;You must wait another {0} minutes and some seconds before using me again&quot; },
            {&quot;noperm&quot;, &quot;You do not have permissions to talk to me!&quot; },
            {&quot;notenabled&quot;, &quot;Sorry i am not enabled!&quot; },
            {&quot;nomoney&quot;, &quot;Sorry you need {0} to talk to me!&quot; },
            {&quot;charged&quot;, &quot;Thanks i only took {0} from you!&quot; },
            {&quot;npcCommand&quot;, &quot;I just ran a Command!&quot; },
            {&quot;npcadd&quot;, &quot;Added npcID {0} to datafile and not enabled edit NpcTP_Data .&quot; },
            {&quot;npcadds&quot;, &quot;Added npcID {0} with spawnfile {1} to datafile and enabled edit NpcTP_Data for more options.&quot; },
            {&quot;npcerror&quot;, &quot;error example /npctp_add &lt;npcID&gt; &lt;spawnfile&gt; or /npctcp_add &lt;npcID&gt;&quot; },
            {&quot;nopermcmd&quot;, &quot;You do not have permissions to use this command!&quot; },
            {&quot;chargeyesno&quot;, &quot;I will charge you {0} to talk to me!&quot; },





       };
        #endregion


        void Loaded()
        {
            PCDDATA = Interface.Oxide.DataFileSystem.GetFile(&quot;NpcTp/NpcTP_Player&quot;);
            NPCDATA = Interface.Oxide.DataFileSystem.GetFile(&quot;NpcTp/NpcTP_Data&quot;);
            LoadData();
            LoadVariables();
            RegisterPermissions();
            CheckDependencies();
            lang.RegisterMessages(messages, this);
            Puts(&quot;Thanks for using NPCTP drop me a line if you need anything added.&quot;);


        }

        object GetConfig(string menu, string datavalue, object defaultValue)
        {
            var data = Config[menu] as Dictionary&lt;string, object&gt;;
            if (data == null)
            {
                data = new Dictionary&lt;string, object&gt;();
                Config[menu] = data;
                Changed = true;
            }
            object value;
            if (!data.TryGetValue(datavalue, out value))
            {
                value = defaultValue;
                data[datavalue] = value;
                Changed = true;
            }
            return value;
        }

        private void RegisterPermissions()
        {
            permission.RegisterPermission(&quot;npctp.admin&quot;, this);
            permission.RegisterPermission(&quot;npctp.default&quot;, this);
            foreach (var perm in npcData.NpcTP.Values)
            {
                if (!string.IsNullOrEmpty(perm.permission) &amp;&amp; !permission.PermissionExists(perm.permission))
                    permission.RegisterPermission(perm.permission, this);
            }       
        }

        private void CheckDependencies()
        {
            if (Economics == null)
                if (useEconomics)
                {
                    PrintWarning($&quot;Economics could not be found! Disabling money feature&quot;);
                    useEconomics = false;
                }
            if (ServerRewards == null)
                if (useRewards)
                {
                    PrintWarning($&quot;ServerRewards could not be found! Disabling RP feature&quot;);
                    useRewards = false;
                }               
            if (Spawns == null)
               {
               PrintWarning($&quot;Spawns Database could not be found you only can use command NPC all other will fail!&quot;);
              
            }

        }


        void LoadVariables()
        {

            useEconomics = Convert.ToBoolean(GetConfig(&quot;SETTINGS&quot;, &quot;useEconomics&quot;, false));
            useRewards = Convert.ToBoolean(GetConfig(&quot;SETTINGS&quot;, &quot;useRewards&quot;, false));



            if (Changed)
            {
                SaveConfig();
                Changed = false;

            }
        }

        protected override void LoadDefaultConfig()
        {
            Puts(&quot;Creating a new configuration file!&quot;);
            Config.Clear();
            LoadVariables();
        }



        #endregion




        #region Classes and Data Management   
        void SaveNpcTpData()
        {
            NPCDATA.WriteObject(npcData);
        }       

        class NPCTPDATA
        {
            public Dictionary&lt;string, NPCInfo&gt; NpcTP = new Dictionary&lt;string, NPCInfo&gt;();
       
            public NPCTPDATA() { }
        }
        class NPCInfo
        {
            public string SpawnFile;
            public int Cooldown;
            public bool CanUse;
            public float Cost;
            public bool useUI;
            public string permission;
            public bool UseCommand;
            public bool CommandOnPlayer;
            public string Command;
            public string Arrangements;
        }
   
        class PlayerCooldown
        {
            public Dictionary&lt;ulong, PCDInfo&gt; pCooldown = new Dictionary&lt;ulong, PCDInfo&gt;();


            public PlayerCooldown() { }
        }
        class PCDInfo
        {

            public Dictionary&lt;string, long&gt; npcCooldowns = new Dictionary&lt;string, long&gt;();
           
            public PCDInfo() { }
            public PCDInfo(long cd)
            {






            }
        }

        void SaveData()
        {
            PCDDATA.WriteObject(pcdData);
        }
        void LoadData()
        {
            try
            {
                pcdData = Interface.GetMod().DataFileSystem.ReadObject&lt;PlayerCooldown&gt;(&quot;NpcTp/NpcTP_Player&quot;);
            }
            catch
            {
                Puts(&quot;Couldn't load NPCTP data, creating new Playerfile&quot;);
                pcdData = new PlayerCooldown();
            }
            try
            {
            npcData = Interface.GetMod().DataFileSystem.ReadObject&lt;NPCTPDATA&gt;(&quot;NpcTp/NpcTP_Data&quot;);
           }
            catch
            {
                Puts(&quot;Couldn't load NPCTP data, creating new datafile&quot;);
                npcData = new NPCTPDATA();
            }           
        }

        #endregion


        #region Cooldown Management      

        static double GrabCurrentTime() =&gt; DateTime.UtcNow.Subtract(new DateTime(1970, 1, 1, 0, 0, 0)).TotalSeconds;


        #endregion
       
       
        private void TeleportPlayerPosition1(BasePlayer player, Vector3 destination)
        {
            if (player.net?.connection != null)
                player.ClientRPCPlayer(null, player, &quot;StartLoading&quot;, null, null, null, null, null);
            StartSleeping(player);
            player.MovePosition(destination);
            if (player.net?.connection != null)
                player.ClientRPCPlayer(null, player, &quot;ForcePositionTo&quot;, destination);
            if (player.net?.connection != null)
                player.SetPlayerFlag(BasePlayer.PlayerFlags.ReceivingSnapshot, true);
            player.UpdateNetworkGroup();
            player.SendNetworkUpdateImmediate(false);
            if (player.net?.connection == null) return;
            try { player.ClearEntityQueue(null); } catch { }
            player.SendFullSnapshot();
        }
        private void StartSleeping(BasePlayer player)
        {
            if (player.IsSleeping())
                return;
            player.SetPlayerFlag(BasePlayer.PlayerFlags.Sleeping, true);
            if (!BasePlayer.sleepingPlayerList.Contains(player))
                BasePlayer.sleepingPlayerList.Add(player);
            player.CancelInvoke(&quot;InventoryUpdate&quot;);
        }

        private bool CheckPlayerMoney(BasePlayer player, int amount)
        {
            if (useEconomics)
            {
                double money = (double)Economics?.CallHook(&quot;GetPlayerMoney&quot;, player.userID);
                if (money &gt;= amount)
                {
                    money = money - amount;
                    Economics?.CallHook(&quot;Set&quot;, player.userID, money);
                if (amount == 0)
                    return true;
                if (amount &gt; 0)   
                SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;charged&quot;, this, player.UserIDString), (int)(amount)));
                    return true;
                }
                SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;nomoney&quot;, this, player.UserIDString), (int)(amount)));

            }
            return false;
        }

        private bool CheckPlayerRP(BasePlayer player, int amount)
        {
            if (useRewards)
            {
                var money = (int)ServerRewards.Call(&quot;CheckPoints&quot;, player.userID);
                if (money &gt;= amount)
                {
                    ServerRewards.Call(&quot;TakePoints&quot;, player.userID, amount);
                    if (amount &gt; 0)
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;charged&quot;, this, player.UserIDString), (int)(amount)));
                    return true;
                    if (amount == 0)
                    return true;
                }
                SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;nomoney&quot;, this, player.UserIDString), (int)(amount)));

            }
            return false;
        }


        bool UseUI(BasePlayer player, string msg)
        {

          
            var elements = new CuiElementContainer();

            var mainName = elements.Add(new CuiPanel
            {
                Image =
                {
                    Color = &quot;0.1 0.1 0.1 1&quot;
                },
                RectTransform =
                {
                    AnchorMin = &quot;0 0&quot;,
                    AnchorMax = &quot;1 1&quot;
                },
                CursorEnabled = true
            }, &quot;Overlay&quot;, &quot;Npctp&quot;);
            if(backroundimage == true)
            {
                elements.Add(new CuiElement
                { 
                    Parent = &quot;Npctp&quot;,
                    Components =
                    {
                        new CuiRawImageComponent
                        {
                            Url = backroundimageurl,
                            Sprite = &quot;assets/content/textures/generic/fulltransparent.tga&quot;
                        },
                        new CuiRectTransformComponent
                        {
                            AnchorMin = &quot;0 0&quot;,
                            AnchorMax = &quot;1 1&quot;
                        }
                    }
                });
            }                
            var Agree = new CuiButton
            {
                Button =
                {

                    Close = mainName,
                    Color = &quot;0 255 0 1&quot;
                },
                RectTransform =
                {
                    AnchorMin = &quot;0.2 0.16&quot;,
                    AnchorMax = &quot;0.45 0.2&quot;
                },
                Text =
                {
                    Text = &quot;I Agree&quot;,
                    FontSize = 22,
                    Align = TextAnchor.MiddleCenter
                }
            };
            var Disagree = new CuiButton
            {
               
               
                Button =
                {

                    Close = mainName,
                    Color = &quot;255 0 0 1&quot;
                   
                },
                RectTransform =
                {
                    AnchorMin = &quot;0.5 0.16&quot;,
                    AnchorMax = &quot;0.75 0.2&quot;
                },
                Text =
                {
                    Text = &quot;I Disagree&quot;,
                    FontSize = 22,
                    Align = TextAnchor.MiddleCenter
                }
            };
            elements.Add(new CuiLabel
            {
                Text =
                {
                    Text = msg,
                    FontSize = 22,
                    Align = TextAnchor.MiddleCenter
                },
                RectTransform =
                {
                    AnchorMin = &quot;0 0.20&quot;,
                    AnchorMax = &quot;1 0.9&quot;
                }
            }, mainName);
            elements.Add(Agree, mainName);
            elements.Add(Disagree, mainName);
   if(CuiHelper.AddUi(player, elements))
       return true;
    return false;
           

        }   


       
       
        void DisplayUI(BasePlayer player)
        {
                   
                    string msg = &quot;&quot;;
                   
                    msg = msg + lang.GetMessage(&quot;chargeyesno&quot;, this, player.UserIDString);
                    UseUI(player, msg.ToString());
   
                }

       
       
       
       
       

       
       
       
       
       
       
        #region USENPC

        [ChatCommand(&quot;npctp_add&quot;)]
        void cmdNpcAdD(BasePlayer player, string command, string[] args)
        {
       
        var n = npcData.NpcTP;
        string IDNPC = &quot;&quot;;
        string SpawnFiles = &quot;&quot;;
                if (!permission.UserHasPermission(player.userID.ToString(), &quot;npctp.admin&quot;))
                {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;nopermcmd&quot;, this)));
                    return;
                }       
        if (args.Length == 2)
        {
            SpawnFiles = (args[1]);
        }
       
        var setup = new NPCInfo { Cost = Cost, CanUse = false, permission = &quot;npctp.default&quot;, useUI = false, UseCommand = false, CommandOnPlayer = false, Command = &quot;say&quot;, Arrangements = &quot;this is a test&quot;  };
        var setups = new NPCInfo { Cost = Cost, CanUse = true, SpawnFile = SpawnFiles, permission = &quot;npctp.default&quot;, useUI = false, UseCommand = false, CommandOnPlayer = false, Command = &quot;say&quot;, Arrangements = &quot;this is a test&quot;  };
       
        if (args.Length &lt;= 0)
        {
                SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;npcerror&quot;, this, player.UserIDString)));
                return;   
        }   
       
        IDNPC = (args[0]);
       
        if (args.Length == 1)
        {
            if (!n.ContainsKey(IDNPC))   
                n.Add(IDNPC, setup);
                SaveNpcTpData();               
                SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;npcadd&quot;, this, player.UserIDString), (string)(IDNPC)));
                return;
        }
        if (args.Length == 2)
        {
            if (!n.ContainsKey(IDNPC))
                n.Add(IDNPC, setups);
                SaveNpcTpData();
                SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;npcadds&quot;, this, player.UserIDString), (string)(IDNPC), (string)(SpawnFiles)));               
                return;
                  }
                }           

       

        void OnUseNPC(BasePlayer npc, BasePlayer player, Vector3 destination)
        {
            if (!npcData.NpcTP.ContainsKey(npc.UserIDString)) return; // Check if this NPC is registered

            ulong playerId = player.userID;
            string npcId = npc.UserIDString;

            double timeStamp = GrabCurrentTime();

            var CanUse = npcData.NpcTP[npcId].CanUse;
            var cooldownTime = npcData.NpcTP[npcId].Cooldown;
            var buyMoney1 = npcData.NpcTP[npcId].Cost;
            var UseCommand = npcData.NpcTP[npcId].UseCommand;
            var CommandOnPlayer = npcData.NpcTP[npcId].CommandOnPlayer;
            var Perms = npcData.NpcTP[npcId].permission;
            var useUI = npcData.NpcTP[npcId].useUI;
            string Command = npcData.NpcTP[npcId].Command;
            string Arrangements = npcData.NpcTP[npcId].Arrangements;
            object newpos = null;
            var bad = &quot;somthing is not right somewhere is your spawnfile name correct&quot;;
            string spawn = npcData.NpcTP[npcId].SpawnFile;
            string msg = &quot;&quot;;


            if (!pcdData.pCooldown.ContainsKey(playerId))
            {
                pcdData.pCooldown.Add(playerId, new PCDInfo());
                //SaveData();
            }

            if (!CanUse)
            {
                SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;notenabled&quot;, this)));
                return;
            }
            else
            {
                if (!permission.UserHasPermission(player.userID.ToString(), Perms))
                {
                    SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;noperm&quot;, this)));
                    return;
                }
                if (pcdData.pCooldown[playerId].npcCooldowns.ContainsKey(npcId)) // Check if the player already has a cooldown for this NPC
                {
                    var cdTime = pcdData.pCooldown[playerId].npcCooldowns[npcId]; // Get the cooldown time of the NPC
                    if (cdTime &gt; timeStamp)
                    {
                        SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;cdTime&quot;, this, player.UserIDString), (int)(cdTime - timeStamp) / 60));
                        return;
                    }
                }
               
                if (useRewards)
                    if (CheckPlayerRP(player, (int)buyMoney1))
                    {
                    }
                if (useEconomics)
                    if (CheckPlayerMoney(player, (int)buyMoney1))
                    {
                    }
                if (useUI)
                    msg = msg + lang.GetMessage(&quot;chargeyesno&quot;, this, player.UserIDString);
                    UseUI(player, msg.ToString());
                    {

                    }
   
                if (UseCommand == false)
                {
                    pcdData.pCooldown[playerId].npcCooldowns[npcId] = (long)timeStamp + cooldownTime; // Store the new cooldown in the players data under the specified NPC
                    SaveData();
                    object success = Spawns.Call(&quot;GetRandomSpawn&quot;, spawn);
                    if (success is Vector3) // Check if the returned type is Vector3
                    {
                        Vector3 location = (Vector3)success;
                        TeleportPlayerPosition1(player, (Vector3)success);
                    }
                    else PrintError((string)bad); // Otherwise print the error message to console so server owners know there is a problem

                }

                if (UseCommand == true &amp;&amp; CommandOnPlayer == false)
                {
                    pcdData.pCooldown[playerId].npcCooldowns[npcId] = (long)timeStamp + cooldownTime;
                    SaveData();

                    if (CommandOnPlayer) // Check if this is command on player
                    {
                        rust.RunServerCommand($&quot;{Command} {Arrangements}&quot;);
                        SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;npcCommand&quot;, this)));
                    }
                    else PrintError((string)bad); // Otherwise print the error message to console so server owners know there is a problem

                }
                if (UseCommand == true &amp;&amp; CommandOnPlayer == true)
                {
                    pcdData.pCooldown[playerId].npcCooldowns[npcId] = (long)timeStamp + cooldownTime;
                    SaveData();

                    if (CommandOnPlayer) // Check if this is command on player
                    {
                        rust.RunServerCommand($&quot;{Command} {player.userID} {Arrangements}&quot;);
                        SendReply(player, string.Format(lang.GetMessage(&quot;title&quot;, this) + lang.GetMessage(&quot;npcCommand&quot;, this)));
                    }
                    else PrintError((string)bad); // Otherwise print the error message to console so server owners know there is a problem

                }
            }
            #endregion



            }

        }

    }





</pre>
</div>
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Ts3hosting</a>,</span>
					<a href="threads/help-with-ui-return-true-false.23378/#post-290256" title="Permalink" class="datePermalink"><span class="DateTime" title="Jan 29, 2017 at 9:38 PM">Jan 29, 2017</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-ui-return-true-false.23378/#post-290256" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/290256/permalink">#5</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-290265" class="message   " data-author="k1lly0u">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="k1lly0u" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">k1lly0u</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					You need to use a create a console command and assign it to the button using the &quot;Command&quot; field in CUIButton
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">k1lly0u</a>,</span>
					<a href="threads/help-with-ui-return-true-false.23378/#post-290265" title="Permalink" class="datePermalink"><span class="DateTime" title="Jan 29, 2017 at 10:09 PM">Jan 29, 2017</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-ui-return-true-false.23378/#post-290265" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/290265/permalink">#6</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-290279" class="message   " data-author="Ts3hosting">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Ts3hosting" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Ts3hosting</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					<div class="bbCodeBlock bbCodeQuote" data-author="k1lly0u">
	<aside>
		
			<div class="attribution type">k1lly0u said:
				
					<a href="goto/post?id=290265#post-290265" class="AttributionLink">&uarr;</a>
				
			</div>
		
		<blockquote class="quoteContainer"><div class="quote">You need to use a create a console command and assign it to the button using the &quot;Command&quot; field in CUIButton</div><div class="quoteExpand">Click to expand...</div></blockquote>
	</aside>
</div>Yes i figured that out thenks  but how would i pass this like this<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>        void OnUseNPC(BasePlayer npc, BasePlayer player, Vector3 destination)
                   {
                string msg = &quot;&quot;;

           
                msg = msg + lang.GetMessage(&quot;chargeyesno&quot;, this, player.UserIDString);


          
            var elements = new CuiElementContainer();

            var mainName = elements.Add(new CuiPanel
            {
                Image =
                {
                    Color = &quot;0.1 0.1 0.1 1&quot;
                },
                RectTransform =
                {
                    AnchorMin = &quot;0 0&quot;,
                    AnchorMax = &quot;1 1&quot;
                },
                CursorEnabled = true
            }, &quot;Overlay&quot;, &quot;Npctp&quot;);
            if(backroundimage == true)
            {
                elements.Add(new CuiElement
                { 
                    Parent = &quot;Npctp&quot;,
                    Components =
                    {
                        new CuiRawImageComponent
                        {
                            Url = backroundimageurl,
                            Sprite = &quot;assets/content/textures/generic/fulltransparent.tga&quot;
                        },
                        new CuiRectTransformComponent
                        {
                            AnchorMin = &quot;0 0&quot;,
                            AnchorMax = &quot;1 1&quot;
                        }
                    }
                });
            }                
            var Agree = new CuiButton
            {
                Button =
                {
                    Command = &quot;global.hardestcommandtoeverguessnpctp&quot;,
                    Close = mainName,
                    Color = &quot;0 255 0 1&quot;
                },
                RectTransform =
                {
                    AnchorMin = &quot;0.2 0.16&quot;,
                    AnchorMax = &quot;0.45 0.2&quot;
                },
                Text =
                {
                    Text = &quot;I Agree&quot;,
                    FontSize = 22,
                    Align = TextAnchor.MiddleCenter
                }
            };
            var Disagree = new CuiButton
            {
               
               
                Button =
                {

                    Close = mainName,
                    Color = &quot;255 0 0 1&quot;
                   
                },
                RectTransform =
                {
                    AnchorMin = &quot;0.5 0.16&quot;,
                    AnchorMax = &quot;0.75 0.2&quot;
                },
                Text =
                {
                    Text = &quot;I Disagree&quot;,
                    FontSize = 22,
                    Align = TextAnchor.MiddleCenter
                }
            };
            elements.Add(new CuiLabel
            {
                Text =
                {
                    Text = msg,
                    FontSize = 22,
                    Align = TextAnchor.MiddleCenter
                },
                RectTransform =
                {
                    AnchorMin = &quot;0 0.20&quot;,
                    AnchorMax = &quot;1 0.9&quot;
                }
            }, mainName);
            elements.Add(Agree, mainName);
            elements.Add(Disagree, mainName);
            CuiHelper.AddUi(player, elements);

        }    </pre>
</div>

<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>        [ConsoleCommand(&quot;hardestcommandtoeverguessnpctp&quot;)]
        void OnUseNPC1(BasePlayer npc, BasePlayer player, Vector3 destination)
        {</pre>
</div>
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Ts3hosting</a>,</span>
					<a href="threads/help-with-ui-return-true-false.23378/#post-290279" title="Permalink" class="datePermalink"><span class="DateTime" title="Jan 29, 2017 at 10:34 PM">Jan 29, 2017</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-ui-return-true-false.23378/#post-290279" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/290279/permalink">#7</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-290291" class="message   " data-author="Ts3hosting">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Ts3hosting" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Ts3hosting</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					I see now after doing some research this can not be done thanks.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Ts3hosting</a>,</span>
					<a href="threads/help-with-ui-return-true-false.23378/#post-290291" title="Permalink" class="datePermalink"><span class="DateTime" title="Jan 29, 2017 at 11:24 PM">Jan 29, 2017</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-ui-return-true-false.23378/#post-290291" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/290291/permalink">#8</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-290308" class="message   " data-author="Ts3hosting">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Ts3hosting" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Ts3hosting</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					ok so im trying like this witch should work but i must be missing somthing<br />
<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>        [ConsoleCommand(&quot;hardestcommandtoeverguessnpctp&quot;)]
        void cmdRun(ConsoleSystem.Arg arg, string[] args)
        { 
            BasePlayer player = (BasePlayer)arg.connection.player;

            string npcId = args[0];
            string spawn = npcData.NpcTP[npcId].SpawnFile;
           
            var cooldownTime = npcData.NpcTP[npcId].Cooldown;
            var UseCommand = npcData.NpcTP[npcId].UseCommand;
            ulong playerId = player.userID;
            var bad = &quot;somthing is not right somewhere&quot;;
            double timeStamp = GrabCurrentTime();
           
                if (UseCommand == false)
                {
               

                    object success = Spawns.Call(&quot;GetRandomSpawn&quot;, spawn);
                    if (success is Vector3) // Check if the returned type is Vector3
                    {
                        Vector3 location = (Vector3)success;
                        TeleportPlayerPosition1(player, (Vector3)success);
                    }
                    else PrintError((string)bad); // Otherwise print the error message to console so server owners know there is a problem

                }      
             }</pre>
</div><br />
and the call is 

<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>Command = $&quot;hardestcommandtoeverguessnpctp {playerId} {npcId}&quot;,</pre>
</div><br />
what am i missing..

<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>Failed to call hook 'cmdRun' on plugin 'Npctp v2.2.7' (NullReferenceException: Object reference not set to an instance of an object)</pre>
</div>[DOUBLEPOST=1485738168][/DOUBLEPOST]i got it.
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Ts3hosting</a>,</span>
					<a href="threads/help-with-ui-return-true-false.23378/#post-290308" title="Permalink" class="datePermalink"><span class="DateTime" title="Jan 30, 2017 at 12:43 AM">Jan 30, 2017</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-ui-return-true-false.23378/#post-290308" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/290308/permalink">#9</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-290327" class="message   " data-author="Ts3hosting">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Ts3hosting" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">Ts3hosting</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					Ok New problem so with the UI command all works fine<br />
Command = $&quot;hardestcommandtoeverguessnpctp {playerId} {npcId}&quot;,<br />
<br />
but if i try to run with out the UI with this call it fails.<br />
rust.RunServerCommand(&quot;hardestcommandtoeverguessnpctp {playerId} {npcId}&quot;);<br />
also tried rust.RunServerCommand($&quot;hardestcommandtoeverguessnpctp {playerId} {npcId}&quot;);<br />
<br />


<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>        [ConsoleCommand(&quot;hardestcommandtoeverguessnpctp&quot;)]
        void cmdRun(ConsoleSystem.Arg arg)
        { 
            var player = arg.Player();

            var npcId = arg.Args[1];</pre>
</div>[DOUBLEPOST=1485744081][/DOUBLEPOST]again figured it out<br />
player.SendConsoleCommand($&quot;hardestcommandtoeverguessnpctp {playerId} {npcId}&quot;);
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">Ts3hosting</a>,</span>
					<a href="threads/help-with-ui-return-true-false.23378/#post-290327" title="Permalink" class="datePermalink"><span class="DateTime" title="Jan 30, 2017 at 2:15 AM">Jan 30, 2017</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-ui-return-true-false.23378/#post-290327" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/290327/permalink">#10</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
			
				


<li id="post-290466" class="message   " data-author="sami37">

	

<div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">	
<div class="messageUserBlock ">
	
		<div class="avatarHolder">
			<span class="helper"></span>
			<a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="sami37" /></a>
			
			
		</div>
	


	
		<h3 class="userText">
			<a class="username" dir="auto">sami37</a>
			
			
		</h3>
	
		
	
		


	<span class="arrow"><span></span></span>
</div>
</div>

	<div class="messageInfo primaryContent">
		
		
		
		
		
		<div class="messageContent">		
			<article>
				<blockquote class="messageText SelectQuoteContainer ugc baseHtml">
					
					maybe 

<div class="bbCodeBlock bbCodeCode">
	<div class="type">Code:</div>
	<pre>player.SendConsoleCommand(&quot;hardestcommandtoeverguessnpctp&quot;, playerId, npcId);</pre>
</div> ?
					<div class="messageTextEndMarker">&nbsp;</div>
				</blockquote>
			</article>
			
			
		</div>
		
		
		
		
		
		
		
				
		<div class="messageMeta ToggleTriggerAnchor">
			
			<div class="privateControls">
				
				<span class="item muted">
					<span class="authorEnd"><a class="username author" dir="auto">sami37</a>,</span>
					<a href="threads/help-with-ui-return-true-false.23378/#post-290466" title="Permalink" class="datePermalink"><span class="DateTime" title="Jan 30, 2017 at 2:18 PM">Jan 30, 2017</span></a>
				</span>
				
				
				
				
				
				
				
				
				
				
				
			</div>
			
			<div class="publicControls">
				<a href="threads/help-with-ui-return-true-false.23378/#post-290466" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/290466/permalink">#11</a>
				
				
				
				
			</div>
		</div>
	</div>

	
	
	
	
</li>
			
		
		
	</ol>

	

	

</form>


	<div class="pageNavLinkGroup">
		
			
				<div class="linkGroup">
					
				</div>
			
			<div class="linkGroup" style="display: none"><a href="javascript:" class="muted JsOnly DisplayIgnoredContent Tooltip" title="Show hidden content by ">Show Ignored Content</a></div>

			
		
	</div>












	


												
												
					
			
						
			
						
			


			<footer>
				


<div class="footer">
		<div class="pageContent">
			
            
            
            </div>
			
		
			
			
			<span class="helper"></span>
			<ul class="footerLinks">
			
				
				<li><a href="https://oxidemod.org/terms/">Terms and Rules</a></li>
				
				
				<li><a href="https://umod.org/community" target="_blank">Contact Us</a></li>
			
			</ul>
			
			<span class="helper"></span>
		</div>
</div>

			</footer>
		</div>
	</div>
</div>

<header>
	


<div id="header">
	<div class="headerWidth">
		<div id="logoBlock">
			
			
			<div id="logo"><a href="https://oxidemod.org/">
				<span></span>
				<img src="styles/oxide/logo.png" alt="Oxide" />
			</a></div>
			
			
			<span class="helper"></span>

</div>
		


<div id="navigation" class="">
	<div class="pageContent">
		<nav>
			<div class="navTabs">
				<ul class="publicTabs">

					
					

					
					

					
					
						<li class="navTab forums Popup PopupControl PopupClosed PopupContainerControl">
							<a href="https://oxidemod.org/" class="navLink" rel="Menu">Forums</a>

							
						</li>
					

					<li class="navTab PopupClosed">
	<a href="https://umod.org/documentation" class="navLink">Docs</a>
</li>


					
					
						
							<li class="navTab Popup PopupControl PopupClosed PopupContainerControl">

							<a href="https://oxidemod.org/downloads/" class="navLink" rel="Menu"> Downloads </a>

							
						</li>
						
					
						
							<li class="navTab Popup PopupControl PopupClosed PopupContainerControl">

							<a href="https://oxidemod.org/plugins/" class="navLink" rel="Menu"> Plugins </a>

							
						</li>
						
					
					

					
					

					
					

					
					<li class="navTab selected"><div class="tabLinks"></div></li>
				</ul>

				
				
			</div>

			<span class="helper"></span>
		</nav>
	</div>
</div>
	</div>
</div>

	
	
</header>

</div>

<script>


jQuery.extend(true, XenForo,
{
	visitor: { user_id: 0 },
	serverTimeInfo:
	{
		now: 1548596829,
		today: 1548547200,
		todayDow: 0
	},
	_lightBoxUniversal: "0",
	_enableOverlays: "1",
	_animationSpeedMultiplier: "1",
	_overlayConfig:
	{
		top: "10%",
		speed: 200,
		closeSpeed: 100,
		mask:
		{
			color: "rgb(255, 255, 255)",
			opacity: "0.6",
			loadSpeed: 200,
			closeSpeed: 100
		}
	},
	_ignoredUsers: [],
	_loadedScripts: {"thread_view":true,"message":true,"bb_code":true,"message_user_info":true},
	_cookieConfig: { path: "/", domain: ".oxidemod.org", prefix: "ih_xfid_"},
	_csrfToken: "",
	_csrfRefreshUrl: "login/csrf-token-refresh",
	_jsVersion: "f33b43a2"
});
jQuery.extend(XenForo.phrases,
{
	cancel: "Cancel",

	a_moment_ago:    "A moment ago",
	one_minute_ago:  "1 minute ago",
	x_minutes_ago:   "%minutes% minutes ago",
	today_at_x:      "Today at %time%",
	yesterday_at_x:  "Yesterday at %time%",
	day_x_at_time_y: "%day% at %time%",

	day0: "Sunday",
	day1: "Monday",
	day2: "Tuesday",
	day3: "Wednesday",
	day4: "Thursday",
	day5: "Friday",
	day6: "Saturday",

	_months: "January,February,March,April,May,June,July,August,September,October,November,December",
	_daysShort: "Sun,Mon,Tue,Wed,Thu,Fri,Sat",

	following_error_occurred: "The following error occurred",
	server_did_not_respond_in_time_try_again: "The server did not respond in time. Please try again.",
	logging_in: "Logging in",
	click_image_show_full_size_version: "Click this image to show the full-size version.",
	show_hidden_content_by_x: "Show hidden content by {names}"
});




</script>




</body>
</html>