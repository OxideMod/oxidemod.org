<!DOCTYPE html>
<html id="XenForo" lang="en-US" dir="LTR" class="Public NoJs LoggedOut NoSidebar  Responsive" xmlns:fb="http://www.facebook.com/2008/fbml">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <base href="https://oxidemod.org/" />
    <script> var _b = document.getElementsByTagName('base')[0], _bH = "https://oxidemod.org/";
			if (_b && _b.href != _bH) _b.href = _bH;
		</script>
    <title>Rust - Building sharing (build/demolish/rotate) | Oxide</title>
    <noscript>
        <style>.JsOnly, .jsOnly { display: none !important; }</style>
    </noscript>
    <link rel="stylesheet" href="css.php?css=xenforo,form,public&amp;style=5&amp;dir=LTR&amp;d=1548544754" />
    <link rel="stylesheet" href="css.php?css=bb_code,message,message_user_info,thread_view&amp;style=5&amp;dir=LTR&amp;d=1548544754" />
    <script src="js/jquery/jquery-1.11.0.min.js"></script>
    <script src="js/xenforo/xenforo.js?_v=f33b43a2"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <meta name="mobile-web-app-capable" content="yes" />
    <link rel="icon" sizes="196x196" href="https://oxidemod.org/styles/oxide/logo.og.png" />
    <link rel="apple-touch-icon" href="https://oxidemod.org/styles/oxide/logo.og.png" />
    <link rel="alternate" type="application/rss+xml" title="RSS feed for Oxide" href="forums/-/index.rss" />
    <link rel="canonical" href="https://oxidemod.org/threads/building-sharing-build-demolish-rotate.17828/" />
    <meta name="description" content="Good day,

I have recently started up my own Rust server and although I am still looking at the final direction I am going to go with it there is some..." />
    <meta property="og:site_name" content="Oxide" />
    <meta property="og:image" content="https://oxidemod.org/styles/default/xenforo/avatars/avatar_m.png" />
    <meta property="og:image" content="https://oxidemod.org/styles/oxide/logo.og.png" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://oxidemod.org/threads/building-sharing-build-demolish-rotate.17828/" />
    <meta property="og:title" content="Rust - Building sharing (build/demolish/rotate)" />
    <meta property="og:description" content="Good day,

I have recently started up my own Rust server and although I am still looking at the final direction I am going to go with it there is some..." />
</head>

<body class="node10 node1 node104 SelectQuotable">
    <div id="headerMover">
        <div id="headerProxy"></div>
        <div id="content" class="thread_view">
            <div class="pageWidth">
                <div class="pageContent">
                    <div class="breadBoxTop ">
                        <nav>
                            <fieldset class="breadcrumb">
                                <div class="boardTitle"><strong>Oxide</strong></div>
                                <span class="crumbs">
                                    <span class="crust selectedTabCrumb" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
                                        <a href="https://oxidemod.org/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Forums</span></a>
                                        <span class="arrow"><span>&gt;</span></span>
                                    </span>
                                    <span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
                                        <a href="https://oxidemod.org/#oxide-project.1" class="crumb" rel="up" itemprop="url"><span itemprop="title">Oxide Project</span></a>
                                        <span class="arrow"><span>&gt;</span></span>
                                    </span>
                                    <span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
                                        <a href="https://oxidemod.org/categories/archive.104/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Archive</span></a>
                                        <span class="arrow"><span>&gt;</span></span>
                                    </span>
                                    <span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
                                        <a href="https://oxidemod.org/forums/plugin-requests.10/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Plugin Requests</span></a>
                                        <span class="arrow"><span>&gt;</span></span>
                                    </span>
                                </span>
                            </fieldset>
                        </nav>
                    </div>
                    <!-- h1 title, description -->
                    <div class="titleBar">
                        <h1>
                            <span class="prefix prefixRed">Rust</span> <a href="https://oxidemod.org/threads/building-sharing-build-demolish-rotate.17828/">Building sharing (build/demolish/rotate)</a>
                        </h1>
                        <p id="pageDescription" class="muted "> Discussion in '<a href="forums/plugin-requests.10/">Plugin Requests</a>' started by <a class="username" dir="auto">IŊŦΣCҴ¤Ŋ</a>, <a
                                href="threads/building-sharing-build-demolish-rotate.17828/"><span class="DateTime" title="May 6, 2016 at 11:06 AM">May 6, 2016</span></a>. </p>
                    </div>
                    <div class="pageNavLinkGroup">
                        <div class="linkGroup SelectionCountContainer">
                        </div>
                    </div>
                    <form action="inline-mod/post/switch" method="post" class="InlineModForm section" data-cookieName="posts" data-controls="#InlineModControls" data-imodOptions="#ModerationSelect option">
                        <ol class="messageList" id="messageList">
                            <li id="post-203381" class="message   " data-author="IŊŦΣCҴ¤Ŋ">
                                <div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">
                                    <div class="messageUserBlock ">
                                        <div class="avatarHolder">
                                            <span class="helper"></span>
                                            <a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="IŊŦΣCҴ¤Ŋ" /></a>
                                        </div>
                                        <h3 class="userText">
                                            <a class="username" dir="auto">IŊŦΣCҴ¤Ŋ</a>
                                        </h3>
                                        <span class="arrow"><span></span></span>
                                    </div>
                                </div>
                                <div class="messageInfo primaryContent">
                                    <div class="messageContent">
                                        <article>
                                            <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Good day,<br />
                                                <br /> I have recently started up my own Rust server and although I am still looking at the final direction I am going to go with it there is some
                                                things I would like to improve on the QoL for players.<br />
                                                <br /> I know there are many plugins that does similar or close to what I need, but rather than having 2 or 3 plugins to do something I am looking to
                                                create something specific to achieve my goals.<br />
                                                <br /> At this point I have a fresh server install with Oxide only.<br />
                                                <br /> My first goal I want to achieve is something similar to <a href="http://oxidemod.org/plugins/hammer-time.1711/" class="internalLink">Hammer Time
                                                    for Rust | Oxide</a>, which will allow players to demolish and rotate building blocks at any given time. I have read through the code for the
                                                plugin and I do understand some of it, but it is not ideal for what I want to achieve.<br />
                                                <br /> To be able to demolish and rotate structures the following criteria should be met:<br />
                                                <ol>
                                                    <li>The player trying to rotate or demolish the structure should be in a shared list from the player who placed it (this will stop raiders from
                                                        getting cupboard access and just using demolish to clear a base).</li>
                                                    <li>The player trying to rotate or demolish the structure should be authorized by the tool cupboard. The reasoning behind this is, if there are
                                                        friends which shouldn&#039;t be building or demolishing they cannot go around and muck things up.</li>
                                                </ol>I am not looking for someone to write the plugin for me, just some advice or sample code how to check/do these things.<br />
                                                <br /> So far I have gathered I will need to:<br />
                                                <ol>
                                                    <li>On Entity creation store the Entity Id and Owner Id relation.</li>
                                                    <li>Create a list to store Owner Id and Player Id relation.</li>
                                                    <li>Check if the Player Id (one using demolish or rotate) is in the list as per point 2 and if the Entity Id belongs to the Owner Id as per point
                                                        1.</li>
                                                    <li>Check if the Player Id has building privileges.</li>
                                                </ol>Any advice will be appreciated.<br />
                                                <br /> Regards <div class="messageTextEndMarker">&nbsp;</div>
                                            </blockquote>
                                        </article>
                                    </div>
                                    <div class="messageMeta ToggleTriggerAnchor">
                                        <div class="privateControls">
                                            <span class="item muted">
                                                <span class="authorEnd"><a class="username author" dir="auto">IŊŦΣCҴ¤Ŋ</a>,</span>
                                                <a href="threads/building-sharing-build-demolish-rotate.17828/" title="Permalink" class="datePermalink"><span class="DateTime" title="May 6, 2016 at 11:06 AM">May
                                                        6, 2016</span></a>
                                            </span>
                                        </div>
                                        <div class="publicControls">
                                            <a href="threads/building-sharing-build-demolish-rotate.17828/" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/203381/permalink">#1</a>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li id="post-203383" class="message   " data-author="k1lly0u">
                                <div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">
                                    <div class="messageUserBlock ">
                                        <div class="avatarHolder">
                                            <span class="helper"></span>
                                            <a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="k1lly0u" /></a>
                                        </div>
                                        <h3 class="userText">
                                            <a class="username" dir="auto">k1lly0u</a>
                                        </h3>
                                        <span class="arrow"><span></span></span>
                                    </div>
                                </div>
                                <div class="messageInfo primaryContent">
                                    <div class="messageContent">
                                        <article>
                                            <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> The first can be done on the go by using the OwnerID variable attached to the building
                                                block in question, therefore sparing you from the need to store the owner information yourself. <br /> You can use friendsapi and clans to handle the
                                                friends of the owner. Then all you would need to do is call either or both of those plugins and see if the player is friends with the owner of the
                                                block.<br /> Tool cupboard check can be done easily and there is plenty of examples floating around. <div class="messageTextEndMarker">&nbsp;</div>
                                            </blockquote>
                                        </article>
                                    </div>
                                    <div class="messageMeta ToggleTriggerAnchor">
                                        <div class="privateControls">
                                            <span class="item muted">
                                                <span class="authorEnd"><a class="username author" dir="auto">k1lly0u</a>,</span>
                                                <a href="threads/building-sharing-build-demolish-rotate.17828/#post-203383" title="Permalink" class="datePermalink"><span class="DateTime" title="May 6, 2016 at 11:15 AM">May
                                                        6, 2016</span></a>
                                            </span>
                                        </div>
                                        <div class="publicControls">
                                            <a href="threads/building-sharing-build-demolish-rotate.17828/#post-203383" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                                                data-href="posts/203383/permalink">#2</a>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li id="post-203791" class="message   " data-author="IŊŦΣCҴ¤Ŋ">
                                <div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">
                                    <div class="messageUserBlock ">
                                        <div class="avatarHolder">
                                            <span class="helper"></span>
                                            <a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="IŊŦΣCҴ¤Ŋ" /></a>
                                        </div>
                                        <h3 class="userText">
                                            <a class="username" dir="auto">IŊŦΣCҴ¤Ŋ</a>
                                        </h3>
                                        <span class="arrow"><span></span></span>
                                    </div>
                                </div>
                                <div class="messageInfo primaryContent">
                                    <div class="messageContent">
                                        <article>
                                            <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Good day,<br />
                                                <br /> Thanks for the response. I did consider the friends or clan API prior, but considering that some people might play with friends on in a clan
                                                they would build a compound each with their own base (or 2 or 3) people together apart from the rest.<br />
                                                <br /> So I felt a separate list for this would be more acceptable than using a API that might be used by other plugins and then forces players to give
                                                out access to other people they may not want to have on there.<br />
                                                <br /> I will look at the friends API and how they have done that and work from there.<br />
                                                <br /> Going forward, is there a way to hook into the Building Menu (right click with Hammer). I know there is the OnHammerHit which I can hook, but I
                                                would rather have the flags set on right click.<br />
                                                <br /> Currently I am right now using a RaycastHit in OnPlayerInput (checks for right click and if active item is the hammer) to check if there is
                                                something in range, but has yet figured out how to get the entity and see if it is a block. Though, if there is a way to hook into the Building Menu it
                                                would be better to use.<br />
                                                <br /> Regards <div class="messageTextEndMarker">&nbsp;</div>
                                            </blockquote>
                                        </article>
                                    </div>
                                    <div class="messageMeta ToggleTriggerAnchor">
                                        <div class="privateControls">
                                            <span class="item muted">
                                                <span class="authorEnd"><a class="username author" dir="auto">IŊŦΣCҴ¤Ŋ</a>,</span>
                                                <a href="threads/building-sharing-build-demolish-rotate.17828/#post-203791" title="Permalink" class="datePermalink"><span class="DateTime" title="May 7, 2016 at 1:44 PM">May
                                                        7, 2016</span></a>
                                            </span>
                                        </div>
                                        <div class="publicControls">
                                            <a href="threads/building-sharing-build-demolish-rotate.17828/#post-203791" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                                                data-href="posts/203791/permalink">#3</a>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ol>
                    </form>
                    <div class="pageNavLinkGroup">
                        <div class="linkGroup">
                        </div>
                        <div class="linkGroup" style="display: none"><a href="javascript:" class="muted JsOnly DisplayIgnoredContent Tooltip" title="Show hidden content by ">Show Ignored Content</a></div>
                    </div>
                    <footer>
                        <div class="footer">
                            <div class="pageContent">
                            </div>
                            <span class="helper"></span>
                            <ul class="footerLinks">
                                <li><a href="https://oxidemod.org/terms/">Terms and Rules</a></li>
                                <li><a href="https://umod.org/community" target="_blank">Contact Us</a></li>
                            </ul>
                            <span class="helper"></span>
                        </div>
                </div>
                </footer>
            </div>
        </div>
    </div>
    <header>
        <div id="header">
            <div class="headerWidth">
                <div id="logoBlock">
                    <div id="logo"><a href="https://oxidemod.org/">
                            <span></span>
                            <img src="styles/oxide/logo.png" alt="Oxide" />
                        </a></div>
                    <span class="helper"></span>
                </div>
                <div id="navigation" class="">
                    <div class="pageContent">
                        <nav>
                            <div class="navTabs">
                                <ul class="publicTabs">
                                    <li class="navTab forums Popup PopupControl PopupClosed PopupContainerControl">
                                        <a href="https://oxidemod.org/" class="navLink" rel="Menu">Forums</a>
                                    </li>
                                    <li class="navTab PopupClosed">
                                        <a href="https://umod.org/documentation" class="navLink">Docs</a>
                                    </li>
                                    <li class="navTab Popup PopupControl PopupClosed PopupContainerControl">
                                        <a href="https://oxidemod.org/downloads/" class="navLink" rel="Menu"> Downloads </a>
                                    </li>
                                    <li class="navTab Popup PopupControl PopupClosed PopupContainerControl">
                                        <a href="https://oxidemod.org/plugins/" class="navLink" rel="Menu"> Plugins </a>
                                    </li>
                                    <li class="navTab selected">
                                        <div class="tabLinks"></div>
                                    </li>
                                </ul>
                            </div>
                            <span class="helper"></span>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </header>
    </div>
    <script>
        jQuery.extend(true, XenForo, {
            visitor: {
                user_id: 0
            },
            serverTimeInfo: {
                now: 1548594924,
                today: 1548547200,
                todayDow: 0
            },
            _lightBoxUniversal: "0",
            _enableOverlays: "1",
            _animationSpeedMultiplier: "1",
            _overlayConfig: {
                top: "10%",
                speed: 200,
                closeSpeed: 100,
                mask: {
                    color: "rgb(255, 255, 255)",
                    opacity: "0.6",
                    loadSpeed: 200,
                    closeSpeed: 100
                }
            },
            _ignoredUsers: [],
            _loadedScripts: {
                "thread_view": true,
                "message": true,
                "bb_code": true,
                "message_user_info": true
            },
            _cookieConfig: {
                path: "/",
                domain: ".oxidemod.org",
                prefix: "ih_xfid_"
            },
            _csrfToken: "",
            _csrfRefreshUrl: "login/csrf-token-refresh",
            _jsVersion: "f33b43a2"
        });
        jQuery.extend(XenForo.phrases, {
            cancel: "Cancel",
            a_moment_ago: "A moment ago",
            one_minute_ago: "1 minute ago",
            x_minutes_ago: "%minutes% minutes ago",
            today_at_x: "Today at %time%",
            yesterday_at_x: "Yesterday at %time%",
            day_x_at_time_y: "%day% at %time%",
            day0: "Sunday",
            day1: "Monday",
            day2: "Tuesday",
            day3: "Wednesday",
            day4: "Thursday",
            day5: "Friday",
            day6: "Saturday",
            _months: "January,February,March,April,May,June,July,August,September,October,November,December",
            _daysShort: "Sun,Mon,Tue,Wed,Thu,Fri,Sat",
            following_error_occurred: "The following error occurred",
            server_did_not_respond_in_time_try_again: "The server did not respond in time. Please try again.",
            logging_in: "Logging in",
            click_image_show_full_size_version: "Click this image to show the full-size version.",
            show_hidden_content_by_x: "Show hidden content by {names}"
        });

    </script>
</body>

</html>
