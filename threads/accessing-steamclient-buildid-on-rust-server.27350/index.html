<!DOCTYPE html>
<html id="XenForo" lang="en-US" dir="LTR" class="Public NoJs LoggedOut NoSidebar  Responsive" xmlns:fb="http://www.facebook.com/2008/fbml">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <base href="https://oxidemod.org/" />
    <script> var _b = document.getElementsByTagName('base')[0], _bH = "https://oxidemod.org/";
			if (_b && _b.href != _bH) _b.href = _bH;
		</script>
    <title>Accessing SteamClient.BuildId on Rust server? | Oxide</title>
    <noscript>
        <style>.JsOnly, .jsOnly { display: none !important; }</style>
    </noscript>
    <link rel="stylesheet" href="css.php?css=xenforo,form,public&amp;style=5&amp;dir=LTR&amp;d=1548544754" />
    <link rel="stylesheet" href="css.php?css=bb_code,message,message_user_info,thread_view&amp;style=5&amp;dir=LTR&amp;d=1548544754" />
    <script src="js/jquery/jquery-1.11.0.min.js"></script>
    <script src="js/xenforo/xenforo.js?_v=f33b43a2"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <meta name="mobile-web-app-capable" content="yes" />
    <link rel="icon" sizes="196x196" href="https://oxidemod.org/styles/oxide/logo.og.png" />
    <link rel="apple-touch-icon" href="https://oxidemod.org/styles/oxide/logo.og.png" />
    <link rel="alternate" type="application/rss+xml" title="RSS feed for Oxide" href="forums/-/index.rss" />
    <link rel="canonical" href="https://oxidemod.org/threads/accessing-steamclient-buildid-on-rust-server.27350/" />
    <meta name="description" content="Can someone help me determine the Steam build id version of a running Rust dedicated server from C#? I suppose this can be done by checking the local..." />
    <meta property="og:site_name" content="Oxide" />
    <meta property="og:image" content="https://oxidemod.org/styles/default/xenforo/avatars/avatar_m.png" />
    <meta property="og:image" content="https://oxidemod.org/styles/oxide/logo.og.png" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://oxidemod.org/threads/accessing-steamclient-buildid-on-rust-server.27350/" />
    <meta property="og:title" content="Accessing SteamClient.BuildId on Rust server?" />
    <meta property="og:description" content="Can someone help me determine the Steam build id version of a running Rust dedicated server from C#? I suppose this can be done by checking the local..." />
</head>

<body class="node4 node1 node104 node105 SelectQuotable">
    <div id="headerMover">
        <div id="headerProxy"></div>
        <div id="content" class="thread_view">
            <div class="pageWidth">
                <div class="pageContent">
                    <div class="breadBoxTop ">
                        <nav>
                            <fieldset class="breadcrumb">
                                <div class="boardTitle"><strong>Oxide</strong></div>
                                <span class="crumbs">
                                    <span class="crust selectedTabCrumb" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
                                        <a href="https://oxidemod.org/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Forums</span></a>
                                        <span class="arrow"><span>&gt;</span></span>
                                    </span>
                                    <span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
                                        <a href="https://oxidemod.org/#oxide-project.1" class="crumb" rel="up" itemprop="url"><span itemprop="title">Oxide Project</span></a>
                                        <span class="arrow"><span>&gt;</span></span>
                                    </span>
                                    <span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
                                        <a href="https://oxidemod.org/categories/archive.104/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Archive</span></a>
                                        <span class="arrow"><span>&gt;</span></span>
                                    </span>
                                    <span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
                                        <a href="https://oxidemod.org/categories/plugin-development.105/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Plugin Development</span></a>
                                        <span class="arrow"><span>&gt;</span></span>
                                    </span>
                                    <span class="crust" itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb">
                                        <a href="https://oxidemod.org/forums/rust-development.4/" class="crumb" rel="up" itemprop="url"><span itemprop="title">Rust Development</span></a>
                                        <span class="arrow"><span>&gt;</span></span>
                                    </span>
                                </span>
                            </fieldset>
                        </nav>
                    </div>
                    <!-- h1 title, description -->
                    <div class="titleBar">
                        <h1>
                            <a href="https://oxidemod.org/threads/accessing-steamclient-buildid-on-rust-server.27350/">Accessing SteamClient.BuildId on Rust server?</a>
                        </h1>
                        <p id="pageDescription" class="muted "> Discussion in '<a href="forums/rust-development.4/">Rust Development</a>' started by <a class="username" dir="auto">Kolyma</a>, <a href="threads/accessing-steamclient-buildid-on-rust-server.27350/"><span
                                    class="DateTime" title="Oct 2, 2017 at 2:03 AM">Oct 2, 2017</span></a>. </p>
                    </div>
                    <div class="pageNavLinkGroup">
                        <div class="linkGroup SelectionCountContainer">
                        </div>
                    </div>
                    <form action="inline-mod/post/switch" method="post" class="InlineModForm section" data-cookieName="posts" data-controls="#InlineModControls" data-imodOptions="#ModerationSelect option">
                        <ol class="messageList" id="messageList">
                            <li id="post-353721" class="message   " data-author="Kolyma">
                                <div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">
                                    <div class="messageUserBlock ">
                                        <div class="avatarHolder">
                                            <span class="helper"></span>
                                            <a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Kolyma" /></a>
                                        </div>
                                        <h3 class="userText">
                                            <a class="username" dir="auto">Kolyma</a>
                                        </h3>
                                        <span class="arrow"><span></span></span>
                                    </div>
                                </div>
                                <div class="messageInfo primaryContent">
                                    <div class="messageContent">
                                        <article>
                                            <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Can someone help me determine the Steam build id version of a running Rust dedicated
                                                server from C#? I suppose this can be done by checking the local `steamapps\appmanifest_xxxxxx` file, but I like to see if that number can be
                                                determined through some kind of code without file-level parsing.<br />
                                                <br /> I know the AppId and BuildId exist somewhere when the server is running because I can find them through WinDbg. Using JustDecompile on
                                                Rust.Global.dll shows BuildId declared in Rust.Global.SteamClient as a Client type.<br />
                                                <div class="bbCodeBlock bbCodeCode">
                                                    <div class="type">Code:</div>
                                                    <pre>Rust.Global.dll

namespace Rust
{
    public static class Global
    {
        ...

        public static Client SteamClient
        {
            get;
            set;
        }
    }
}</pre>
                                                </div>
                                                <div class="bbCodeBlock bbCodeCode">
                                                    <div class="type">Code:</div>
                                                    <pre>Facepunch.Steamworks.dll

namespace Facepunch.Steamworks
{
    public class Client : BaseSteamworks, IDisposable
    {
        ...
   
        public int BuildId
        {
            get;
            private set;
        }
    }
}</pre>
                                                </div>There appears to be a SingletonComponent defined in Assembly-CSharp.dll for SteamClient<br />
                                                <div class="bbCodeBlock bbCodeCode">
                                                    <div class="type">Code:</div>
                                                    <pre>Assembly-CSharp.dll

public class SteamClient : SingletonComponent&lt;SteamClient&gt;
{
    public SteamClient()
    {
    }
}</pre>
                                                </div>But I can&#039;t figure out how to get the value of SteamClient.BuildId . I&#039;m working with an OxideMod extension so I&#039;m outside of the
                                                sandboxing. I&#039;ve used non-OxideMod objects and methods from other core areas of Rust dlls elsewhere, so I&#039;m sure this must be possible. When
                                                I try code like below, I get an error &quot;object reference not set to an instance of an object&quot;<br />
                                                <div class="bbCodeBlock bbCodeCode">
                                                    <div class="type">Code:</div>
                                                    <pre>int x1 = (int) SteamClient.Instance.GetInstanceField(&quot;BuildId&quot;);</pre>
                                                </div>I&#039;ve got to be close, because I can do this and it compiles/runs fine (of course without being able to get BuildId)<br />
                                                <div class="bbCodeBlock bbCodeCode">
                                                    <div class="type">Code:</div>
                                                    <pre>SteamClient b1 = SteamClient.Instance;</pre>
                                                </div>TIA <div class="messageTextEndMarker">&nbsp;</div>
                                            </blockquote>
                                        </article>
                                    </div>
                                    <div class="editDate"> Last edited by a moderator: <span class="DateTime" title="Oct 2, 2017 at 2:28 AM">Oct 2, 2017</span>
                                    </div>
                                    <div class="messageMeta ToggleTriggerAnchor">
                                        <div class="privateControls">
                                            <span class="item muted">
                                                <span class="authorEnd"><a class="username author" dir="auto">Kolyma</a>,</span>
                                                <a href="threads/accessing-steamclient-buildid-on-rust-server.27350/" title="Permalink" class="datePermalink"><span class="DateTime" title="Oct 2, 2017 at 2:03 AM">Oct
                                                        2, 2017</span></a>
                                            </span>
                                        </div>
                                        <div class="publicControls">
                                            <a href="threads/accessing-steamclient-buildid-on-rust-server.27350/" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                                                data-href="posts/353721/permalink">#1</a>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li id="post-353763" class="message   " data-author="Mughisi">
                                <div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">
                                    <div class="messageUserBlock ">
                                        <div class="avatarHolder">
                                            <span class="helper"></span>
                                            <a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Mughisi" /></a>
                                        </div>
                                        <h3 class="userText">
                                            <a class="username" dir="auto">Mughisi</a>
                                        </h3>
                                        <span class="arrow"><span></span></span>
                                    </div>
                                </div>
                                <div class="messageInfo primaryContent">
                                    <div class="messageContent">
                                        <article>
                                            <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> The Steamworks library is actually used for both the game clients and the server which
                                                is why you have the code available for Facepunch.Steamworks.Client and Facepunch.Steamworks.Server. However these two are never initialized together.
                                                On a server an instance will be created of Facepunch.Steamworks.Server while the clients will have an instance of Facepunch.Steamworks.Client which is
                                                why you are running into a NullReferenceException.<br />
                                                <br /> Some debug output:<br />
                                                <div class="bbCodeBlock bbCodeCode">
                                                    <div class="type">Code:</div>
                                                    <pre>SteamClient: null
SteamServer: Facepunch.Steamworks.Server
 &lt;Query&gt;k__BackingField: Facepunch.Steamworks.ServerQuery
         server: Facepunch.Steamworks.Server
                 &lt;Query&gt;k__BackingField: Facepunch.Steamworks.ServerQuery
                 &lt;Stats&gt;k__BackingField: Facepunch.Steamworks.ServerStats
                 &lt;Auth&gt;k__BackingField: Facepunch.Steamworks.ServerAuth
                 _dedicatedServer: True
                 _maxplayers: 10
                 _botcount: 0
                 _mapname: Procedural Map
                 _modDir: rust
                 _product: 252490
                 _gameDescription: Rust
                 _serverName: Mughisi's Playground
                 _passworded: False
                 _gametags: mp10,cp0,qp0,v2017,h4bcc25f1,stok,born1505842473
                 KeyValue: System.Collections.Generic.Dictionary`2[System.String,System.String]
                 native: Facepunch.Steamworks.Interop.NativeInterface
 &lt;Stats&gt;k__BackingField: Facepunch.Steamworks.ServerStats
         server: Facepunch.Steamworks.Server
                 &lt;Query&gt;k__BackingField: Facepunch.Steamworks.ServerQuery
                 &lt;Stats&gt;k__BackingField: Facepunch.Steamworks.ServerStats
                 &lt;Auth&gt;k__BackingField: Facepunch.Steamworks.ServerAuth
                 _dedicatedServer: True
                 _maxplayers: 10
                 _botcount: 0
                 _mapname: Procedural Map
                 _modDir: rust
                 _product: 252490
                 _gameDescription: Rust
                 _serverName: Mughisi's Playground
                 _passworded: False
                 _gametags: mp10,cp0,qp0,v2017,h4bcc25f1,stok,born1505842473
                 KeyValue: System.Collections.Generic.Dictionary`2[System.String,System.String]
                 native: Facepunch.Steamworks.Interop.NativeInterface
 &lt;Auth&gt;k__BackingField: Facepunch.Steamworks.ServerAuth
         server: Facepunch.Steamworks.Server
                 &lt;Query&gt;k__BackingField: Facepunch.Steamworks.ServerQuery
                 &lt;Stats&gt;k__BackingField: Facepunch.Steamworks.ServerStats
                 &lt;Auth&gt;k__BackingField: Facepunch.Steamworks.ServerAuth
                 _dedicatedServer: True
                 _maxplayers: 10
                 _botcount: 0
                 _mapname: Procedural Map
                 _modDir: rust
                 _product: 252490
                 _gameDescription: Rust
                 _serverName: Mughisi's Playground
                 _passworded: False
                 _gametags: mp10,cp0,qp0,v2017,h4bcc25f1,stok,born1505842473
                 KeyValue: System.Collections.Generic.Dictionary`2[System.String,System.String]
                 native: Facepunch.Steamworks.Interop.NativeInterface
         OnAuthChange: System.Action`3[System.UInt64,System.UInt64,Facepunch.Steamworks.ServerAuth+Status]
 _dedicatedServer: True
 _maxplayers: 10
 _botcount: 0
 _mapname: Procedural Map
         length: 14
         start_char: P
 _modDir: rust
         length: 4
         start_char: r
 _product: 252490
         length: 6
         start_char: 2
 _gameDescription: Rust
         length: 4
         start_char: R
 _serverName: Mughisi's Playground
         length: 20
         start_char: M
 _passworded: False
 _gametags: mp10,cp0,qp0,v2017,h4bcc25f1,stok,born1505842473
         length: 48
         start_char: m
 KeyValue: System.Collections.Generic.Dictionary`2[System.String,System.String]
         table: Array[37]
                  0
                  28
                  27
                  0
                  0
                  25
                  0
                  26
                  0
                  24
                  22
                  0
                  11
                  12
                  13
                  17
                  15
                  16
                  23
                  2
                  3
                  20
                  5
                  6
                  7
                  8
                  9
                  18
                  0
                  0
                  0
                  0
                  0
                  0
                  0
                  21
                  29
         linkSlots: Array[37]
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
                      System.Collections.Generic.Link
         keySlots: Array[37]
                     description_0
                     description_01
                     description_02
                     description_03
                     description_04
                     description_05
                     description_06
                     description_07
                     description_08
                     description_09
                     description_10
                     description_11
                     description_12
                     description_13
                     description_14
                     description_15
                     hash
                     world.seed
                     world.size
                     pve
                     headerimage
                     url
                     uptime
                     gc_mb
                     gc_cl
                     fps
                     fps_avg
                     ent_cnt
                     build
         valueSlots: Array[37]
                       Powered by Oxide
                       4bcc25f1
                       1265
                       1000
                       False
                       http://oxidemod.org
                       1839
                       103
                       57
                       228
                       262.28
                       842
                       23033
         touchedSlots: 29
         emptySlot: -1
         count: 29
         threshold: 33
         hcp: System.Collections.Generic.GenericEqualityComparer`1[System.String]
         serialization_info: 
                 length: 4
                 start_char: n
         generation: 374
 native: Facepunch.Steamworks.Interop.NativeInterface
         api: SteamNative.SteamApi
                 platform: SteamNative.Platform+Win64
         client: SteamNative.SteamClient
                 platform: SteamNative.Platform+Win64
                 steamworks: Facepunch.Steamworks.Server
         user: SteamNative.SteamUser
                 platform: SteamNative.Platform+Win64
                 steamworks: Facepunch.Steamworks.Server
         apps: SteamNative.SteamApps
                 platform: SteamNative.Platform+Win64
                 steamworks: Facepunch.Steamworks.Server
         applist: SteamNative.SteamAppList
                 platform: SteamNative.Platform+Win64
                 steamworks: Facepunch.Steamworks.Server
         friends: SteamNative.SteamFriends
                 platform: SteamNative.Platform+Win64
                 steamworks: Facepunch.Steamworks.Server
         servers: SteamNative.SteamMatchmakingServers
                 platform: SteamNative.Platform+Win64
                 steamworks: Facepunch.Steamworks.Server
         matchmaking: SteamNative.SteamMatchmaking
                 platform: SteamNative.Platform+Win64
                 steamworks: Facepunch.Steamworks.Server
         inventory: SteamNative.SteamInventory
                 platform: SteamNative.Platform+Win64
                 steamworks: Facepunch.Steamworks.Server
         networking: SteamNative.SteamNetworking
                 platform: SteamNative.Platform+Win64
                 steamworks: Facepunch.Steamworks.Server
         userstats: SteamNative.SteamUserStats
                 platform: SteamNative.Platform+Win64
                 steamworks: Facepunch.Steamworks.Server
         utils: SteamNative.SteamUtils
                 platform: SteamNative.Platform+Win64
                 steamworks: Facepunch.Steamworks.Server
         screenshots: SteamNative.SteamScreenshots
                 platform: SteamNative.Platform+Win64
                 steamworks: Facepunch.Steamworks.Server
         http: SteamNative.SteamHTTP
                 platform: SteamNative.Platform+Win64
                 steamworks: Facepunch.Steamworks.Server
         ugc: SteamNative.SteamUGC
                 platform: SteamNative.Platform+Win64
                 steamworks: Facepunch.Steamworks.Server
         gameServer: SteamNative.SteamGameServer
                 platform: SteamNative.Platform+Win64
                 steamworks: Facepunch.Steamworks.Server
         gameServerStats: SteamNative.SteamGameServerStats
                 platform: SteamNative.Platform+Win64
                 steamworks: Facepunch.Steamworks.Server
         remoteStorage: SteamNative.SteamRemoteStorage
                 platform: SteamNative.Platform+Win64
                 steamworks: Facepunch.Steamworks.Server
         isServer: True
         hUser: SteamNative.HSteamUser
         hPipe: SteamNative.HSteamPipep
</pre>
                                                </div>
                                                <div class="messageTextEndMarker">&nbsp;</div>
                                            </blockquote>
                                        </article>
                                    </div>
                                    <div class="messageMeta ToggleTriggerAnchor">
                                        <div class="privateControls">
                                            <span class="item muted">
                                                <span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
                                                <a href="threads/accessing-steamclient-buildid-on-rust-server.27350/#post-353763" title="Permalink" class="datePermalink"><span class="DateTime" title="Oct 2, 2017 at 12:14 PM">Oct
                                                        2, 2017</span></a>
                                            </span>
                                        </div>
                                        <div class="publicControls">
                                            <a href="threads/accessing-steamclient-buildid-on-rust-server.27350/#post-353763" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                                                data-href="posts/353763/permalink">#2</a>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li id="post-353768" class="message   " data-author="Kolyma">
                                <div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">
                                    <div class="messageUserBlock ">
                                        <div class="avatarHolder">
                                            <span class="helper"></span>
                                            <a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Kolyma" /></a>
                                        </div>
                                        <h3 class="userText">
                                            <a class="username" dir="auto">Kolyma</a>
                                        </h3>
                                        <span class="arrow"><span></span></span>
                                    </div>
                                </div>
                                <div class="messageInfo primaryContent">
                                    <div class="messageContent">
                                        <article>
                                            <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> OK that&#039;s helpful. What tool did you use to pull that info?<br />
                                                <br /> The reason why I was chasing it from the SteamClient point of view is because that&#039;s where the actual BuildId is defined. I was thinking
                                                the Rust server is a Steam client during some early phase of Server boot and then also brought up the SteamServer at some point later.<br />
                                                <br />
                                                <a href="https://github.com/Facepunch/Facepunch.Steamworks" target="_blank" class="externalLink  rel=" nofollow">GitHub -
                                                    Facepunch/Facepunch.Steamworks: Another fucking c# Steamworks implementation</a><br />
                                                <br /> I believe inside the SteamServer structure, there&#039;s no BuildId. Again, I know it exists because I can find the AppId and BuildId current
                                                release values inside Windows Server memory by using a search from WinDbg when the Rust server is running. While they&#039;re not labeled as such, the
                                                values appear in hex very close to each other in only one place in RAM so I&#039;m confident that&#039;s what it is. <i>There has to be some way to get
                                                    those values programmically through code</i>.<br />
                                                <br /> Let me see if I can track down where SteamServer is defined. <div class="messageTextEndMarker">&nbsp;</div>
                                            </blockquote>
                                        </article>
                                    </div>
                                    <div class="messageMeta ToggleTriggerAnchor">
                                        <div class="privateControls">
                                            <span class="item muted">
                                                <span class="authorEnd"><a class="username author" dir="auto">Kolyma</a>,</span>
                                                <a href="threads/accessing-steamclient-buildid-on-rust-server.27350/#post-353768" title="Permalink" class="datePermalink"><span class="DateTime" title="Oct 2, 2017 at 12:47 PM">Oct
                                                        2, 2017</span></a>
                                            </span>
                                        </div>
                                        <div class="publicControls">
                                            <a href="threads/accessing-steamclient-buildid-on-rust-server.27350/#post-353768" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                                                data-href="posts/353768/permalink">#3</a>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li id="post-353810" class="message   " data-author="Mughisi">
                                <div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">
                                    <div class="messageUserBlock ">
                                        <div class="avatarHolder">
                                            <span class="helper"></span>
                                            <a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Mughisi" /></a>
                                        </div>
                                        <h3 class="userText">
                                            <a class="username" dir="auto">Mughisi</a>
                                        </h3>
                                        <span class="arrow"><span></span></span>
                                    </div>
                                </div>
                                <div class="messageInfo primaryContent">
                                    <div class="messageContent">
                                        <article>
                                            <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> The SteamClient is only created during the launch of the actual game client, if
                                                you&#039;d open up Assembly-CSharp.dll from the client files you will notice some differences including SteamClient in Assembly-CSharp.dll to have an
                                                actual implementation and not an empty class like in the server version of the file.<br />
                                                <br /> The debug output that I showed in my previous post was just grabbed through a plugin dumping all the fields and their values through reflection
                                                of the Facepunch.Steamworks.SteamServer instance. <div class="messageTextEndMarker">&nbsp;</div>
                                            </blockquote>
                                        </article>
                                    </div>
                                    <div class="messageMeta ToggleTriggerAnchor">
                                        <div class="privateControls">
                                            <span class="item muted">
                                                <span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
                                                <a href="threads/accessing-steamclient-buildid-on-rust-server.27350/#post-353810" title="Permalink" class="datePermalink"><span class="DateTime" title="Oct 2, 2017 at 8:05 PM">Oct
                                                        2, 2017</span></a>
                                            </span>
                                        </div>
                                        <div class="publicControls">
                                            <a href="threads/accessing-steamclient-buildid-on-rust-server.27350/#post-353810" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                                                data-href="posts/353810/permalink">#4</a>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li id="post-353825" class="message   " data-author="Kolyma">
                                <div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">
                                    <div class="messageUserBlock ">
                                        <div class="avatarHolder">
                                            <span class="helper"></span>
                                            <a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Kolyma" /></a>
                                        </div>
                                        <h3 class="userText">
                                            <a class="username" dir="auto">Kolyma</a>
                                        </h3>
                                        <span class="arrow"><span></span></span>
                                    </div>
                                </div>
                                <div class="messageInfo primaryContent">
                                    <div class="messageContent">
                                        <article>
                                            <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Ugh, I&#039;ve gotten soo close, right up to being able to call the function that
                                                returns BuildId and then I get an indecipherable (to me) error.<br />
                                                <div class="bbCodeBlock bbCodeCode">
                                                    <div class="type">Code:</div>
                                                    <pre>var server_instance = Facepunch.Steamworks.Server.Instance;

var server_native = server_instance.GetType().GetField(&quot;native&quot;, System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);
var server_native_instance = server_native.GetValue(server_instance);

var server_native_apps = server_native_instance.GetType().GetField(&quot;apps&quot;, System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);
var server_native_apps_instance = server_native_apps.GetValue(server_native_instance);

MethodInfo server_native_apps_method = server_native_apps_instance.GetType().GetMethod(&quot;GetAppBuildId&quot;);
var bld = server_native_apps_method.Invoke(server_native_apps_instance, null);
</pre>
                                                </div>Which works all the way to the last line (where I can actually assign a local to the return value of the function providing the Steam BuildId,
                                                and I get this error on the Rust server console:<br />
                                                <div class="bbCodeBlock bbCodeCode">
                                                    <div class="type">Code:</div>
                                                    <pre>steamengine.cpp (2029) : Assertion Failed: Narrowing inPtr to toClass returned NULL.</pre>
                                                </div><i>I know I&#039;m close</i>. I also verified the idea by running an older version Rust server install and checked with WinDbg. Like before, the
                                                AppId (258550) was in RAM nearby to the BuildId for that older server version.<br />
                                                <br /> [Update]<br /> Even trying this creates the same error message:<br />
                                                <div class="bbCodeBlock bbCodeCode">
                                                    <div class="type">Code:</div>
                                                    <pre>
[DllImport(&quot;steam_api64.dll&quot;, CharSet = CharSet.None, ExactSpelling = false)]
  internal static extern int SteamAPI_ISteamApps_GetAppBuildId(IntPtr ISteamApps);

var server_native_apps_platform = server_native_apps_instance.GetType().GetField(&quot;platform&quot;, System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);
var server_native_apps_platform_instance = server_native_apps_platform.GetValue(server_native_apps_instance);

var server_native_apps_platform_ptr = server_native_apps_platform_instance.GetType().GetField(&quot;_ptr&quot;, System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);
var server_native_apps_platform_ptr_instance = server_native_apps_platform_ptr.GetValue(server_native_apps_platform_instance);

int b_id = SteamAPI_ISteamApps_GetAppBuildId((IntPtr)server_native_apps_platform_ptr_instance);</pre>
                                                </div>
                                                <div class="messageTextEndMarker">&nbsp;</div>
                                            </blockquote>
                                        </article>
                                    </div>
                                    <div class="editDate"> Last edited by a moderator: <span class="DateTime" title="Oct 3, 2017 at 3:55 AM">Oct 3, 2017</span>
                                    </div>
                                    <div class="messageMeta ToggleTriggerAnchor">
                                        <div class="privateControls">
                                            <span class="item muted">
                                                <span class="authorEnd"><a class="username author" dir="auto">Kolyma</a>,</span>
                                                <a href="threads/accessing-steamclient-buildid-on-rust-server.27350/#post-353825" title="Permalink" class="datePermalink"><span class="DateTime" title="Oct 3, 2017 at 1:40 AM">Oct
                                                        3, 2017</span></a>
                                            </span>
                                        </div>
                                        <div class="publicControls">
                                            <a href="threads/accessing-steamclient-buildid-on-rust-server.27350/#post-353825" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                                                data-href="posts/353825/permalink">#5</a>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li id="post-359029" class="message   " data-author="Kolyma">
                                <div class="messageUserInfo" itemscope="itemscope" itemtype="http://data-vocabulary.org/Person">
                                    <div class="messageUserBlock ">
                                        <div class="avatarHolder">
                                            <span class="helper"></span>
                                            <a class="avatar Avm" data-avatarhtml="true"><img src="styles/default/xenforo/avatars/avatar_m.png" width="96" height="96" alt="Kolyma" /></a>
                                        </div>
                                        <h3 class="userText">
                                            <a class="username" dir="auto">Kolyma</a>
                                        </h3>
                                        <span class="arrow"><span></span></span>
                                    </div>
                                </div>
                                <div class="messageInfo primaryContent">
                                    <div class="messageContent">
                                        <article>
                                            <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Just to post a follow-up to this, ultimately I had to run a file-based process to pull
                                                the installed <b>buildid</b> from parsing the file <div class="bbCodeBlock bbCodeCode">
                                                    <div class="type">Code:</div>
                                                    <pre>C:\Rust\Server\rustds\steamapps\appmanifest_258550.acf</pre>
                                                </div>
                                                <div class="bbCodeBlock bbCodeCode">
                                                    <div class="type">Code:</div>
                                                    <pre>&quot;SizeOnDisk&quot;     &quot;5803549654&quot;
&quot;buildid&quot;        &quot;2217183&quot;
&quot;LastOwner&quot;      &quot;76561200052722720&quot;</pre>
                                                </div>I&#039;m not satisfied with that solution for a number of reasons. If anyone ever figures out how to find it through function calls to the
                                                running instance of Rust server/ Steam API, please post the answer here. Thanks <div class="messageTextEndMarker">&nbsp;</div>
                                            </blockquote>
                                        </article>
                                    </div>
                                    <div class="messageMeta ToggleTriggerAnchor">
                                        <div class="privateControls">
                                            <span class="item muted">
                                                <span class="authorEnd"><a class="username author" dir="auto">Kolyma</a>,</span>
                                                <a href="threads/accessing-steamclient-buildid-on-rust-server.27350/#post-359029" title="Permalink" class="datePermalink"><span class="DateTime" title="Oct 21, 2017 at 5:53 PM">Oct
                                                        21, 2017</span></a>
                                            </span>
                                        </div>
                                        <div class="publicControls">
                                            <a href="threads/accessing-steamclient-buildid-on-rust-server.27350/#post-359029" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                                                data-href="posts/359029/permalink">#6</a>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ol>
                    </form>
                    <div class="pageNavLinkGroup">
                        <div class="linkGroup">
                        </div>
                        <div class="linkGroup" style="display: none"><a href="javascript:" class="muted JsOnly DisplayIgnoredContent Tooltip" title="Show hidden content by ">Show Ignored Content</a></div>
                    </div>
                    <footer>
                        <div class="footer">
                            <div class="pageContent">
                            </div>
                            <span class="helper"></span>
                            <ul class="footerLinks">
                                <li><a href="https://oxidemod.org/terms/">Terms and Rules</a></li>
                                <li><a href="https://umod.org/community" target="_blank">Contact Us</a></li>
                            </ul>
                            <span class="helper"></span>
                        </div>
                </div>
                </footer>
            </div>
        </div>
    </div>
    <header>
        <div id="header">
            <div class="headerWidth">
                <div id="logoBlock">
                    <div id="logo"><a href="https://oxidemod.org/">
                            <span></span>
                            <img src="styles/oxide/logo.png" alt="Oxide" />
                        </a></div>
                    <span class="helper"></span>
                </div>
                <div id="navigation" class="">
                    <div class="pageContent">
                        <nav>
                            <div class="navTabs">
                                <ul class="publicTabs">
                                    <li class="navTab forums Popup PopupControl PopupClosed PopupContainerControl">
                                        <a href="https://oxidemod.org/" class="navLink" rel="Menu">Forums</a>
                                    </li>
                                    <li class="navTab PopupClosed">
                                        <a href="https://umod.org/documentation" class="navLink">Docs</a>
                                    </li>
                                    <li class="navTab Popup PopupControl PopupClosed PopupContainerControl">
                                        <a href="https://oxidemod.org/downloads/" class="navLink" rel="Menu"> Downloads </a>
                                    </li>
                                    <li class="navTab Popup PopupControl PopupClosed PopupContainerControl">
                                        <a href="https://oxidemod.org/plugins/" class="navLink" rel="Menu"> Plugins </a>
                                    </li>
                                    <li class="navTab selected">
                                        <div class="tabLinks"></div>
                                    </li>
                                </ul>
                            </div>
                            <span class="helper"></span>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </header>
    </div>
    <script>
        jQuery.extend(true, XenForo, {
            visitor: {
                user_id: 0
            },
            serverTimeInfo: {
                now: 1548554941,
                today: 1548547200,
                todayDow: 0
            },
            _lightBoxUniversal: "0",
            _enableOverlays: "1",
            _animationSpeedMultiplier: "1",
            _overlayConfig: {
                top: "10%",
                speed: 200,
                closeSpeed: 100,
                mask: {
                    color: "rgb(255, 255, 255)",
                    opacity: "0.6",
                    loadSpeed: 200,
                    closeSpeed: 100
                }
            },
            _ignoredUsers: [],
            _loadedScripts: {
                "thread_view": true,
                "message": true,
                "bb_code": true,
                "message_user_info": true
            },
            _cookieConfig: {
                path: "/",
                domain: ".oxidemod.org",
                prefix: "ih_xfid_"
            },
            _csrfToken: "",
            _csrfRefreshUrl: "login/csrf-token-refresh",
            _jsVersion: "f33b43a2"
        });
        jQuery.extend(XenForo.phrases, {
            cancel: "Cancel",
            a_moment_ago: "A moment ago",
            one_minute_ago: "1 minute ago",
            x_minutes_ago: "%minutes% minutes ago",
            today_at_x: "Today at %time%",
            yesterday_at_x: "Yesterday at %time%",
            day_x_at_time_y: "%day% at %time%",
            day0: "Sunday",
            day1: "Monday",
            day2: "Tuesday",
            day3: "Wednesday",
            day4: "Thursday",
            day5: "Friday",
            day6: "Saturday",
            _months: "January,February,March,April,May,June,July,August,September,October,November,December",
            _daysShort: "Sun,Mon,Tue,Wed,Thu,Fri,Sat",
            following_error_occurred: "The following error occurred",
            server_did_not_respond_in_time_try_again: "The server did not respond in time. Please try again.",
            logging_in: "Logging in",
            click_image_show_full_size_version: "Click this image to show the full-size version.",
            show_hidden_content_by_x: "Show hidden content by {names}"
        });

    </script>
</body>

</html>
