<!DOCTYPE html>
<html lang="en-US" dir="LTR" class="Public NoJs LoggedOut NoSidebar Responsive">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <base href="" />
    <title>Oxide - Function compatible with both BasePlayer and IPlayer?</title>
    <noscript>
        <style>
            .JsOnly,
            .jsOnly {
                display: none !important;
            }
        </style>
    </noscript>
    <script src="/assets/js/jquery/jquery-1.11.0.min.js"></script>
    <script src="/assets/js/xenforo/xenforo.js?_v=f33b43a2"></script>
    <link rel="canonical" href="" />
    <link rel="stylesheet" href="/assets/default.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" />
    <link rel="icon" sizes="196x196" href="/assets/styles/oxide/logo.og.png" />
    <link rel="apple-touch-icon" href="/assets/styles/oxide/logo.og.png" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="description" content="Oxide is an abstracted, modular, and extensible mod and plugin framework for any game that uses .NET" />
    <meta property="og:site_name" content="Oxide" />
    <meta property="og:image" content="/assets/styles/oxide/logo.og.png" />
    <meta property="og:url" content="" />
    <meta property="og:title" content="Oxide - Function compatible with both BasePlayer and IPlayer?" />
    <meta property="og:description" content="" />
</head>
<body>
    <div id="headerMover">
        <div id="headerProxy"></div>
        <div id="content" class="forum_list">
            <div class="pageWidth">
                <div class="pageContent">
                    <div class="breadBoxTop">
    <nav>
        <fieldset class="breadcrumb">
            <div class="boardTitle"><strong>Oxide</strong></div>
            <span class="crumbs">
                <span class="crust">
                    <a href="/" class="crumb" rel="up" itemprop="url">
                        <span itemprop="title">Forums</span>
                    </a>
                    <span class="arrow"></span>
                </span>
                
                    
                    <span class="crust">
                        <a href="/forums/plugin-development.105/" class="crumb" rel="up" itemprop="url">
                            <span itemprop="title">Plugin Development</span>
                        </a>
                        <span class="arrow"></span>
                    </span>
                    
                
                    
                    <span class="crust">
                        <a href="/forums/rust-development.4/" class="crumb" rel="up" itemprop="url">
                            <span itemprop="title">Rust Development</span>
                        </a>
                        <span class="arrow"></span>
                    </span>
                    
                
            </span>
        </fieldset>
    </nav>
</div>

<div class="titleBar">
    <h1>
        <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/">Function compatible with both BasePlayer and IPlayer?</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="/forums/rust-development.4/">Rust Development</a>' started by <a class="username"
            dir="auto">Shytoos</a>, <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/"><span class="DateTime"
                title="Nov 10, 2016 at 1:56 PM">Nov 10, 2016</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-267279" class="message" data-author="Shytoos">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Shytoos" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Shytoos</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Greetings,<br />
                        <br />
                        <br /> I made a small plugin to be able to use my automated VIP WebPanel on Rust, so people can buy the VIP rank for a limited time.<br />
                        <br /> The problem is that, it&#039;s using the user&#039;s SteamID to identify him, so I can get the SteamID from a BasePlayer object, but not from IPlayer.<br />
                        <br /> Here is the interesting part from my Plugin:<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>private bool IsPlayerVip(object player) {
    if (player == null)
        throw new ArgumentException(&quot;player&quot;);    if (player is ulong)
        return playerVip[((ulong)player).ToString()];
    else if (player is BasePlayer)
        return playerVip[(player as BasePlayer).userID.ToString()];
    
    return false;
}</pre>
                        </div>Is there any way to make it compatible with IPlayer ?<br /> For example, it will work with:<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>void Example(BasePlayer player)
{
    var example = 1.0;    if ((bool)VipManager?.Call(&quot;IsPlayerVip&quot;, player) == true)
        example = 1.5;    //[...]
}</pre>
                        </div>but not with something like<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>
void Example(IPlayer player)
{
    var example = 1.0;    if ((bool)VipManager?.Call(&quot;IsPlayerVip&quot;, player) == true)
        example = 1.5;    //[...]
}</pre>
                        </div><br /> Could anyone help me?<br />
                        <br /> Thanks for reading. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Shytoos</a>,</span>
                        <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Nov 10, 2016 at 1:56 PM">Nov 10, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/267279/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-267280" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Pass something generic like a string or ulong, not the entire object. Return true or false based on if they are
                        VIP or not. There&#039;s no need to pass the entire object for a method like that.<br />
                        <br />
                        <b>Example of usage:</b><br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>bool IsPlayerVip(string id) =&gt; playerVip.Contains(id)</pre>
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267280" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Nov 10, 2016 at 1:57 PM">Nov 10, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267280" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/267280/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-267283" class="message" data-author="Shytoos">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Shytoos" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Shytoos</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Ok, but how can I get the SteamID from IPlayer, if I use something like:<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>private bool IsPlayerVip(string playerID) {
    return playerVip[playerID];
}</pre>
                        </div>Because the bool is actually stocked in, for example, playerVip[76561190000000000]<br />
                        <br /> So if I call it this way:<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>VipManager?.Call(&quot;IsPlayerVip&quot;, entity.userID.ToString())</pre>
                        </div>I will still have the same problem, I wouldn&#039;t be able to do that with IPlayer since there is no userID inside.<br />
                        <br />
                        <br /> Thanks for your fast answer by the way!<br />
                        <br /> EDIT:<br />
                        <br /> That may help, it&#039;s how the variable is defined according to the MySQL result:<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>var sql = Sql.Builder.Append(&quot;SELECT * FROM vip_users WHERE steamid = @0 AND vip_date &gt; @1&quot;, player.userID, DateTime.UtcNow);_mySql.Query(sql, _mySqlConnection, list =&gt;
{
    if (list.Count &gt; 0) {
        playerVip[player.userID.ToString()] = true;
    } else {
        playerVip[player.userID.ToString()] = false;
    }
});</pre>
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Shytoos</a>,</span>
                        <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267283" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Nov 10, 2016 at 2:04 PM">Nov 10, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267283" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/267283/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-267285" class="message" data-author="Mughisi">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Mughisi" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Mughisi</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Shytoos">
                            <aside>
                                <div class="attribution type">Shytoos said: <a href="#post-267283" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Ok, but how can I get the SteamID from IPlayer, if I use something like:<br />
                                        <br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            <pre>private bool IsPlayerVip(string playerID) {
    return playerVip[playerID];
}</pre>
                                        </div>Because the bool is actually stocked in, for example, playerVip[76561190000000000]<br />
                                        <br /> So if I call it this way:<br />
                                        <br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            <pre>VipManager?.Call(&quot;IsPlayerVip&quot;, entity.userID.ToString())</pre>
                                        </div>I will still have the same problem, I wouldn&#039;t be able to do that with IPlayer since there is no userID inside.<br />
                                        <br />
                                        <br /> Thanks for your fast answer by the way!
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>IPlayer contains the steamid (as a string) in the `<i>Id</i>` field so taking your IPlayer example:<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>void Example(IPlayer player)
{
    var example = 1.0;
    //------------------------------------------------v
    if ((bool)VipManager?.Call(&quot;IsPlayerVip&quot;, player.Id) == true)
        example = 1.5;    //[...]
}</pre>
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
                        <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267285" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Nov 10, 2016 at 2:08 PM">Nov 10, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267285" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/267285/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-267288" class="message" data-author="Shytoos">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Shytoos" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Shytoos</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Ok thank you for that, so now my function looks like that:<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>private bool IsPlayerVip(string playerID) {
    return playerVip[playerID];
}</pre>
                        </div>So I tried to call it from another plugin using IPlayer :<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>(bool)VipManager?.Call(&quot;IsPlayerVip&quot;, player.Id)</pre>
                        </div>And I get this error :<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>Cannot cast from source type to destination type.</pre>
                        </div><br /> EDIT:<br />
                        <br /> By the way, it&#039;s still working fine with BasePlayer using:<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>(bool)VipManager?.Call(&quot;IsPlayerVip&quot;, player.userID.ToString()</pre>
                        </div>And with IPlayer I tried both :<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>(bool)VipManager?.Call(&quot;IsPlayerVip&quot;, player.Id)
(bool)VipManager?.Call(&quot;IsPlayerVip&quot;, player.Id.ToString())</pre>
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Shytoos</a>,</span>
                        <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267288" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Nov 10, 2016 at 2:18 PM">Nov 10, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267288" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/267288/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-267290" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Shytoos">
                            <aside>
                                <div class="attribution type">Shytoos said: <a href="#post-267288" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Ok thank you for that, so now my function looks like that:<br />
                                        <br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            <pre>private bool IsPlayerVip(string playerID) {
    return playerVip[playerID];
}</pre>
                                        </div>So I tried to call it from another plugin using IPlayer :<br />
                                        <br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            <pre>(bool)VipManager?.Call(&quot;IsPlayerVip&quot;, player.Id)</pre>
                                        </div>And I get this error :<br />
                                        <br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            <pre>Cannot cast from source type to destination type.</pre>
                                        </div>
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Firstly, I&#039;d check if the playerVip.Contains it before trying to return a bool, otherwise you&#039;ll run into NREs. I&#039;d also check if VipManager is null before
                        trying to cast to bool, else you&#039;ll also get NREs if someone doesn&#039;t have it installed. Could you post the full error as well along with the full code snippet you are
                        using the call in? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267290" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Nov 10, 2016 at 2:20 PM">Nov 10, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267290" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/267290/permalink">#6</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-267291" class="message" data-author="Shytoos">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Shytoos" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Shytoos</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Sure, I&#039;m getting this error:<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>[Oxide] 15:21 [Error] Failed to call hook 'IsPlayerVip' on plugin 'VipManager v1.0.0' (InvalidCastException: Cannot cast from source type to destination type.)
[Oxide] 15:21 [Debug]   at Oxide.Plugins.VipManager.DirectCallHook (System.String name, System.Object&amp; ret, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.CSharpPlugin.InvokeMethod (HookMethod method, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Core.Plugins.CSPlugin.OnCallHook (System.String name, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Core.Plugins.Plugin.CallHook (System.String name, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
[Oxide] 15:21 [Error] Failed to call hook 'Unload' on plugin 'PlaytimeTracker v0.1.31' (NullReferenceException: Object reference not set to an instance of an object)
[Oxide] 15:21 [Debug]   at Oxide.Plugins.PlaytimeTracker.GetRewardMultiplier (IPlayer player) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.PlaytimeTracker.AddPoints (IPlayer player, Int32 amount) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.PlaytimeTracker.CheckForReward (IPlayer player) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.PlaytimeTracker.AddTime (IPlayer player) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.PlaytimeTracker.OnUserDisconnected (IPlayer player) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.PlaytimeTracker.Unload () [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.PlaytimeTracker.DirectCallHook (System.String name, System.Object&amp; ret, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.CSharpPlugin.InvokeMethod (HookMethod method, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Core.Plugins.CSPlugin.OnCallHook (System.String name, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Core.Plugins.Plugin.CallHook (System.String name, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0 </pre>
                        </div>And I&#039;m trying to call it from the PlaytimeTracker plugin :<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>object GetRewardMultiplier(IPlayer player)
{
    if ((bool)VipManager?.Call(&quot;IsPlayerVip&quot;, ulong.Parse(player.Id).ToString()) == true)
        return 2f;    foreach (var perm in permData.permissions)
        if (permission.UserHasPermission(player.Id, perm.Key))
            return perm.Value;
    return null;
}</pre>
                        </div>I&#039;m going to add the verifications, but I thought using a question mark after &quot;VipManager?&quot; was something like &quot;Only if declared&quot;.<br />
                        <br />
                        <br /> EDIT:<br />
                        <br /> And yeah, I also tried ulong.Parse(player.Id).ToString() as you can see ^^ <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Shytoos</a>,</span>
                        <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267291" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Nov 10, 2016 at 2:25 PM">Nov 10, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267291" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/267291/permalink">#7</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-267293" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Shytoos">
                            <aside>
                                <div class="attribution type">Shytoos said: <a href="#post-267291" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Sure, I&#039;m getting this error:<br />
                                        <br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            <pre>[Oxide] 15:21 [Error] Failed to call hook 'IsPlayerVip' on plugin 'VipManager v1.0.0' (InvalidCastException: Cannot cast from source type to destination type.)
[Oxide] 15:21 [Debug]   at Oxide.Plugins.VipManager.DirectCallHook (System.String name, System.Object&amp; ret, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.CSharpPlugin.InvokeMethod (HookMethod method, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Core.Plugins.CSPlugin.OnCallHook (System.String name, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Core.Plugins.Plugin.CallHook (System.String name, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
[Oxide] 15:21 [Error] Failed to call hook 'Unload' on plugin 'PlaytimeTracker v0.1.31' (NullReferenceException: Object reference not set to an instance of an object)
[Oxide] 15:21 [Debug]   at Oxide.Plugins.PlaytimeTracker.GetRewardMultiplier (IPlayer player) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.PlaytimeTracker.AddPoints (IPlayer player, Int32 amount) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.PlaytimeTracker.CheckForReward (IPlayer player) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.PlaytimeTracker.AddTime (IPlayer player) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.PlaytimeTracker.OnUserDisconnected (IPlayer player) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.PlaytimeTracker.Unload () [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.PlaytimeTracker.DirectCallHook (System.String name, System.Object&amp; ret, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.CSharpPlugin.InvokeMethod (HookMethod method, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Core.Plugins.CSPlugin.OnCallHook (System.String name, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Core.Plugins.Plugin.CallHook (System.String name, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0 </pre>
                                        </div>And I&#039;m trying to call it from the PlaytimeTracker plugin :<br />
                                        <br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            <pre>object GetRewardMultiplier(IPlayer player)
{
    if ((bool)VipManager?.Call(&quot;IsPlayerVip&quot;, ulong.Parse(player.Id).ToString()) == true)
        return 2f;    foreach (var perm in permData.permissions)
        if (permission.UserHasPermission(player.Id, perm.Key))
            return perm.Value;
    return null;
}</pre>
                                        </div>I&#039;m going to add the verifications, but I thought using a question mark after &quot;VipManager?&quot; was something like &quot;Only if
                                        declared&quot;.<br />
                                        <br />
                                        <br /> EDIT:<br />
                                        <br /> And yeah, I also tried ulong.Parse(player.Id).ToString() as you can see ^^
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Why would you try converting a string to a ulong and back to a string? <img src="styles/default/xenforo/clear.png" class="mceSmilieSprite mceSmilie7" alt=":p"
                            title="Stick Out Tongue    :p" /><br />
                        <br /> Could I see the code for your IsPlayerVip? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267293" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Nov 10, 2016 at 2:32 PM">Nov 10, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267293" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/267293/permalink">#8</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-267295" class="message" data-author="Shytoos">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Shytoos" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Shytoos</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> There are the parts you may want to see:<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>private List&lt;string&gt; playerVip = new List&lt;string&gt;();public void refreshUser(BasePlayer player)
{
    var sql = Sql.Builder.Append(&quot;SELECT * FROM vip_users WHERE steamid = @0 AND vip_date &gt; @1&quot;, player.userID, DateTime.UtcNow);    _mySql.Query(sql, _mySqlConnection, list =&gt;
    {
        var playerID = player.userID.ToString();
        if (list.Count &gt; 0 &amp;&amp; !playerVip.Contains(playerID)) {
            playerVip.Add(playerID);
        } else if (list.Count == 0 &amp;&amp; playerVip.Contains(playerID)) {
            playerVip.Remove(playerID);
        }
    });
}[HookMethod(&quot;IsPlayerVip&quot;)]
private bool IsPlayerVip(string playerID) {
    return (bool)playerVip.Contains(playerID);
}</pre>
                        </div>Everything around is just related to the Database connection which is working fine <img src="styles/default/xenforo/clear.png" class="mceSmilieSprite mceSmilie1" alt=":)"
                            title="Smile    :)" /><br />
                        <br /> It&#039;s working great with this function from GatherManager:<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>private void OnCollectiblePickup(Item item, BasePlayer player)
{
    var vipMult = 1.0;    if (VipManager &amp;&amp; (bool)VipManager?.Call(&quot;IsPlayerVip&quot;, player.userID.ToString()) == true)
        vipMult = 1.5;
              
    if (PickupResourceModifiers.ContainsKey(item.info.displayName.english))
        item.amount = (int)(item.amount * PickupResourceModifiers[item.info.displayName.english] * vipMult);
    else if (PickupResourceModifiers.ContainsKey(&quot;*&quot;))
        item.amount = (int)(item.amount * PickupResourceModifiers[&quot;*&quot;] * vipMult);
}</pre>
                        </div>but not with this one, so I don&#039;t really understand ^^<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>object GetRewardMultiplier(IPlayer player)
{
    if (VipManager &amp;&amp; (bool)VipManager?.Call(&quot;IsPlayerVip&quot;, player.Id) == true)
        return 2.0f;    foreach (var perm in permData.permissions)
        if (permission.UserHasPermission(player.Id, perm.Key))
            return perm.Value;
    return null;
}</pre>
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Shytoos</a>,</span>
                        <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267295" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Nov 10, 2016 at 2:41 PM">Nov 10, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267295" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/267295/permalink">#9</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-267662" class="message" data-author="Shytoos">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Shytoos" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Shytoos</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <a href="https://oxidemod.org/members/1115/" class="username" data-user="1115, @Wulf">@Wulf</a>, Bump, I think you forgot about my thread ^^ <div class="messageTextEndMarker">
                            &nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Shytoos</a>,</span>
                        <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267662" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Nov 11, 2016 at 6:25 PM">Nov 11, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267662" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/267662/permalink">#10</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-267666" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Shytoos">
                            <aside>
                                <div class="attribution type">Shytoos said: <a href="#post-267295" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">There are the parts you may want to see:<br />
                                        <br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            <pre>private List&lt;string&gt; playerVip = new List&lt;string&gt;();public void refreshUser(BasePlayer player)
{
    var sql = Sql.Builder.Append(&quot;SELECT * FROM vip_users WHERE steamid = @0 AND vip_date &gt; @1&quot;, player.userID, DateTime.UtcNow);    _mySql.Query(sql, _mySqlConnection, list =&gt;
    {
        var playerID = player.userID.ToString();
        if (list.Count &gt; 0 &amp;&amp; !playerVip.Contains(playerID)) {
            playerVip.Add(playerID);
        } else if (list.Count == 0 &amp;&amp; playerVip.Contains(playerID)) {
            playerVip.Remove(playerID);
        }
    });
}[HookMethod(&quot;IsPlayerVip&quot;)]
private bool IsPlayerVip(string playerID) {
    return (bool)playerVip.Contains(playerID);
}</pre>
                                        </div>Everything around is just related to the Database connection which is working fine <img src="styles/default/xenforo/clear.png"
                                            class="mceSmilieSprite mceSmilie1" alt=":)" title="Smile    :)" /><br />
                                        <br /> It&#039;s working great with this function from GatherManager:<br />
                                        <br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            <pre>private void OnCollectiblePickup(Item item, BasePlayer player)
{
    var vipMult = 1.0;    if (VipManager &amp;&amp; (bool)VipManager?.Call(&quot;IsPlayerVip&quot;, player.userID.ToString()) == true)
        vipMult = 1.5;
            
    if (PickupResourceModifiers.ContainsKey(item.info.displayName.english))
        item.amount = (int)(item.amount * PickupResourceModifiers[item.info.displayName.english] * vipMult);
    else if (PickupResourceModifiers.ContainsKey(&quot;*&quot;))
        item.amount = (int)(item.amount * PickupResourceModifiers[&quot;*&quot;] * vipMult);
}</pre>
                                        </div>but not with this one, so I don&#039;t really understand ^^<br />
                                        <br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            <pre>object GetRewardMultiplier(IPlayer player)
{
    if (VipManager &amp;&amp; (bool)VipManager?.Call(&quot;IsPlayerVip&quot;, player.Id) == true)
        return 2.0f;    foreach (var perm in permData.permissions)
        if (permission.UserHasPermission(player.Id, perm.Key))
            return perm.Value;
    return null;
}</pre>
                                        </div>
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Rust has player.UserIDString by the way, I&#039;d use that over ToString(). You also do not need [HookMethod(&quot;IsPlayerVip&quot;)].<br />
                        <br /> Is player.Id showing as a string in Visual Studio? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267666" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Nov 11, 2016 at 6:27 PM">Nov 11, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267666" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/267666/permalink">#11</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-267667" class="message" data-author="Shytoos">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Shytoos" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Shytoos</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Wulf">
                            <aside>
                                <div class="attribution type">Wulf said: <a href="#post-267666" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Rust has player.UserIDString by the way, I&#039;d use that over ToString(). You also do not need [HookMethod(&quot;IsPlayerVip&quot;)].</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>It&#039;s okay thank you, I removed the HookMethod and I turned userID.ToString() into UserIDString, and it&#039;s working fine.<br />
                        <br /> But that still doesn&#039;t fix the problem with the IPlayer function from PlaytimeTracker, how can I see if it&#039;s showing up as a string? <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Shytoos</a>,</span>
                        <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267667" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Nov 11, 2016 at 6:34 PM">Nov 11, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267667" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/267667/permalink">#12</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-267668" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Shytoos">
                            <aside>
                                <div class="attribution type">Shytoos said: <a href="#post-267667" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">It&#039;s okay thank you, I removed the HookMethod and I turned userID.ToString() into UserIDString, and it&#039;s working fine.<br />
                                        <br /> But that still doesn&#039;t fix the problem with the IPlayer function from PlaytimeTracker, how can I see if it&#039;s showing up as a string?</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Visual Studio should show you, otherwise try printing ToString() and see if it makes a difference. The player.Id from IPlayer should be a string though. <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267668" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Nov 11, 2016 at 6:37 PM">Nov 11, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-267668" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/267668/permalink">#13</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-268745" class="message" data-author="Shytoos">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Shytoos" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Shytoos</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Sorry for the late answer, I&#039;ve been really busy these days.<br />
                        <br />
                        <div class="bbCodeBlock bbCodeQuote" data-author="Wulf">
                            <aside>
                                <div class="attribution type">Wulf said: <a href="#post-267668" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Visual Studio should show you, otherwise try printing ToString() and see if it makes a difference. The player.Id from IPlayer should be a string
                                        though.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Oh hum.. I&#039;m not using Visual Studio, but I really don&#039;t understand, I don&#039;t have any error anymore, but it still doesn&#039;t work, and we all get the
                        default amount of RP every X minutes.<br />
                        <br /> Here&#039;s what the function looks like:<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            <pre>void AddPoints(IPlayer player, int amount)
{
    object multiplier = GetRewardMultiplier(player);
    if (multiplier == null) multiplier = 1f;
    var vipMult = 1f;
    if (VipManager &amp;&amp; (bool)VipManager?.Call(&quot;IsPlayerVip&quot;, player.Id) == true)
        vipMult = 2f;
    amount = Convert.ToInt32(Math.Floor(amount * (float)multiplier) * (float)vipMult);
    #if RUST
    if (ServerRewards &amp;&amp; configData.RewardSystem.RewardPlugins.Rust.ServerRewards)
        ServerRewards?.Call(&quot;AddPoints&quot;, ulong.Parse(player.Id), amount);    if (Economics &amp;&amp; configData.RewardSystem.RewardPlugins.Rust.Economics)
        Economics?.Call(&quot;Deposit&quot;, ulong.Parse(player.Id), (double)amount);
    #endif    #if HURTWORLD
    if (Economy &amp;&amp; configData.RewardSystem.RewardPlugins.Hurtworld.Economy)
        Economy?.Call(&quot;AddMoney&quot;, player.Object as PlayerSession, (double)amount);
    #endif
    if (UEconomics &amp;&amp; configData.RewardSystem.RewardPlugins.Universal.UEconomics)         
        UEconomics?.Call(&quot;Deposit&quot;, player.Id, amount);         
}</pre>
                        </div>amount is equal to &quot;500&quot;, multiplier is null, so set to &quot;1f&quot;, and vipMult should be set to 2f if the Call returns true (called function can be seen
                        above), and it is called the same way as it is called in the Gather plugin, and it works in it.<br />
                        <br /> By the way, I edited BetterChat to show a star symbol in front of the VIP players name, and it&#039;s working great, even if it is calling the function with as an arg
                        player.Id, so why it&#039;s not working with PlaytimeTracker, I&#039;m confused :S <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Shytoos</a>,</span>
                        <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-268745" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Nov 15, 2016 at 6:45 PM">Nov 15, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-268745" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/268745/permalink">#14</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-271829" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="/assets/styles/oxide/logo.og.png" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Shytoos">
                            <aside>
                                <div class="attribution type">Shytoos said: <a href="#post-268745" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Sorry for the late answer, I&#039;ve been really busy these days.<br />
                                        <br />
                                        <br />
                                        <br /> Oh hum.. I&#039;m not using Visual Studio, but I really don&#039;t understand, I don&#039;t have any error anymore, but it still doesn&#039;t work, and
                                        we all get the default amount of RP every X minutes.<br />
                                        <br /> Here&#039;s what the function looks like:<br />
                                        <br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            <pre>void AddPoints(IPlayer player, int amount)
{
    object multiplier = GetRewardMultiplier(player);
    if (multiplier == null) multiplier = 1f;
    var vipMult = 1f;
    if (VipManager &amp;&amp; (bool)VipManager?.Call(&quot;IsPlayerVip&quot;, player.Id) == true)
        vipMult = 2f;
    amount = Convert.ToInt32(Math.Floor(amount * (float)multiplier) * (float)vipMult);
    #if RUST
    if (ServerRewards &amp;&amp; configData.RewardSystem.RewardPlugins.Rust.ServerRewards)
        ServerRewards?.Call(&quot;AddPoints&quot;, ulong.Parse(player.Id), amount);    if (Economics &amp;&amp; configData.RewardSystem.RewardPlugins.Rust.Economics)
        Economics?.Call(&quot;Deposit&quot;, ulong.Parse(player.Id), (double)amount);
    #endif    #if HURTWORLD
    if (Economy &amp;&amp; configData.RewardSystem.RewardPlugins.Hurtworld.Economy)
        Economy?.Call(&quot;AddMoney&quot;, player.Object as PlayerSession, (double)amount);
    #endif
    if (UEconomics &amp;&amp; configData.RewardSystem.RewardPlugins.Universal.UEconomics)        
        UEconomics?.Call(&quot;Deposit&quot;, player.Id, amount);        
}</pre>
                                        </div>amount is equal to &quot;500&quot;, multiplier is null, so set to &quot;1f&quot;, and vipMult should be set to 2f if the Call returns true (called
                                        function can be seen above), and it is called the same way as it is called in the Gather plugin, and it works in it.<br />
                                        <br /> By the way, I edited BetterChat to show a star symbol in front of the VIP players name, and it&#039;s working great, even if it is calling the function
                                        with as an arg player.Id, so why it&#039;s not working with PlaytimeTracker, I&#039;m confused :S
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>All I can suggest is to add some debug output to see what the Call returns, what vipMult ends up being, etc. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-271829" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Nov 29, 2016 at 6:56 PM">Nov 29, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="/threads/function-compatible-with-both-baseplayer-and-iplayer.21885/#post-271829" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/271829/permalink">#15</a>
                </div>
            </div>
        </div>
    </li>
</ol>


                    <footer>
                        <div class="footer">
                            <div class="pageContent"></div>
                            <div id="copyright"><span class="concealed">Built: Wed, 27 Mar 2019 21:25:21 -0400</span></div>
                            <span class="helper"></span>
                            <ul class="footerLinks">
                                <li><a href="/terms/">Terms and Rules</a></li>
                                <li><a href="https://umod.org/community" target="_blank">Contact Us</a></li>
                            </ul>
                            <span class="helper"></span>
                        </div>
                    </footer>
                </div>
            </div>
        </div>
        <header>
            <div id="header">
                <div class="headerWidth">
                    <div id="logoBlock">
                        <div id="logo"><a href="/">
                                <span></span>
                                <img src="/assets/styles/oxide/logo.png" alt="Oxide" />
                            </a></div>
                        <span class="helper"></span>
                    </div>
                    <div id="navigation" class="">
                        <div class="pageContent">
                            <nav>
                                <div class="navTabs">
                                    <ul class="publicTabs">
                                        <li class="navTab forums Popup PopupControl PopupClosed PopupContainerControl">
                                            <a href="/" class="navLink" rel="Menu">Forums</a>
                                        </li>
                                        <li class="navTab PopupClosed">
                                            <a href="https://umod.org/documentation" class="navLink">Docs</a>
                                        </li>
                                        <li class="navTab Popup PopupControl PopupClosed PopupContainerControl">
                                            <a href="/downloads/" class="navLink" rel="Menu">Downloads</a>
                                        </li>
                                        <li class="navTab Popup PopupControl PopupClosed PopupContainerControl">
                                            <a href="/plugins/" class="navLink" rel="Menu">Plugins</a>
                                        </li>
                                        <li class="navTab selected">
                                            <div class="tabLinks"></div>
                                        </li>
                                    </ul>
                                </div>
                                <span class="helper"></span>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </header>
    </div>
    <script>
        jQuery.extend(true, XenForo, {
            visitor: {
                user_id: 0
            },
            serverTimeInfo: {
                now: 1548531785,
                today: 1548460800,
                todayDow: 6
            },
            _lightBoxUniversal: "0",
            _enableOverlays: "1",
            _animationSpeedMultiplier: "1",
            _overlayConfig: {
                top: "10%",
                speed: 200,
                closeSpeed: 100,
                mask: {
                    color: "rgb(255, 255, 255)",
                    opacity: "0.6",
                    loadSpeed: 200,
                    closeSpeed: 100
                }
            },
            _ignoredUsers: [],
            _loadedScripts: {
                "node_list": true,
                "node_category": true,
                "node_forum": true,
                "discussion_list": true,
                "wf_default": true
            },
            _cookieConfig: {
                path: "/",
                domain: ".oxidemod.org",
                prefix: "xfid_"
            },
            _jsVersion: "f33b43a2"
        });
        jQuery.extend(XenForo.phrases, {
            cancel: "Cancel",
            a_moment_ago: "A moment ago",
            one_minute_ago: "1 minute ago",
            x_minutes_ago: "%minutes% minutes ago",
            today_at_x: "Today at %time%",
            yesterday_at_x: "Yesterday at %time%",
            day_x_at_time_y: "%day% at %time%",
            day0: "Sunday",
            day1: "Monday",
            day2: "Tuesday",
            day3: "Wednesday",
            day4: "Thursday",
            day5: "Friday",
            day6: "Saturday",
            _months: "January,February,March,April,May,June,July,August,September,October,November,December",
            _daysShort: "Sun,Mon,Tue,Wed,Thu,Fri,Sat",
            following_error_occurred: "The following error occurred",
            server_did_not_respond_in_time_try_again: "The server did not respond in time. Please try again.",
            logging_in: "Logging in",
            click_image_show_full_size_version: "Click this image to show the full-size version.",
            show_hidden_content_by_x: "Show hidden content by {names}"
        });
    </script>
</body>
</html>
